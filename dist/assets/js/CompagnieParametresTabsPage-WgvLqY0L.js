import{r as d,j as e,Y as $,C as E,ac as q,ad as V,ae as A,af as O,_ as v,ag as T,ah as _,U as K,ai as P,aj as L,ak as G}from"./react-BKlva80Y.js";import{q as B,j as I,w as H,k as U,d as f,e as M,m as R,y as W,A as Y}from"./firebase-1zyXmG6H.js";import{d as b,u as w,m as y,a as F}from"../index-BrxuZDy-.js";import{A as D}from"./index-CppD9kpJ.js";import{u as Z}from"./useCompanyTheme-BjNRMZX9.js";import"./vendor-CZDa83Cj.js";const J=({companyId:s,onSelect:a,onClose:n})=>{const[i,x]=d.useState([]),[m,l]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{const t=B(I(b,"imagesBibliotheque"),H("companyId","==",s)),g=(await U(t)).docs.map(h=>({id:h.id,...h.data()}));x(g)}catch(t){console.error("Erreur lors de la récupération des images :",t)}l(!1)})()},[s]),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Choisir une image"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-red-500 text-sm",children:"✖ Fermer"})]}),m?e.jsx("p",{children:"Chargement..."}):i.length===0?e.jsx("p",{className:"text-gray-500",children:"Aucune image trouvée pour cette compagnie."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.map(c=>e.jsxs("div",{className:"border rounded overflow-hidden shadow hover:shadow-lg cursor-pointer",onClick:()=>a(c.url),children:[e.jsx("img",{src:c.url,alt:c.nom,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"p-2 text-sm text-center truncate",children:c.nom})]},c.id))})]})})},Q=()=>{const{user:s}=w(),[a,n]=d.useState({accroche:"",instructionRecherche:"",nom:"",telephone:"",description:"",logoUrl:"",faviconUrl:"",banniereUrl:"",imagesSlider:[],couleurPrimaire:"#3B82F6",couleurSecondaire:"#10B981",couleurAccent:"#FBBF24",couleurTertiaire:"#F472B6",themeStyle:"moderne",police:"sans-serif",socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0,showTestimonials:!0,showLegalLinks:!0,showContactForm:!0,customLinks:[]}}),[i,x]=d.useState({text:"",type:""}),[m,l]=d.useState(null),[c,t]=d.useState(null),p=[{name:"moderne",value:"moderne",description:"Style contemporain avec couleurs vives",icon:e.jsx(A,{size:16})},{name:"classique",value:"classique",description:"Style traditionnel épuré",icon:e.jsx(L,{size:16})},{name:"sombre",value:"sombre",description:"Mode nuit élégant",icon:e.jsx(T,{size:16})},{name:"contraste",value:"contraste",description:"Fort impact visuel",icon:e.jsx(G,{size:16})},{name:"minimaliste",value:"minimaliste",description:"Design ultra épuré",icon:e.jsx(L,{size:16})},{name:"glassmorphism",value:"glassmorphism",description:"Effets de transparence moderne",icon:e.jsx(A,{size:16})}];d.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const u=f(b,"companies",s.companyId),j=await M(u);j.exists()&&n(o=>({...o,...j.data()}))})()},[s]);const g=async()=>{if(s!=null&&s.companyId){x({text:"Enregistrement en cours...",type:"info"});try{const r=f(b,"companies",s.companyId);await R(r,a),x({text:"Modifications enregistrées avec succès",type:"success"})}catch(r){console.error("Erreur d'enregistrement:",r),x({text:"Échec de l'enregistrement. Veuillez réessayer.",type:"error"})}}},h=r=>{const{name:u,value:j}=r.target;n(o=>({...o,[u]:j}))},N=r=>{m&&(n(u=>({...u,...m==="logo"&&{logoUrl:r},...m==="favicon"&&{faviconUrl:r},...m==="banniereStatique"&&{banniereUrl:r},...m==="banniere"&&{imagesSlider:[...u.imagesSlider,r]}})),l(null))},C=r=>{n(u=>({...u,imagesSlider:u.imagesSlider.filter((j,o)=>o!==r)}))};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs(y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 flex items-center gap-4 border-l-4",style:{borderLeftColor:a.couleurPrimaire},children:[e.jsx($,{className:"h-8 w-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Personnalisation de la vitrine"}),e.jsx("p",{className:"text-gray-500",children:"Configurez l'apparence de votre page publique"})]})]}),e.jsx(D,{children:i.text&&e.jsx(y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 ${i.type==="success"?"bg-green-100 text-green-800 border-l-4 border-green-500":i.type==="error"?"bg-red-100 text-red-800 border-l-4 border-red-500":"bg-blue-100 text-blue-800 border-l-4 border-blue-500"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[i.type==="success"?e.jsx(E,{className:"h-6 w-6 mr-2"}):i.type==="error"?e.jsx(q,{className:"h-6 w-6 mr-2"}):e.jsx("div",{className:"h-6 w-6 mr-2 animate-spin rounded-full border-t-2 border-b-2 border-blue-500"}),e.jsx("span",{children:i.text})]}),i.type==="success"&&e.jsx("button",{onClick:()=>x({text:"",type:""}),className:"text-sm underline text-green-800 hover:text-green-900",type:"button",children:"OK"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(V,{className:"text-blue-500"}),"Textes personnalisés"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phrase d'accroche (titre principal)"}),e.jsx("input",{type:"text",name:"accroche",value:a.accroche,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Réservez votre billet en un clic"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Sera affiché en grand sur votre bannière"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instruction de recherche"}),e.jsx("input",{type:"text",name:"instructionRecherche",value:a.instructionRecherche,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Remplissez les champs ci-dessous pour trouver votre trajet"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"S'affiche au-dessus du formulaire de recherche"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(A,{className:"text-purple-500"}),"Couleurs"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{name:"Primaire",key:"couleurPrimaire",value:a.couleurPrimaire},{name:"Secondaire",key:"couleurSecondaire",value:a.couleurSecondaire},{name:"Accent",key:"couleurAccent",value:a.couleurAccent},{name:"Tertiaire",key:"couleurTertiaire",value:a.couleurTertiaire}].map(r=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg cursor-pointer border-2 border-gray-200 shadow-sm",style:{backgroundColor:r.value},onClick:()=>t(r.key)}),e.jsx("span",{className:"text-sm font-mono",children:r.value})]}),c===r.key&&e.jsxs("div",{className:"absolute z-10 mt-2 bg-white p-3 rounded-xl shadow-xl border border-gray-200",children:[e.jsx(O,{color:r.value,onChange:u=>n({...a,[r.key]:u})}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsx("input",{type:"text",value:r.value,onChange:u=>n({...a,[r.key]:u.target.value}),className:"text-sm border rounded-lg px-3 py-1.5 w-24"}),e.jsx("button",{onClick:()=>t(null),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Valider"})]})]})]},r.key))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(v,{className:"text-pink-500"}),"Images"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),a.logoUrl?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e.jsx("img",{src:a.logoUrl,alt:"Logo",className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("logo"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e.jsx("button",{onClick:()=>n({...a,logoUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>l("logo"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(v,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter un logo"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 300x300px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favicon"}),a.faviconUrl?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e.jsx("img",{src:a.faviconUrl,alt:"Favicon",className:"h-8 w-8 object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("favicon"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e.jsx("button",{onClick:()=>n({...a,faviconUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>l("favicon"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(v,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter un favicon"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 32x32px"})]})]})]})]})]}),e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(T,{className:"text-indigo-500"}),"Thème graphique"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map(r=>e.jsxs(y.div,{whileHover:{y:-2},onClick:()=>n({...a,themeStyle:r.value}),className:`p-4 border rounded-xl cursor-pointer transition-all ${a.themeStyle===r.value?"ring-2 ring-blue-500 border-transparent bg-blue-50":"hover:shadow-md border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.icon,e.jsx("span",{className:"capitalize font-medium text-gray-700",children:r.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.description})]},r.value))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(v,{className:"text-amber-500"}),"Bannière"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture statique"}),a.banniereUrl?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:a.banniereUrl,alt:"Bannière",className:"h-40 w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end p-4",children:e.jsx("h3",{className:"text-white font-bold text-lg",children:a.accroche||"Votre phrase d'accroche"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("banniereStatique"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer l'image"}),e.jsx("button",{onClick:()=>n({...a,banniereUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>l("banniereStatique"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(v,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter une bannière"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 1200x400px"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Images du slider (",a.imagesSlider.length,")"]}),a.imagesSlider.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.imagesSlider.map((r,u)=>e.jsxs(y.div,{className:"relative group",whileHover:{scale:1.02},children:[e.jsx("img",{src:r,alt:`Slide ${u}`,className:"h-24 w-full object-cover rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>C(u),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md hover:bg-red-600",children:e.jsx(_,{size:14})})]},u))}),e.jsxs("button",{onClick:()=>l("banniere"),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1.5 mt-2",children:[e.jsx(K,{size:14})," Ajouter des images"]})]}):e.jsxs("button",{onClick:()=>l("banniere"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(v,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter des images au slider"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 3-5 images"})]})]})]})]})]})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:g,className:`px-6 py-3 text-white font-medium rounded-lg shadow-md transition flex items-center justify-center gap-2 ${i.type==="success"?"bg-green-500 hover:bg-green-600":i.type==="error"?"bg-red-500 hover:bg-red-600":"bg-blue-600 hover:bg-blue-700"}`,style:{backgroundColor:i.type?void 0:a.couleurPrimaire,minWidth:"200px"},children:i.type==="success"?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Enregistré !"})]}):i.type==="error"?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("span",{children:"Réessayer"})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{children:"Enregistrer"})]})})}),m&&(s==null?void 0:s.companyId)&&e.jsx(J,{companyId:s.companyId,onSelect:N,onClose:()=>l(null)})]})})},X=()=>{const[s,a]=d.useState([]),[n,i]=d.useState([]),[x,m]=d.useState(""),[l,c]=d.useState(""),[t,p]=d.useState(""),[g,h]=d.useState("guichetier"),[N,C]=d.useState(""),r=async()=>{const o=B(I(b,"users")),S=(await U(o)).docs.map(z=>({id:z.id,...z.data()}));a(S)},u=async()=>{const k=(await U(I(b,"agences"))).docs.map(S=>({id:S.id,nomAgence:S.data().nomAgence}));i(k)},j=async o=>{if(o.preventDefault(),!x||!l||!t||!N||!g){alert("Tous les champs sont obligatoires.");return}try{await W(I(b,"users"),{nom:x,email:l,motDePasse:t,role:g,agencyId:N,createdAt:new Date}),alert("Utilisateur ajouté avec succès."),m(""),c(""),p(""),h("guichetier"),C(""),r()}catch(k){console.error("Erreur ajout utilisateur :",k),alert("Erreur lors de l'ajout.")}};return d.useEffect(()=>{u(),r()},[]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gestion du personnel"}),e.jsxs("form",{onSubmit:j,className:"bg-gray-100 p-4 rounded mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:x,onChange:o=>m(o.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l,onChange:o=>c(o.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Mot de passe temporaire"}),e.jsx("input",{type:"text",value:t,onChange:o=>p(o.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Rôle"}),e.jsxs("select",{value:g,onChange:o=>h(o.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"guichetier",children:"Guichetier"}),e.jsx("option",{value:"agent_courrier",children:"Agent de courrier"}),e.jsx("option",{value:"chef_agence",children:"Chef d’agence"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"Agence"}),e.jsxs("select",{value:N,onChange:o=>C(o.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"",children:"-- Sélectionner une agence --"}),n.map(o=>e.jsx("option",{value:o.id,children:o.nomAgence},o.id))]})]}),e.jsx("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded md:col-span-2",children:"Ajouter l'utilisateur"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Liste du personnel"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 border",children:"Nom"}),e.jsx("th",{className:"px-4 py-2 border",children:"Email"}),e.jsx("th",{className:"px-4 py-2 border",children:"Rôle"}),e.jsx("th",{className:"px-4 py-2 border",children:"Agence"})]})}),e.jsxs("tbody",{children:[s.map(o=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border",children:o.nom}),e.jsx("td",{className:"px-4 py-2 border",children:o.email}),e.jsx("td",{className:"px-4 py-2 border",children:o.role}),e.jsx("td",{className:"px-4 py-2 border",children:o.agencyId})]},o.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucun personnel enregistré."})})]})]})})]})},ee=()=>{const{user:s}=w(),[a,n]=d.useState(""),[i,x]=d.useState(""),[m,l]=d.useState(""),c=async()=>{if(a!==i){l("Les mots de passe ne correspondent pas.");return}try{F.currentUser&&(await Y(F.currentUser,a),l("Mot de passe mis à jour avec succès !"))}catch{l("Erreur lors de la mise à jour du mot de passe.")}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sécurité"}),e.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:a,onChange:t=>n(t.target.value),className:"block mb-2 border px-2 py-1"}),e.jsx("input",{type:"password",placeholder:"Confirmer le mot de passe",value:i,onChange:t=>x(t.target.value),className:"block mb-2 border px-2 py-1"}),e.jsx("button",{onClick:c,className:"bg-orange-600 text-white px-4 py-1 rounded",children:"Modifier le mot de passe"}),m&&e.jsx("p",{className:"mt-2 text-green-600",children:m})]})},se=()=>{var l;const{user:s}=w(),[a,n]=d.useState({socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0}}),[i,x]=d.useState({text:"",type:""});d.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const t=f(b,"companies",s.companyId),p=await M(t);if(p.exists()){const g=p.data();n(h=>({...h,socialMedia:g.socialMedia||h.socialMedia,footerConfig:g.footerConfig||h.footerConfig}))}})()},[s]);const m=async()=>{if(s!=null&&s.companyId){x({text:"Enregistrement...",type:"info"});try{const c=f(b,"companies",s.companyId);await R(c,{socialMedia:a.socialMedia,footerConfig:a.footerConfig}),x({text:"Modifications enregistrées",type:"success"})}catch(c){console.error(c),x({text:"Erreur lors de l'enregistrement",type:"error"})}}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Réseaux sociaux & affichage"}),e.jsx(D,{children:i.text&&e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${i.type==="success"?"bg-green-100 text-green-800":i.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:i.text}),i.type==="success"&&e.jsx("button",{onClick:()=>x({text:"",type:""}),className:"text-sm underline",children:"OK"})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Liens des réseaux sociaux"}),e.jsx("div",{className:"space-y-3",children:["facebook","instagram","whatsapp","tiktok","linkedin","youtube"].map(c=>{var t;return e.jsx("input",{type:"url",placeholder:`Lien ${c}`,value:((t=a.socialMedia)==null?void 0:t[c])||"",onChange:p=>{const g=p.target.value;n(h=>({...h,socialMedia:{...h.socialMedia,[c]:g}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md"},c)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Affichage dans le pied de page"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:((l=a.footerConfig)==null?void 0:l.showSocialMedia)??!0,onChange:c=>n(t=>({...t,footerConfig:{...t.footerConfig,showSocialMedia:c.target.checked}})),className:"mr-2"})," Afficher les icônes de réseaux sociaux"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:m,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e.jsx(P,{size:18})," Enregistrer"]})})]})]})},ae=()=>{const{user:s}=w(),[a,n]=d.useState(""),[i,x]=d.useState(""),[m,l]=d.useState({text:"",type:"info"});d.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const p=f(b,"companies",s.companyId),g=await M(p);if(g.exists()){const h=g.data();n(h.politiqueConfidentialite||""),x(h.conditionsUtilisation||"")}})()},[s]);const c=async()=>{if(s!=null&&s.companyId){l({text:"Enregistrement en cours...",type:"info"});try{const t=f(b,"companies",s.companyId);await R(t,{politiqueConfidentialite:a,conditionsUtilisation:i}),l({text:"Mentions mises à jour avec succès.",type:"success"})}catch(t){console.error(t),l({text:"Erreur lors de l'enregistrement.",type:"error"})}}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Mentions légales & politique de confidentialité"}),e.jsx(D,{children:m.text&&e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${m.type==="success"?"bg-green-100 text-green-800":m.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m.type==="success"?e.jsx(E,{}):m.type==="error"?e.jsx(q,{}):e.jsx(P,{}),e.jsx("span",{children:m.text})]}),m.type==="success"&&e.jsx("button",{onClick:()=>l({text:"",type:"info"}),className:"text-sm underline",children:"OK"})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Politique de confidentialité"}),e.jsx("textarea",{rows:6,value:a,onChange:t=>n(t.target.value),className:"w-full border border-gray-300 rounded p-3",placeholder:"Expliquer comment les données clients sont collectées et utilisées."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Conditions d'utilisation"}),e.jsx("textarea",{rows:6,value:i,onChange:t=>x(t.target.value),className:"w-full border border-gray-300 rounded p-3",placeholder:"Lister les règles d'utilisation de la plateforme par les clients."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:c,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e.jsx(P,{size:18})," Enregistrer"]})})]})]})},ce=()=>{const[s,a]=d.useState("vitrine"),{user:n}=w(),[i,x]=d.useState(null);d.useEffect(()=>{(async()=>{if(!(n!=null&&n.companyId))return;const c=f(b,"companies",n.companyId),t=await M(c);t.exists()&&x({id:t.id,...t.data()})})()},[n==null?void 0:n.companyId]);const{colors:m}=Z(i);return e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",style:{color:m.primary},children:"Paramètres de la compagnie"}),e.jsx("div",{className:"flex gap-4 mb-4",children:[{key:"vitrine",label:"Vitrine publique"},{key:"personnel",label:"Personnel"},{key:"securite",label:"Sécurité"},{key:"reseaux",label:"Réseaux sociaux"},{key:"legaux",label:"Mentions & politique"}].map(l=>e.jsx("button",{onClick:()=>a(l.key),className:"px-4 py-2 rounded transition-all",style:{backgroundColor:s===l.key?m.primary:"#e5e7eb",color:s===l.key?m.text:"#1f2937"},children:l.label},l.key))}),s==="vitrine"&&e.jsx(Q,{}),s==="personnel"&&e.jsx(X,{}),s==="securite"&&e.jsx(ee,{}),s==="reseaux"&&e.jsx(se,{}),s==="legaux"&&e.jsx(ae,{})]})};export{ce as default};

import{r as n,j as e}from"./react-PtMwKKf1.js";import{q as j,w as c,k as f,l as N,T as w}from"./firebase-eGIzIftJ.js";import{u as y,d as v}from"../index-C4y8wfzK.js";import"./vendor-B5FTF_2c.js";const A=()=>{const{user:t}=y(),[a,o]=n.useState("jour"),[i,d]=n.useState(0),[l,m]=n.useState(0),u=()=>{const s=new Date;switch(a){case"semaine":s.setDate(s.getDate()-7);break;case"mois":s.setDate(s.getDate()-30);break;default:s.setHours(0,0,0,0)}return w.fromDate(s)},x=async()=>{if(!(t!=null&&t.companyId)||!(t!=null&&t.agencyId))return;const s=u(),p=j(f(v,"companies",t.companyId,"agences",t.agencyId,"reservations"),c("createdAt",">=",s),c("statut","==","payé")),r=await N(p),b=r.docs.reduce((g,h)=>g+(h.data().montant||0),0);d(b),m(r.size)};return n.useEffect(()=>{x()},[a,t]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"État financier de l’agence"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("button",{className:`px-4 py-2 rounded ${a==="jour"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>o("jour"),children:"Aujourd’hui"}),e.jsx("button",{className:`px-4 py-2 rounded ${a==="semaine"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>o("semaine"),children:"7 derniers jours"}),e.jsx("button",{className:`px-4 py-2 rounded ${a==="mois"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>o("mois"),children:"Ce mois-ci"})]}),e.jsxs("div",{className:"bg-white p-6 rounded shadow border",children:[e.jsxs("p",{className:"text-lg",children:["Revenu total : ",e.jsxs("span",{className:"font-bold text-green-700",children:[i.toLocaleString()," FCFA"]})]}),e.jsxs("p",{className:"text-lg",children:["Nombre de réservations : ",e.jsx("span",{className:"font-bold text-blue-700",children:l})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>window.print(),className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"Imprimer le résumé"})})]})};export{A as default};

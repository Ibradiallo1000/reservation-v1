import{b as N,u as C,r as t,j as a}from"./react-PtMwKKf1.js";import{f as S,d as x,u as E}from"./firebase-eGIzIftJ.js";import{d as f}from"../index-C4y8wfzK.js";import"./vendor-B5FTF_2c.js";const M=()=>{const{id:r}=N(),b=C(),[j,v]=t.useState(!0),[n,i]=t.useState(""),[u,c]=t.useState(""),[l,m]=t.useState(""),[d,p]=t.useState(""),[g,h]=t.useState("");t.useEffect(()=>{(async()=>{try{if(!r)return;const s=await S(x(f,"companies",r));if(s.exists()){const o=s.data();i(o.nom||""),c(o.email||""),m(o.telephone||""),p(o.pays||"")}}catch(s){console.error("Erreur chargement compagnie:",s)}finally{v(!1)}})()},[r]);const y=async e=>{if(e.preventDefault(),!!r)try{await E(x(f,"companies",r),{nom:n,email:u,telephone:l,pays:d}),h("✅ Compagnie mise à jour avec succès !"),setTimeout(()=>b("/compagnies"),1500)}catch(s){console.error("Erreur mise à jour:",s),h("❌ Erreur lors de la mise à jour")}};return j?a.jsx("p",{className:"p-6",children:"Chargement..."}):a.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[a.jsx("h1",{className:"text-xl font-bold mb-4",children:"Modifier la compagnie"}),g&&a.jsx("p",{className:"mb-4 text-blue-600",children:g}),a.jsxs("form",{onSubmit:y,className:"grid gap-4",children:[a.jsx("input",{value:n,onChange:e=>i(e.target.value),placeholder:"Nom de la compagnie",className:"border p-2 rounded",required:!0}),a.jsx("input",{value:u,type:"email",onChange:e=>c(e.target.value),placeholder:"Email",className:"border p-2 rounded",required:!0}),a.jsx("input",{value:l,onChange:e=>m(e.target.value),placeholder:"Téléphone",className:"border p-2 rounded",required:!0}),a.jsx("input",{value:d,onChange:e=>p(e.target.value),placeholder:"Pays",className:"border p-2 rounded",required:!0}),a.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Sauvegarder"})]})]})};export{M as default};

import{j as o}from"./react-PtMwKKf1.js";import{au as g}from"./vendor-B5FTF_2c.js";import{A as h,k as b}from"./firebase-eGIzIftJ.js";import{u as y,d as x}from"../index-C4y8wfzK.js";import{v as j}from"./v4-C6aID195.js";const I=({label:l,onUpload:t,dossier:c,className:m,collectionName:p="imagesBibliotheque"})=>{const{user:a}=y(),d=async u=>{var s;const r=(s=u.target.files)==null?void 0:s[0];if(!r)return;const e=new FormData;e.append("file",r),e.append("upload_preset","ml_default"),e.append("public_id",`${c}/${j()}`);try{const i=(await g.post("https://api.cloudinary.com/v1_1/dj697honl/image/upload",e)).data.secure_url,f=prompt("Nom de l'image (ex: logo, bannière, etc.)")||"image";await h(b(x,p),{companyId:(a==null?void 0:a.companyId)||null,url:i,type:"autre",nom:f,createdAt:new Date}),t&&t(i),alert("✅ Image ajoutée avec succès !")}catch(n){console.error("Erreur Cloudinary:",n),alert("❌ Upload échoué.")}};return o.jsxs("div",{className:`mb-4 ${m||""}`,children:[o.jsx("label",{className:"font-semibold block mb-1",children:l}),o.jsx("input",{type:"file",accept:"image/*",onChange:d})]})};export{I as U};

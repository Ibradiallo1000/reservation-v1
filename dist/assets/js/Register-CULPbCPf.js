import{u as f,r as c,j as n,a as h}from"./react-DgrrIcw2.js";import{y as g,z as v,t as w,d as b}from"./firebase-eGIzIftJ.js";import{a as C,d as x}from"../index-p6Te0bSg.js";import"./vendor-BHjJ2Hjk.js";const N=()=>{const l=f(),[i,u]=c.useState({name:"",email:"",password:"",confirm:"",role:"compagnie"}),[y,t]=c.useState(""),d=o=>{const{name:e,value:a}=o.target;u(r=>({...r,[e]:a}))};return n("form",{onSubmit:async o=>{o.preventDefault();const{name:e,email:a,password:r,confirm:m,role:p}=i;if(!e||!a||!r||!m)return t("Veuillez remplir tous les champs.");if(r!==m)return t("Les mots de passe ne correspondent pas.");try{const s=await g(C,a,r);await v(s.user,{displayName:e}),await w(b(x,"users",s.user.uid),{name:e,email:a,role:p,createdAt:new Date}),alert("Compte créé avec succès !"),l("/login")}catch(s){console.error(s),t(s.message)}},children:h("select",{name:"role",value:i.role,onChange:d,className:"w-full border rounded px-3 py-2 mb-3",children:[n("option",{value:"compagnie",children:"Compte Compagnie"}),n("option",{value:"admin",children:"Administrateur principal"})]})})};export{N as default};

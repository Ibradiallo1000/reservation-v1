import{u,r,j as e}from"./react-A-4nP3fl.js";import{f as p,q as j,w as f,e as v}from"./firebase-CbfwkGbo.js";import{u as N,d as g}from"../index-ChphXJpr.js";import{d as n}from"./dayjs.min-czAVqDXM.js";import"./vendor-CCJV4Wg0.js";const $=()=>{const{user:a}=N(),l=u(),[i,d]=r.useState([]),[h,o]=r.useState(!0);return r.useEffect(()=>{(async()=>{if(!a)return;o(!0);const t=p(g,"reservations"),x=j(t,f("clientId","==",a.uid)),m=(await v(x)).docs.map(c=>({id:c.id,...c.data()}));d(m),o(!1)})()},[a]),e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Mes Réservations"}),h?e.jsx("p",{children:"Chargement..."}):e.jsx("div",{className:"overflow-auto rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full bg-white text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Trajet"}),e.jsx("th",{className:"p-3",children:"Date & Heure"}),e.jsx("th",{className:"p-3",children:"Places"}),e.jsx("th",{className:"p-3",children:"Montant"}),e.jsx("th",{className:"p-3",children:"Statut"}),e.jsx("th",{className:"p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[i.map(s=>{var t;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3 font-semibold",children:[s.depart," → ",s.arrivee]}),e.jsxs("td",{className:"p-3 text-blue-700",children:[n(s.date).format("DD/MM/YYYY")," à ",s.heure]}),e.jsx("td",{className:"p-3",children:s.nombre_places}),e.jsxs("td",{className:"p-3",children:[(t=s.montant_total)==null?void 0:t.toLocaleString()," FCFA"]}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs ${s.statut==="payée"?"bg-green-600":s.statut==="en attente"?"bg-yellow-500":"bg-red-600"}
                    `,children:s.statut})}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsx("button",{onClick:()=>l(`/reservation/${s.id}`),className:"text-blue-600 hover:underline text-sm",children:"Voir"}),n().isBefore(n(`${s.date}T${s.heure}`))&&e.jsx("button",{onClick:()=>l(`/modifier-reservation/${s.id}`),className:"text-orange-600 hover:underline text-sm",children:"Modifier"})]})]},s.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"Aucune réservation trouvée"})})]})]})})]})};export{$ as default};

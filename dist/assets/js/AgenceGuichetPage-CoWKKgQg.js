import{u as be,r as l,j as e}from"./react-PtMwKKf1.js";import{k as A,l as B,d as V,f as Q,T as je,A as fe,u as ke,q as Ne,w as Ce}from"./firebase-eGIzIftJ.js";import{u as Le,b as Se,d as f}from"../index-C4y8wfzK.js";import"./vendor-B5FTF_2c.js";const Z=30,ee=8,re="compagnie-par-defaut",Pe=()=>{const{user:s,company:te}=Le(),q=be(),r=Se(te),[L,se]=l.useState(""),[S,ae]=l.useState(""),[oe,E]=l.useState(""),[N,le]=l.useState([]),[H,T]=l.useState([]),[ne,ie]=l.useState([]),[ce,de]=l.useState([]),[a,z]=l.useState(null),[v,me]=l.useState(""),[b,pe]=l.useState(""),[c,W]=l.useState(1),[w,R]=l.useState(0),[x,X]=l.useState("aller_simple"),[_,G]=l.useState(0),[k,O]=l.useState("espèces"),[U,Y]=l.useState(!1),xe=Array.from({length:ee},(t,o)=>{const n=new Date;return n.setDate(n.getDate()+o),n.toISOString().split("T")[0]}),D=l.useCallback((t,o)=>{const n=new Date,[d,m]=o.split(":").map(Number),h=new Date(t);return h.setHours(d,m,0,0),h.getTime()<n.getTime()},[]);l.useEffect(()=>{(async()=>{try{if(!(s!=null&&s.companyId)||!(s!=null&&s.agencyId))return;const o=A(f,`companies/${s.companyId}/agences/${s.agencyId}/weeklyTrips`),d=(await B(Ne(o,Ce("active","==",!0)))).docs.map(g=>g.data()),m=Array.from(new Set(d.map(g=>g.departure))),h=Array.from(new Set(d.map(g=>g.arrival)));ie(m),de(h)}catch(o){console.error("Erreur chargement des villes:",o)}})()},[s==null?void 0:s.companyId,s==null?void 0:s.agencyId]),l.useEffect(()=>{if(!a){G(0);return}const t=a.price;let o=c*t;x==="aller_retour"&&(o+=w*t),G(o)},[c,w,x,a]);const he=l.useCallback(async()=>{var t,o,n,d;if(!L||!S){alert("Veuillez sélectionner une ville de départ et une ville d'arrivée");return}if(!(s!=null&&s.companyId)||!(s!=null&&s.agencyId)){alert("Votre compte n'est pas correctement configuré");return}try{const m=L.trim().toLowerCase(),h=S.trim().toLowerCase(),g=A(f,`companies/${s.companyId}/agences/${s.agencyId}/weeklyTrips`),I=(await B(g)).docs.map(i=>({id:i.id,...i.data()})),C=[],$=new Date;for(let i=0;i<ee;i++){const y=new Date($);y.setDate($.getDate()+i);const u=y.toLocaleDateString("fr-FR",{weekday:"long"}).toLowerCase();for(const p of I)if(((t=p.departure)==null?void 0:t.toLowerCase())===m&&((o=p.arrival)==null?void 0:o.toLowerCase())===h&&p.active&&((d=(n=p.horaires)==null?void 0:n[u])==null?void 0:d.length)>0)for(const K of p.horaires[u])C.push({id:`${p.id}_${y.toISOString().split("T")[0]}_${K}`,date:y.toISOString().split("T")[0],time:K,departure:p.departure,arrival:p.arrival,price:p.price,places:p.places||Z})}const j=A(f,`companies/${s.companyId}/agences/${s.agencyId}/reservations`),ve=(await B(j)).docs.map(i=>i.data()),P=C.map(i=>{const y=ve.filter(u=>u.trajetId===i.id&&u.statut==="payé"&&u.statutEmbarquement!=="absent"&&u.statutEmbarquement!=="reporté").reduce((u,p)=>u+(p.seatsGo||1),0);return{...i,remainingSeats:(i.places||Z)-y}}).filter(i=>!D(i.date,i.time));le(P);const F=P.length>0?P[0].date:"";if(E(F),F){const i=P.filter(y=>y.date===F).sort((y,u)=>y.time.localeCompare(u.time));T(i)}else T([]);z(null)}catch(m){console.error("Erreur lors de la recherche :",m),alert("Une erreur est survenue lors de la recherche des trajets")}},[L,S,s==null?void 0:s.companyId,s==null?void 0:s.agencyId,D]),ue=l.useCallback(t=>{E(t);const o=N.filter(n=>n.date===t&&!D(n.date,n.time)).sort((n,d)=>n.time.localeCompare(d.time));T(o),z(null)},[N,D]),ge=l.useCallback(t=>{z(t),W(1),R(0)},[]),ye=l.useCallback(async()=>{if(!a||!v||!b||c<1){alert("Veuillez remplir tous les champs obligatoires");return}if(!(s!=null&&s.companyId)||!(s!=null&&s.agencyId)){alert("Votre compte n'est pas associé à une compagnie valide");return}const t=x==="aller_retour"?c+w:c;if(a.remainingSeats!==void 0&&t>a.remainingSeats){alert(`Désolé, il ne reste que ${a.remainingSeats} places disponibles.`);return}Y(!0);try{let o=re,n="Compagnie";const d=V(f,"companies",s.companyId),m=await Q(d);m.exists()&&(o=m.data().slug||re,n=m.data().nom||"Compagnie");let h="",g="";const J=V(f,`companies/${s.companyId}/agences/${s.agencyId}`),I=await Q(J);if(I.exists()){const M=I.data();h=M.nomAgence||M.nom||"",g=M.telephone||""}const C={trajetId:a.id,nomClient:v,telephone:b,seatsGo:c,seatsReturn:x==="aller_retour"?w:0,date:a.date,heure:a.time,depart:a.departure,arrivee:a.arrival,montant:_,statut:"payé",statutEmbarquement:"en_attente",checkInTime:null,reportInfo:null,compagnieId:s.companyId,compagnieNom:n,agencyId:s.agencyId,agencyNom:h,agencyTelephone:g,createdAt:je.now(),canal:"guichet",tripType:x,paiement:k,companySlug:o,qrCode:null},$=A(f,`companies/${s.companyId}/agences/${s.agencyId}/reservations`),j=await fe($,C);await ke(V(f,`companies/${s.companyId}/agences/${s.agencyId}/reservations`,j.id),{qrCode:j.id}),q(`/agence/receipt/${j.id}`,{state:{reservation:{...C,id:j.id,qrCode:j.id},companyInfo:{id:s.companyId,slug:o,nom:n,couleurPrimaire:r.primary,couleurSecondaire:r.secondary}}})}catch(o){console.error("Erreur création réservation:",o),alert("Erreur lors de la réservation")}finally{Y(!1)}},[a,v,b,s,c,w,x,_,k,q,r]),we=Array.from(new Set(N.map(t=>t.date)));return e.jsxs("div",{className:"p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("header",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl shadow-lg",style:{backgroundColor:r.primary},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",style:{color:r.textPrimary},children:"Guichet de vente"}),e.jsx("p",{className:"text-sm md:text-base",style:{color:r.textSecondary},children:"Recherchez et réservez des billets en quelques clics"})]})]})}),e.jsxs("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:r.primaryLight},children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:r.textPrimary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.secondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher un trajet"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"departure",className:"block text-sm font-medium mb-2",style:{color:r.textPrimary},children:"Départ"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.textSecondary},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("input",{id:"departure",list:"depList",value:L,onChange:t=>se(t.target.value),placeholder:"Ville de départ",className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",style:{borderColor:r.primaryLight,color:r.textPrimary,"--tw-ring-color":r.primary}}),e.jsx("datalist",{id:"depList",children:ne.map(t=>e.jsx("option",{value:t},`dep-${t}`))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"arrival",className:"block text-sm font-medium mb-2",style:{color:r.textPrimary},children:"Arrivée"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.textSecondary},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("input",{id:"arrival",list:"arrList",value:S,onChange:t=>ae(t.target.value),placeholder:"Ville d'arrivée",className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",style:{borderColor:r.primaryLight,color:r.textPrimary,"--tw-ring-color":r.primary}}),e.jsx("datalist",{id:"arrList",children:ce.map(t=>e.jsx("option",{value:t},`arr-${t}`))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:he,className:"w-full text-white font-medium px-4 py-2 md:py-3 rounded-xl shadow-md transition-all duration-200 flex items-center justify-center gap-2 hover:shadow-lg hover:opacity-90",style:{background:`linear-gradient(to right, ${r.primary}, ${r.secondary})`},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher"]})})]})]}),N.length>0&&e.jsxs("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:r.primaryLight},children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:r.textPrimary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.secondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Dates disponibles"]}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:xe.map(t=>{const o=we.includes(t),n=oe===t,d=new Date(t),m=d.toLocaleDateString("fr-FR",{weekday:"short"}),h=d.getDate();return e.jsxs("button",{onClick:()=>o&&ue(t),className:`flex flex-col items-center justify-center w-14 h-14 md:w-16 md:h-16 rounded-xl border-2 transition-all duration-200 ${n?"text-white shadow-md":o?"bg-white hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,style:n?{backgroundColor:r.primary,borderColor:r.primaryDark}:{borderColor:r.primaryLight,color:o?r.textPrimary:"inherit"},disabled:!o,children:[e.jsx("span",{className:"text-xs font-medium",children:m}),e.jsx("span",{className:"text-lg font-bold",children:h})]},t)})})]}),e.jsxs("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:r.primaryLight},children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:r.textPrimary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.secondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Horaires disponibles"]}),H.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.textSecondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-3",style:{color:r.textSecondary},children:N.length===0?"Aucun trajet trouvé. Veuillez effectuer une recherche.":"Aucun horaire disponible pour cette date."})]}):e.jsx("div",{className:"space-y-3",children:H.map(t=>e.jsx("div",{onClick:()=>ge(t),className:`p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer ${(a==null?void 0:a.id)===t.id?"border-indigo-500 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:shadow-sm"}`,style:(a==null?void 0:a.id)===t.id?{borderColor:r.primary,backgroundColor:r.primaryLight}:{borderColor:r.primaryLight},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg",style:{backgroundColor:r.primaryLight},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 sm:h-6 w-5 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.primary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",style:{color:r.textPrimary},children:[e.jsx("span",{className:"text-lg sm:text-xl",style:{color:r.primary},children:t.time})," — ",t.departure," → ",t.arrival]}),e.jsx("p",{className:"text-sm",style:{color:r.textSecondary},children:new Date(t.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg",style:{color:r.primary},children:[t.price.toLocaleString("fr-FR")," FCFA"]}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${(t.remainingSeats||0)>10?"bg-green-500":(t.remainingSeats||0)>5?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-xs",style:{color:r.textSecondary},children:[t.remainingSeats??"NC"," places"]})]})]})]})},t.id))})]})]}),e.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-xl border",style:{borderColor:r.primaryLight,position:"sticky",top:"1.5rem",alignSelf:"flex-start"},children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4",style:{background:`linear-gradient(to right, ${r.primary}, ${r.secondary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Détails de la réservation"}),a?e.jsxs("div",{className:"rounded-xl p-4 border-2 space-y-2",style:{backgroundColor:r.primaryLight,borderColor:r.primary},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",style:{color:r.primaryDark},children:[a.departure," → ",a.arrival]}),e.jsx("p",{className:"text-sm",style:{color:r.primary},children:new Date(a.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsx("div",{className:"bg-white rounded-lg px-2 py-1 shadow-sm",children:e.jsx("p",{className:"font-medium",style:{color:r.primary},children:a.time})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center pt-2 border-t",style:{borderColor:r.primary},children:[e.jsxs("p",{className:"text-sm",style:{color:r.primaryDark},children:[e.jsx("span",{className:"font-medium",children:"Prix unitaire:"})," ",a.price.toLocaleString("fr-FR")," FCFA"]}),a.remainingSeats!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${a.remainingSeats>10?"bg-green-500":a.remainingSeats>5?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-xs font-medium",style:{color:r.primaryDark},children:[a.remainingSeats," restantes"]})]})]}),e.jsxs("div",{className:"mt-2 text-sm font-medium",style:{color:r.textSecondary},children:["Statut d'embarquement prévu : ",e.jsx("span",{className:"text-yellow-600",children:"En attente"})]})]}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-xl border-2 border-dashed",style:{borderColor:r.primaryLight,color:r.textSecondary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),e.jsx("p",{className:"mt-2",children:"Sélectionnez un trajet pour continuer"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-xl inline-flex w-full mt-4",children:[e.jsx("button",{onClick:()=>X("aller_simple"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 text-sm md:text-base ${x==="aller_simple"?"bg-white shadow-sm border font-medium":"hover:bg-gray-100"}`,style:x==="aller_simple"?{borderColor:r.primary,color:r.primary,backgroundColor:"white"}:{color:r.textSecondary},children:"Aller simple"}),e.jsx("button",{onClick:()=>X("aller_retour"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 text-sm md:text-base ${x==="aller_retour"?"bg-white shadow-sm border font-medium":"hover:bg-gray-100"}`,style:x==="aller_retour"?{borderColor:r.primary,color:r.primary,backgroundColor:"white"}:{color:r.textSecondary},children:"Aller-retour"})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:r.textPrimary},children:"Nom complet du passager*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.textSecondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{type:"text",value:v,onChange:t=>me(t.target.value),className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",required:!0,placeholder:"Jean Dupont",style:{borderColor:r.primaryLight,color:r.textPrimary,"--tw-ring-color":r.primary}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:r.textPrimary},children:"Numéro de téléphone*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:r.textSecondary},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("input",{type:"tel",value:b,onChange:t=>pe(t.target.value),className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",required:!0,placeholder:"+225 XX XX XX XX",style:{borderColor:r.primaryLight,color:r.textPrimary,"--tw-ring-color":r.primary}})]})]})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:r.textPrimary},children:"Nombre de places (Aller)*"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>W(t=>Math.max(1,t-1)),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:r.textPrimary},disabled:!a||c<=1,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"flex-1 text-center py-2 font-bold rounded-lg",style:{backgroundColor:r.primaryLight,color:r.primaryDark},children:c}),e.jsx("button",{onClick:()=>W(t=>t+1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:r.textPrimary},disabled:!a||a.remainingSeats!==void 0&&c>=a.remainingSeats,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),x==="aller_retour"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:r.textPrimary},children:"Nombre de places (Retour)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>R(t=>Math.max(0,t-1)),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:r.textPrimary},disabled:!a||w<=0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"flex-1 text-center py-2 font-bold rounded-lg",style:{backgroundColor:r.primaryLight,color:r.primaryDark},children:w}),e.jsx("button",{onClick:()=>R(t=>t+1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:r.textPrimary},disabled:!a||a.remainingSeats!==void 0&&c+w>=a.remainingSeats,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t mt-4 space-y-4",style:{borderColor:r.primaryLight},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:r.textPrimary},children:"Mode de paiement"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>O("espèces"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 text-sm md:text-base ${k==="espèces"?"font-medium":""}`,style:k==="espèces"?{borderColor:r.primary,backgroundColor:r.primaryLight,color:r.primaryDark}:{borderColor:r.primaryLight,color:r.textSecondary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Espèces"]}),e.jsxs("button",{onClick:()=>O("mobile_money"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 text-sm md:text-base ${k==="mobile_money"?"font-medium":""}`,style:k==="mobile_money"?{borderColor:r.primary,backgroundColor:r.primaryLight,color:r.primaryDark}:{borderColor:r.primaryLight,color:r.textSecondary},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Mobile Money"]})]})]}),e.jsx("div",{className:"p-4 rounded-xl",style:{background:`linear-gradient(to right, ${r.primaryLight}, ${r.secondary}20)`},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:r.textPrimary},children:"Total à payer"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold",style:{color:r.primaryDark},children:[_.toLocaleString("fr-FR")," FCFA"]})]})})]}),e.jsx("button",{onClick:ye,disabled:!a||!v||!b||c<1||U,className:`w-full py-3 md:py-4 px-6 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg mt-6 ${!a||!v||!b||c<1?"bg-gray-300 text-gray-500 cursor-not-allowed":"text-white transform hover:-translate-y-1 hover:shadow-xl"}`,style:!a||!v||!b||c<1?{}:{background:`linear-gradient(to right, ${r.primary}, ${r.secondary})`},children:U?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Traitement en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Valider la réservation"]})})]}),e.jsx("div",{className:"lg:col-span-3 h-2 mt-6 rounded-full",style:{background:`linear-gradient(to right, ${r.primary}, ${r.secondary})`}})]})};export{Pe as default};

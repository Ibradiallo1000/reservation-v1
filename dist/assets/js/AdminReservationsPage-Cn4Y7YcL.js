import{r as m,a as s,j as t}from"./vendor-Bq-8_m9i.js";import{u as b,t as h}from"./firebase-CURBI7X6.js";import{O as u,d as x}from"./agence-Bsj2lp2X.js";import{A as y}from"./icons-C0JHUK9Z.js";import"./compagnie-DiuZFnHS.js";import"./router-DoGdw-3y.js";import"./courier-CoQgRaHG.js";const R=()=>{const[n,p]=m.useState([]);return m.useEffect(()=>{(async()=>{const l=(await b(h(x,"reservations"))).docs.map(r=>{var d,i;const e=r.data();return{companySlug:((d=e.trip)==null?void 0:d.company)||"—",date:((i=e.trip)==null?void 0:i.date)||"",status:e.status||"payée",total:e.total||0}}),a={};l.forEach(r=>{const e=r.companySlug;a[e]||(a[e]={company:e,totalReservations:0,totalAmount:0,byStatus:{}}),a[e].totalReservations++,a[e].totalAmount+=r.total,a[e].byStatus[r.status]=(a[e].byStatus[r.status]||0)+1}),p(Object.values(a))})()},[]),s("div",{className:"p-6",children:[s("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[t(y,{className:"h-6 w-6 text-amber-600 shrink-0 mt-0.5"}),s("div",{children:[t("p",{className:"font-semibold text-amber-800",children:"Page dépréciée"}),t("p",{className:"text-sm text-amber-700 mt-1",children:"Cette page affiche des détails par compagnie. Teliya ne gère pas les opérations transport. Les indicateurs macro sont disponibles sur le tableau de bord admin."})]})]}),t("h1",{className:"text-2xl font-bold mb-4",children:"Statistiques des Réservations"}),t("div",{className:"overflow-x-auto",children:s("table",{className:"min-w-full table-auto border",children:[t("thead",{className:"bg-gray-100",children:s("tr",{children:[t("th",{className:"border px-4 py-2",children:"Compagnie"}),t("th",{className:"border px-4 py-2",children:"Nombre total"}),t("th",{className:"border px-4 py-2",children:"Montant total"}),t("th",{className:"border px-4 py-2",children:"Statuts"})]})}),s("tbody",{children:[n.map((o,c)=>s("tr",{children:[t("td",{className:"border px-4 py-2 font-semibold",children:o.company}),t("td",{className:"border px-4 py-2 text-center",children:o.totalReservations}),t("td",{className:"border px-4 py-2",children:u(o.totalAmount)}),t("td",{className:"border px-4 py-2",children:Object.entries(o.byStatus).map(([l,a])=>s("p",{children:[l," : ",a]},l))})]},c)),n.length===0&&t("tr",{children:t("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucune donnée disponible."})})]})]})})]})};export{R as default};

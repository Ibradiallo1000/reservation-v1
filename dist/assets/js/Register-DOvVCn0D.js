import{u as h,r as c,j as t}from"./react-BKlva80Y.js";import{t as g,v as x,x as v,d as w}from"./firebase-1zyXmG6H.js";import{a as j,d as C}from"../index-B9wHCq4m.js";import"./vendor-CZDa83Cj.js";const D=()=>{const l=h(),[i,u]=c.useState({name:"",email:"",password:"",confirm:"",role:"compagnie"}),[b,o]=c.useState(""),p=n=>{const{name:e,value:r}=n.target;u(a=>({...a,[e]:r}))},d=async n=>{n.preventDefault();const{name:e,email:r,password:a,confirm:m,role:f}=i;if(!e||!r||!a||!m)return o("Veuillez remplir tous les champs.");if(a!==m)return o("Les mots de passe ne correspondent pas.");try{const s=await g(j,r,a);await x(s.user,{displayName:e}),await v(w(C,"users",s.user.uid),{name:e,email:r,role:f,createdAt:new Date}),alert("Compte créé avec succès !"),l("/login")}catch(s){console.error(s),o(s.message)}};return t.jsx("form",{onSubmit:d,children:t.jsxs("select",{name:"role",value:i.role,onChange:p,className:"w-full border rounded px-3 py-2 mb-3",children:[t.jsx("option",{value:"compagnie",children:"Compte Compagnie"}),t.jsx("option",{value:"admin",children:"Administrateur principal"})]})})};export{D as default};

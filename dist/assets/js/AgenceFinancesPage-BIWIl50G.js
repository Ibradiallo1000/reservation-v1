import{r as n,j as e}from"./react-Bg_vEni-.js";import{q as j,w as c,f,h as N,T as w}from"./firebase-C3aZpI0W.js";import{u as y,d as v}from"../index-Dgt8Lr4V.js";import"./vendor-D_4iK-Jm.js";const S=()=>{const{user:t}=y(),[a,r]=n.useState("jour"),[i,d]=n.useState(0),[l,m]=n.useState(0),u=()=>{const s=new Date;switch(a){case"semaine":s.setDate(s.getDate()-7);break;case"mois":s.setDate(s.getDate()-30);break;default:s.setHours(0,0,0,0)}return w.fromDate(s)},x=async()=>{if(!(t!=null&&t.agencyId))return;const s=u(),b=j(f(v,"reservations"),c("agencyId","==",t.agencyId),c("createdAt",">=",s)),o=await N(b),p=o.docs.reduce((g,h)=>g+(h.data().prixTotal||0),0);d(p),m(o.size)};return n.useEffect(()=>{x()},[a,t]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"État financier de l’agence"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("button",{className:`px-4 py-2 rounded ${a==="jour"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("jour"),children:"Aujourd’hui"}),e.jsx("button",{className:`px-4 py-2 rounded ${a==="semaine"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("semaine"),children:"7 derniers jours"}),e.jsx("button",{className:`px-4 py-2 rounded ${a==="mois"?"bg-blue-600 text-white":"bg-gray-200"}`,onClick:()=>r("mois"),children:"Ce mois-ci"})]}),e.jsxs("div",{className:"bg-white p-6 rounded shadow border",children:[e.jsxs("p",{className:"text-lg",children:["Revenu total : ",e.jsxs("span",{className:"font-bold text-green-700",children:[i," FCFA"]})]}),e.jsxs("p",{className:"text-lg",children:["Nombre de réservations : ",e.jsx("span",{className:"font-bold text-blue-700",children:l})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>window.print(),className:"bg-indigo-600 text-white px-4 py-2 rounded",children:"Imprimer le résumé"})})]})};export{S as default};

import{r as u,j as e,a as r,A as R,m as w,Z as _}from"./vendor-Bq-8_m9i.js";import{B as F,d as z}from"./agence-Bsj2lp2X.js";import{q as E,o as $,v as q}from"./firebase-CURBI7X6.js";import{I as D}from"./compagnie-DiuZFnHS.js";import{_ as G,Z as Y,I as Z,ar as H,aF as O,o as Q,i as V,b3 as C,b2 as X,b4 as J,b5 as K,b6 as W,b9 as ee,O as L,a$ as p,aR as S,aQ as ae,am as le,aC as re}from"./icons-C0JHUK9Z.js";import"./router-DoGdw-3y.js";import"./courier-CoQgRaHG.js";const P=$(z,"platform","settings"),me=()=>{var N,f,k,y;const[t,i]=u.useState({accroche:"Voyagez avec Teliya",instructionRecherche:"Remplissez les champs ci-dessous pour trouver un trajet",logoUrl:"",faviconUrl:"",banniereUrl:"",imagesSlider:[],couleurPrimaire:"#ea580c",couleurSecondaire:"#16a34a",themeStyle:"moderne",platformName:"Teliya",slogan:"Réserver simplement, voyager sereinement.",country:"Mali",about:"Plateforme développée au Mali. Nous simplifions la réservation des billets interurbains avec des compagnies partenaires vérifiées, des paiements fiables et un suivi clair.",contact:{},social:{},legalLinks:[{label:"Mentions légales",url:"/mentions-legales"},{label:"Politique de confidentialité",url:"/confidentialite"},{label:"Conditions d’utilisation",url:"/conditions"},{label:"Politique cookies",url:"/cookies"}],extraLinks:[{label:"À propos",url:"/a-propos"},{label:"Aide",url:"/aide"},{label:"Partenaires",url:"/partenaires"}],worldMapBg:!0}),[g,b]=u.useState({text:"",type:""}),[n,o]=u.useState(null),[I,j]=u.useState(null);u.useEffect(()=>{(async()=>{const a=await E(P);if(a.exists()){const l=a.data();i(s=>({...s,...l,contact:{...s.contact,...l.contact||{}},social:{...s.social,...l.social||{}},legalLinks:l.legalLinks??s.legalLinks,extraLinks:l.extraLinks??s.extraLinks,worldMapBg:typeof l.worldMapBg=="boolean"?l.worldMapBg:s.worldMapBg}))}})()},[]);const M=async()=>{try{await q(P,t,{merge:!0}),b({text:"Paramètres enregistrés avec succès ✅",type:"success"})}catch(a){console.error(a),b({text:"Échec de l'enregistrement ❌",type:"error"})}},A=a=>{n&&(n==="logo"&&i(l=>({...l,logoUrl:a})),n==="favicon"&&i(l=>({...l,faviconUrl:a})),n==="banniere"&&i(l=>({...l,banniereUrl:a})),n==="slider"&&i(l=>({...l,imagesSlider:[...l.imagesSlider,a]})),o(null))},U=a=>i(l=>({...l,imagesSlider:l.imagesSlider.filter((s,c)=>c!==a)})),h=(a,l)=>i(s=>({...s,contact:{...s.contact||{},[a]:l}})),T=(a,l)=>i(s=>({...s,social:{...s.social||{},[a]:l}})),x=a=>i(l=>({...l,[a]:[...l[a]||[],{label:"",url:"",external:!1}]})),d=(a,l,s)=>i(c=>{const m=[...c[a]||[]];return m[l]={...m[l],...s},{...c,[a]:m}}),v=(a,l)=>i(s=>{const c=[...s[a]||[]];return c.splice(l,1),{...s,[a]:c}});return e("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:r(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[e("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Paramètres de la plateforme"}),e(R,{children:g.text&&r(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-lg shadow mb-4 ${g.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[g.type==="success"?e(G,{className:"inline mr-2"}):e(Y,{className:"inline mr-2"}),g.text]})}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(Z,{})," Identité & contenu du footer"]}),r("div",{className:"grid md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm mb-1",children:"Nom de la plateforme"}),e("input",{className:"w-full px-4 py-2 border rounded-lg",value:t.platformName||"",onChange:a=>i(l=>({...l,platformName:a.target.value})),placeholder:"Teliya"})]}),r("div",{children:[e("label",{className:"block text-sm mb-1",children:"Pays"}),r("div",{className:"relative",children:[e("input",{className:"w-full px-4 py-2 border rounded-lg pr-9",value:t.country||"",onChange:a=>i(l=>({...l,country:a.target.value})),placeholder:"Mali"}),e(H,{className:"h-4 w-4 absolute right-3 top-3.5 text-gray-400"})]})]}),r("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm mb-1",children:"Slogan"}),e("input",{className:"w-full px-4 py-2 border rounded-lg",value:t.slogan||"",onChange:a=>i(l=>({...l,slogan:a.target.value})),placeholder:"Réserver simplement, voyager sereinement."})]}),r("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm mb-1",children:"À propos (footer)"}),e("textarea",{className:"w-full px-4 py-2 border rounded-lg",rows:3,value:t.about||"",onChange:a=>i(l=>({...l,about:a.target.value})),placeholder:"Texte court de présentation affiché dans le pied de page…"})]})]})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e("h3",{className:"text-lg font-semibold mb-4",children:"Textes principaux"}),e("input",{className:"w-full mb-3 px-4 py-2 border rounded-lg",value:t.accroche,onChange:a=>i(l=>({...l,accroche:a.target.value}))}),e("input",{className:"w-full px-4 py-2 border rounded-lg",value:t.instructionRecherche,onChange:a=>i(l=>({...l,instructionRecherche:a.target.value}))})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(O,{})," Contact (footer)"]}),r("div",{className:"grid md:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm mb-1",children:"Téléphone"}),e("input",{className:"w-full px-4 py-2 border rounded-lg",value:((N=t.contact)==null?void 0:N.phone)||"",onChange:a=>h("phone",a.target.value),placeholder:"+223 70 00 00 00"})]}),r("div",{children:[e("label",{className:"block text-sm mb-1",children:"E-mail"}),e("input",{className:"w-full px-4 py-2 border rounded-lg",value:((f=t.contact)==null?void 0:f.email)||"",onChange:a=>h("email",a.target.value),placeholder:"contact@teliya.africa"})]}),r("div",{children:[e("label",{className:"block text-sm mb-1",children:"Adresse"}),r("div",{className:"relative",children:[e("input",{className:"w-full px-4 py-2 border rounded-lg pr-9",value:((k=t.contact)==null?void 0:k.address)||"",onChange:a=>h("address",a.target.value),placeholder:"Bamako, Mali"}),e(Q,{className:"h-4 w-4 absolute right-3 top-3.5 text-gray-400"})]})]}),r("div",{children:[e("label",{className:"block text-sm mb-1",children:"Horaires"}),r("div",{className:"relative",children:[e("input",{className:"w-full px-4 py-2 border rounded-lg pr-9",value:((y=t.contact)==null?void 0:y.hours)||"",onChange:a=>h("hours",a.target.value),placeholder:"Lun–Sam : 8h–19h"}),e(V,{className:"h-4 w-4 absolute right-3 top-3.5 text-gray-400"})]})]})]})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(C,{})," Réseaux sociaux (footer)"]}),e("div",{className:"grid md:grid-cols-2 gap-4",children:[{k:"facebook",label:"Facebook",Icon:X,ph:"https://facebook.com/…"},{k:"instagram",label:"Instagram",Icon:C,ph:"https://instagram.com/…"},{k:"twitter",label:"Twitter / X",Icon:J,ph:"https://twitter.com/…"},{k:"linkedin",label:"LinkedIn",Icon:K,ph:"https://linkedin.com/company/…"},{k:"youtube",label:"YouTube",Icon:W,ph:"https://youtube.com/@…"}].map(({k:a,label:l,Icon:s,ph:c})=>{var m;return r("div",{children:[e("label",{className:"block text-sm mb-1",children:l}),r("div",{className:"relative",children:[e("input",{className:"w-full px-4 py-2 border rounded-lg pl-10",value:((m=t.social)==null?void 0:m[a])||"",onChange:B=>T(a,B.target.value),placeholder:c}),e(s,{className:"h-4 w-4 absolute left-3 top-3.5 text-gray-400"})]})]},a)})})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(ee,{})," Liens du footer (légaux & utiles)"]}),r("div",{className:"mb-6",children:[r("div",{className:"flex items-center justify-between mb-2",children:[e("h4",{className:"font-semibold",children:"Liens légaux"}),r("button",{onClick:()=>x("legalLinks"),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded border hover:bg-gray-50",children:[e(L,{className:"h-4 w-4"})," Ajouter"]})]}),e("div",{className:"space-y-2",children:(t.legalLinks||[]).map((a,l)=>r("div",{className:"grid md:grid-cols-[1fr_1fr_auto_auto] grid-cols-1 gap-2 items-center",children:[e("input",{className:"px-3 py-2 border rounded-lg",placeholder:"Libellé (ex: Mentions légales)",value:a.label,onChange:s=>d("legalLinks",l,{label:s.target.value})}),e("input",{className:"px-3 py-2 border rounded-lg",placeholder:"/mentions-legales ou https://…",value:a.url,onChange:s=>d("legalLinks",l,{url:s.target.value})}),r("label",{className:"inline-flex items-center gap-2 text-sm",children:[e("input",{type:"checkbox",checked:!!a.external,onChange:s=>d("legalLinks",l,{external:s.target.checked})}),"externe"]}),e("button",{onClick:()=>v("legalLinks",l),className:"p-2 rounded border hover:bg-red-50 text-red-600",title:"Supprimer",children:e(p,{className:"h-4 w-4"})})]},`legal-${l}`))})]}),r("div",{children:[r("div",{className:"flex items-center justify-between mb-2",children:[e("h4",{className:"font-semibold",children:"Liens utiles"}),r("button",{onClick:()=>x("extraLinks"),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded border hover:bg-gray-50",children:[e(L,{className:"h-4 w-4"})," Ajouter"]})]}),e("div",{className:"space-y-2",children:(t.extraLinks||[]).map((a,l)=>r("div",{className:"grid md:grid-cols-[1fr_1fr_auto_auto] grid-cols-1 gap-2 items-center",children:[e("input",{className:"px-3 py-2 border rounded-lg",placeholder:"Libellé (ex: À propos)",value:a.label,onChange:s=>d("extraLinks",l,{label:s.target.value})}),e("input",{className:"px-3 py-2 border rounded-lg",placeholder:"/a-propos ou https://…",value:a.url,onChange:s=>d("extraLinks",l,{url:s.target.value})}),r("label",{className:"inline-flex items-center gap-2 text-sm",children:[e("input",{type:"checkbox",checked:!!a.external,onChange:s=>d("extraLinks",l,{external:s.target.checked})}),"externe"]}),e("button",{onClick:()=>v("extraLinks",l),className:"p-2 rounded border hover:bg-red-50 text-red-600",title:"Supprimer",children:e(p,{className:"h-4 w-4"})})]},`extra-${l}`))})]})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(S,{})," Arrière-plan du footer"]}),r("label",{className:"inline-flex items-center gap-2",children:[e("input",{type:"checkbox",checked:t.worldMapBg!==!1,onChange:a=>i(l=>({...l,worldMapBg:a.target.checked}))}),"Afficher le motif de carte du monde en fond"]})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(ae,{})," Couleurs"]}),e("div",{className:"flex gap-6",children:[{key:"couleurPrimaire",name:"Primaire",pick:"primary"},{key:"couleurSecondaire",name:"Secondaire",pick:"secondary"}].map(a=>r("div",{children:[e("label",{className:"block text-sm mb-2",children:a.name}),e("div",{className:"h-12 w-12 rounded-full border cursor-pointer",style:{backgroundColor:t[a.key]},onClick:()=>j(a.pick),title:"Changer la couleur"}),I===a.pick&&e("div",{className:"mt-2",children:e(_,{color:t[a.key],onChange:l=>i(s=>({...s,[a.key]:l}))})})]},a.key))})]}),r("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(S,{})," Images"]}),r("div",{className:"mb-4",children:[e("label",{className:"block text-sm mb-2",children:"Logo"}),t.logoUrl?r("div",{className:"flex items-center gap-4",children:[e("img",{src:t.logoUrl,className:"h-16 w-16 object-contain"}),e("button",{onClick:()=>o("logo"),className:"bg-gray-100 px-3 py-1 rounded",children:"Changer"})]}):e("button",{onClick:()=>o("logo"),className:"px-4 py-2 border rounded-lg",children:"Ajouter un logo"})]}),r("div",{className:"mb-4",children:[e("label",{className:"block text-sm mb-2",children:"Favicon"}),t.faviconUrl?r("div",{className:"flex items-center gap-4",children:[e("img",{src:t.faviconUrl,className:"h-10 w-10 object-contain"}),e("button",{onClick:()=>o("favicon"),className:"bg-gray-100 px-3 py-1 rounded",children:"Changer"})]}):e("button",{onClick:()=>o("favicon"),className:"px-4 py-2 border rounded-lg",children:"Ajouter un favicon"})]}),r("div",{className:"mb-4",children:[e("label",{className:"block text-sm mb-2",children:"Bannière"}),t.banniereUrl?r("div",{children:[e("img",{src:t.banniereUrl,className:"h-32 w-full object-cover rounded-lg"}),e("button",{onClick:()=>o("banniere"),className:"mt-2 bg-gray-100 px-3 py-1 rounded",children:"Changer"})]}):e("button",{onClick:()=>o("banniere"),className:"px-4 py-2 border rounded-lg",children:"Ajouter une bannière"})]}),r("div",{children:[r("label",{className:"block text-sm mb-2",children:["Images du slider (",t.imagesSlider.length,")"]}),e("div",{className:"grid grid-cols-3 gap-3",children:t.imagesSlider.map((a,l)=>r("div",{className:"relative group",children:[e("img",{src:a,className:"h-24 w-full object-cover rounded-lg"}),e("button",{onClick:()=>U(l),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:e(p,{size:14})})]},l))}),r("button",{onClick:()=>o("slider"),className:"mt-2 text-blue-600 flex items-center gap-2",children:[e(le,{size:16})," Ajouter des images"]})]})]}),r(F,{variant:"primary",onClick:M,children:[e(re,{size:20})," Sauvegarder"]}),n&&e(D,{title:n==="logo"?"Choisir un logo":n==="favicon"?"Choisir un favicon":n==="banniere"?"Choisir une bannière":"Choisir des images pour le slider",source:"platform",onSelect:A,onClose:()=>o(null)})]})})};export{me as default};

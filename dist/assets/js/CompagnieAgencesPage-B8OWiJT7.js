import{b as we,r as d,a,j as e,aA as ke,aB as Ce,aC as Ae,F as Le,aD as Se,aE as se}from"./react-DB_4kGOy.js";import{V as z,x as De,z as je,o as ee,C as te}from"./firebase-lLzYRzUk.js";import{u as Me,b as Ge,c as $e,d as H,f as V}from"../index-Bkmir__O.js";import"./vendor-C-DAJou6.js";delete se.Icon.Default.prototype._getIconUrl;se.Icon.Default.mergeOptions({iconRetinaUrl:"/leaflet/marker-icon-2x.png",iconUrl:"/leaflet/marker-icon.png",shadowUrl:"/leaflet/marker-shadow.png"});const ae=i=>i.replace(/\s+/g," ").trim().toLowerCase().replace(new RegExp("\\b\\p{L}","gu"),C=>C.toUpperCase()),ne=i=>i.replace(/\D/g,""),re=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),le=i=>i.length>=8&&i.length<=15,Ee=({open:i,onClose:C,onConfirm:x,agences:$,agencyIdToDelete:E,loading:N})=>{const[s,g]=d.useState("detach"),[p,f]=d.useState("");if(d.useEffect(()=>{i&&(g("detach"),f(""))},[i]),!i)return null;const w=$.filter(c=>c.id&&c.id!==E),S=s!=="transfer"||s==="transfer"&&p&&p.length>0;return e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:a("div",{className:"w-full max-w-lg rounded-xl bg-white shadow-lg",children:[a("div",{className:"px-5 py-4 border-b",children:[e("h3",{className:"text-lg font-semibold",children:"Supprimer l’agence"}),e("p",{className:"text-sm text-gray-500",children:"Choisissez quoi faire avec le personnel rattaché à cette agence."})]}),a("div",{className:"px-5 py-4 space-y-4",children:[a("label",{className:"flex items-start space-x-3",children:[e("input",{type:"radio",name:"staffAction",className:"mt-1",checked:s==="detach",onChange:()=>g("detach")}),a("div",{children:[e("div",{className:"font-medium",children:"Détacher le personnel"}),e("div",{className:"text-sm text-gray-500",children:"Les comptes restent actifs mais ne seront rattachés à aucune agence (agencyId = null)."})]})]}),a("label",{className:"flex items-start space-x-3",children:[e("input",{type:"radio",name:"staffAction",className:"mt-1",checked:s==="transfer",onChange:()=>g("transfer")}),a("div",{className:"w-full",children:[e("div",{className:"font-medium",children:"Transférer vers une autre agence"}),e("div",{className:"text-sm text-gray-500 mb-2",children:"Déplace tous les membres vers l’agence sélectionnée."}),a("select",{className:"w-full border rounded px-3 py-2",disabled:s!=="transfer",value:p,onChange:c=>f(c.target.value),children:[e("option",{value:"",children:"— Sélectionner l’agence cible —"}),w.map(c=>a("option",{value:c.id,children:[c.nomAgence," • ",c.ville,", ",c.pays]},c.id))]})]})]}),a("label",{className:"flex items-start space-x-3",children:[e("input",{type:"radio",name:"staffAction",className:"mt-1",checked:s==="disable",onChange:()=>g("disable")}),a("div",{children:[e("div",{className:"font-medium",children:"Désactiver les comptes"}),e("div",{className:"text-sm text-gray-500",children:"Les comptes seront désactivés (Auth.disabled = true) et détachés."})]})]}),a("label",{className:"flex items-start space-x-3",children:[e("input",{type:"radio",name:"staffAction",className:"mt-1",checked:s==="delete",onChange:()=>g("delete")}),a("div",{children:[e("div",{className:"font-medium text-red-700",children:"Supprimer les comptes (dangereux)"}),e("div",{className:"text-sm text-red-600",children:"Efface définitivement les utilisateurs (Auth + Firestore). À n’utiliser qu’en dernier recours."})]})]})]}),a("div",{className:"px-5 py-4 border-t flex justify-end space-x-2",children:[e("button",{onClick:C,className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50",disabled:N,children:"Annuler"}),e("button",{onClick:()=>x(s,s==="transfer"&&p||null),disabled:!S||N,className:`px-4 py-2 rounded-md text-white ${N?"opacity-70":""} ${s==="delete"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:N?"Traitement...":"Confirmer"})]})]})})},Te=()=>{var _;const{user:i,company:C}=Me(),x=Ge(C),{setHeader:$,resetHeader:E}=$e(),N=we(),[s,g]=d.useState([]),[p,f]=d.useState(!1),[w,S]=d.useState(null),[c,D]=d.useState(1),[A,oe]=d.useState(6),[n,v]=d.useState({nomAgence:"",ville:"",pays:"",quartier:"",type:"",emailGerant:"",nomGerant:"",telephone:"",latitude:"",longitude:""}),[ie,q]=d.useState(!1),[B,F]=d.useState(""),[U,W]=d.useState(!1),[de,I]=d.useState(!1),[P,O]=d.useState(null),[R,Q]=d.useState(!1),L=((_=x.colors)==null?void 0:_.primary)||(i==null?void 0:i.companyColor)||"#2563eb",h=i==null?void 0:i.companyId,ce=z(V,"validateEmail"),me=z(V,"companyCreateAgencyCascade"),ue=z(V,"companyDeleteAgencyCascade"),he=({onPositionChange:t})=>(Se({click(o){t(o.latlng.lat,o.latlng.lng)}}),null);d.useEffect(()=>($({title:"Agences",subtitle:s.length?`${s.length} agence${s.length>1?"s":""}`:"",bg:`linear-gradient(90deg, ${x.colors.primary} 0%, ${x.colors.secondary} 100%)`,fg:"#fff"}),()=>E()),[s.length,x.colors.primary,x.colors.secondary]);const j=async()=>{if(!h){console.warn("companyId manquant — impossible de charger les agences"),g([]);return}W(!0);try{const t=De(H,"companies",h,"agences"),m=(await je(t)).docs.map(r=>({id:r.id,...r.data()}));g(m),D(1)}catch(t){console.error("Erreur Firestore (agences):",t==null?void 0:t.code,t==null?void 0:t.message,t),alert("Une erreur est survenue lors du chargement des agences")}finally{W(!1)}};d.useEffect(()=>{j()},[h]);const M=c*A,T=M-A,ge=d.useMemo(()=>s.slice(T,M),[s,T,M]),G=Math.ceil(s.length/A),b=t=>{const{name:o,value:m,type:r}=t.target;if(o==="emailGerant"&&F(""),o==="nomGerant"){v(u=>({...u,[o]:ae(m)}));return}if(o==="telephone"){const u=ne(m);v(y=>({...y,[o]:u}));return}if((o==="latitude"||o==="longitude")&&m!==""){const u=m.replace(",",".");v(y=>({...y,[o]:u}));return}v(u=>({...u,[o]:r==="email"?m.trim():m}))},pe=(t,o)=>{v(m=>({...m,latitude:String(t),longitude:String(o)}))},Z=()=>{v({nomAgence:"",ville:"",pays:"",quartier:"",type:"",emailGerant:"",nomGerant:"",telephone:"",latitude:"",longitude:""}),S(null),f(!1),F("")},fe=async t=>{if(t.preventDefault(),!h){alert("Aucune compagnie associée à cet utilisateur");return}const o=re(n.emailGerant),m=le(n.telephone);if(!o){F("Format email invalide");return}if(!m){alert("Téléphone invalide (8–15 chiffres)");return}try{if(w){const r=ee(H,"companies",h,"agences",w);await te(r,{nomAgence:n.nomAgence,ville:n.ville,pays:n.pays,quartier:n.quartier||"",type:n.type||"",nomGerant:n.nomGerant,emailGerant:n.emailGerant,telephone:n.telephone,latitude:n.latitude?parseFloat(n.latitude):null,longitude:n.longitude?parseFloat(n.longitude):null}),alert("✅ Agence mise à jour avec succès")}else{q(!0),await ce({email:n.emailGerant}),q(!1);const r={companyId:h,agency:{nomAgence:n.nomAgence,ville:n.ville,pays:n.pays,quartier:n.quartier||"",type:n.type||"",statut:"active",latitude:n.latitude?parseFloat(n.latitude):null,longitude:n.longitude?parseFloat(n.longitude):null},manager:{name:n.nomGerant,email:n.emailGerant,phone:n.telephone,role:"chefAgence"}},u=await me(r),{agencyId:y,manager:k}=u.data||{};alert(`✅ Agence créée (ID: ${y}).

Lien de définition du mot de passe pour le chef d’agence:
${(k==null?void 0:k.resetLink)||"(indisponible)"}`)}Z(),j()}catch(r){console.error("Erreur pendant handleSubmit:",r==null?void 0:r.code,r==null?void 0:r.message,r),(r==null?void 0:r.code)==="permission-denied"?alert("Permissions insuffisantes (Firestore rules)."):alert(`Erreur: ${(r==null?void 0:r.message)??(r==null?void 0:r.code)??"Erreur inconnue"}`),q(!1)}},be=t=>{v({nomAgence:t.nomAgence,ville:t.ville,pays:t.pays,quartier:t.quartier||"",type:t.type||"",emailGerant:t.emailGerant,nomGerant:ae(t.nomGerant||""),telephone:ne(t.telephone||""),latitude:t.latitude!=null?String(t.latitude):"",longitude:t.longitude!=null?String(t.longitude):""}),S(t.id),f(!0),window.scrollTo({top:0,behavior:"smooth"})},ye=t=>{O(t),I(!0)},xe=async(t,o)=>{var m,r,u,y,k,J,K,X,Y;if(!(!h||!P)){Q(!0);try{const l=await ue({companyId:h,agencyId:P,staffAction:t,transferToAgencyId:o,allowDeleteUsers:t==="delete"});alert(`✅ Agence supprimée.
Staff traité: ${((m=l==null?void 0:l.data)==null?void 0:m.staffCount)??0}
`+((u=(r=l==null?void 0:l.data)==null?void 0:r.transferred)!=null&&u.length?`Transférés: ${l.data.transferred.length}
`:"")+((k=(y=l==null?void 0:l.data)==null?void 0:y.detached)!=null&&k.length?`Détachés: ${l.data.detached.length}
`:"")+((K=(J=l==null?void 0:l.data)==null?void 0:J.disabled)!=null&&K.length?`Désactivés: ${l.data.disabled.length}
`:"")+((Y=(X=l==null?void 0:l.data)==null?void 0:X.deleted)!=null&&Y.length?`Supprimés: ${l.data.deleted.length}
`:"")),I(!1),O(null),j()}catch(l){console.error(l),alert(`❌ Erreur: ${(l==null?void 0:l.message)||(l==null?void 0:l.code)||"échec inconnu"}`)}finally{Q(!1)}}},ve=async t=>{if(!h||!t.id)return;const o=t.statut==="active"?"inactive":"active";try{await te(ee(H,"companies",h,"agences",t.id),{statut:o}),j()}catch(m){console.error("Erreur lors du changement de statut:",m),alert("Une erreur est survenue lors du changement de statut")}},Ne=t=>{N(`/compagnie/agence/${t}/dashboard`)};return a("div",{className:"p-6 max-w-6xl mx-auto",children:[a("div",{className:"flex justify-between items-center mb-8",children:[e("div",{}),a("button",{onClick:()=>f(!p),className:"flex items-center px-4 py-2 rounded-md shadow-sm text-white font-medium",style:{backgroundColor:L},children:[e("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),p?"Masquer le formulaire":"Ajouter une nouvelle agence"]})]}),p&&a("form",{onSubmit:fe,className:"bg-white p-6 rounded-lg shadow-md mb-8 border border-gray-200",children:[e("h3",{className:"text-lg font-semibold mb-4",style:{color:L},children:w?"Modifier une agence":"Ajouter une nouvelle agence"}),a("div",{className:"grid md:grid-cols-2 gap-6",children:[a("div",{className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Nom de l'agence *"}),e("input",{name:"nomAgence",value:n.nomAgence,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Ville *"}),e("input",{name:"ville",value:n.ville,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Pays *"}),e("input",{name:"pays",value:n.pays,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Quartier"}),e("input",{name:"quartier",value:n.quartier,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Type"}),e("input",{name:"type",value:n.type,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a("div",{className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Nom du gérant *"}),e("input",{name:"nomGerant",value:n.nomGerant,onChange:b,className:"form-input w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Email du gérant *"}),e("input",{name:"emailGerant",type:"email",value:n.emailGerant,onChange:b,className:`form-input w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 ${n.emailGerant&&!re(n.emailGerant)?"border-red-500 focus:ring-red-400":"border-gray-300 focus:ring-blue-500"}`,required:!0}),B&&e("p",{className:"text-red-600 text-sm mt-1",children:B})]}),a("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Téléphone *"}),e("input",{name:"telephone",inputMode:"numeric",value:n.telephone,onChange:b,minLength:8,maxLength:15,className:`form-input w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 ${n.telephone&&!le(n.telephone)?"border-red-500 focus:ring-red-400":"border-gray-300 focus:ring-blue-500"}`,required:!0,placeholder:"Ex.: 78953098"})]})]})]}),a("div",{className:"mt-6",children:[a("label",{className:"block text-sm font-medium mb-1",children:["📍 Position géographique"," ",n.latitude&&n.longitude&&a("span",{className:"text-gray-500 ml-2",children:["(",n.latitude,", ",n.longitude,")"]})]}),e("p",{className:"text-sm text-gray-500 mb-2",children:"Cliquez sur la carte pour positionner l'agence"}),e("div",{className:"h-64 rounded-lg border border-gray-300 overflow-hidden",children:a(ke,{center:[n.latitude?parseFloat(n.latitude):12.6392,n.longitude?parseFloat(n.longitude):-8.0029],zoom:n.latitude?15:12,className:"h-full w-full",scrollWheelZoom:!0,children:[e(Ce,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e(he,{onPositionChange:pe}),n.latitude&&n.longitude&&e(Ae,{position:[parseFloat(n.latitude),parseFloat(n.longitude)]})]})})]}),a("div",{className:"flex justify-end space-x-3 mt-6",children:[e("button",{type:"button",onClick:Z,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),e("button",{type:"submit",className:"px-4 py-2 rounded-md shadow-sm text-sm font-medium text-white hover:bg-opacity-90",style:{backgroundColor:L},disabled:ie,children:w?"Mettre à jour l'agence":"Ajouter l'agence"})]})]}),a("div",{className:"flex justify-between items-center mb-4",children:[e("h3",{className:"text-xl font-semibold",children:U?"Chargement…":`Liste des agences (${s.length})`}),a("div",{className:"flex items-center",children:[e("label",{className:"mr-2 text-sm",children:"Agences par page:"}),a("select",{value:A,onChange:t=>{oe(Number(t.target.value)),D(1)},className:"border rounded p-1 text-sm",children:[e("option",{value:6,children:"6"}),e("option",{value:12,children:"12"}),e("option",{value:24,children:"24"})]})]})]}),s.length===0&&!U?a("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-200 text-center",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucune agence enregistrée"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par ajouter votre première agence."}),e("div",{className:"mt-6",children:a("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white",style:{backgroundColor:L},children:[e("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Ajouter une agence"]})})]}):a(Le,{children:[e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ge.map(t=>e("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 hover:shadow-md transition-shadow",children:a("div",{className:"p-5",children:[a("div",{className:"flex justify-between items-start",children:[a("div",{children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:t.nomAgence}),a("p",{className:"text-sm text-gray-500",children:[t.ville,", ",t.pays]})]}),e("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.statut==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.statut==="active"?"Active":"Inactive"})]}),a("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[a("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.emailGerant]}),a("div",{className:"flex items-center text-sm text-gray-500",children:[e("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.telephone]})]}),a("div",{className:"mt-5 flex justify-between space-x-2",children:[a("button",{onClick:()=>Ne(t.id),className:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Dashboard"]}),a("button",{onClick:()=>{f(!0),be(t)},className:"inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white",style:{backgroundColor:L},children:[e("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Modifier"]})]}),a("div",{className:"mt-3 flex space-x-2",children:[e("button",{onClick:()=>ve(t),className:`flex-1 px-3 py-2 border rounded-md text-sm font-medium ${t.statut==="active"?"border-yellow-300 text-yellow-700 bg-yellow-100 hover:bg-yellow-200":"border-green-300 text-green-700 bg-green-100 hover:bg-green-200"}`,children:t.statut==="active"?"Désactiver":"Activer"}),e("button",{onClick:()=>ye(t.id),className:"flex-1 px-3 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200",children:"Supprimer"})]})]})},t.id))}),s.length>A&&a("div",{className:"flex justify-between items-center mt-6",children:[a("div",{className:"text-sm text-gray-500",children:["Affichage ",T+1,"-",Math.min(M,s.length)," sur ",s.length," agences"]}),a("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>D(t=>Math.max(t-1,1)),disabled:c===1,className:`px-4 py-2 rounded-md ${c===1?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Précédent"}),a("span",{className:"px-4 py-2 text-gray-700",children:["Page ",c," sur ",G]}),e("button",{onClick:()=>D(t=>Math.min(t+1,G)),disabled:c===G,className:`px-4 py-2 rounded-md ${c===G?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Suivant"})]})]})]}),e(Ee,{open:de,onClose:()=>!R&&I(!1),onConfirm:xe,agences:s,agencyIdToDelete:P,loading:R})]})};export{Te as default};

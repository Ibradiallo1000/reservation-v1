import{r as i,j as t}from"./react-PtMwKKf1.js";import{l as m,k as x}from"./firebase-eGIzIftJ.js";import{d as h}from"../index-B745l0NT.js";import"./vendor-B5FTF_2c.js";const N=()=>{const[n,p]=i.useState([]);return i.useEffect(()=>{(async()=>{const r=(await m(x(h,"reservations"))).docs.map(e=>{var l,d;const s=e.data();return{companySlug:((l=s.trip)==null?void 0:l.company)||"—",date:((d=s.trip)==null?void 0:d.date)||"",status:s.status||"payée",total:s.total||0}}),a={};r.forEach(e=>{const s=e.companySlug;a[s]||(a[s]={company:s,totalReservations:0,totalAmount:0,byStatus:{}}),a[s].totalReservations++,a[s].totalAmount+=e.total,a[s].byStatus[e.status]=(a[s].byStatus[e.status]||0)+1}),p(Object.values(a))})()},[]),t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Statistiques des Réservations"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full table-auto border",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border px-4 py-2",children:"Compagnie"}),t.jsx("th",{className:"border px-4 py-2",children:"Nombre total"}),t.jsx("th",{className:"border px-4 py-2",children:"Montant total"}),t.jsx("th",{className:"border px-4 py-2",children:"Statuts"})]})}),t.jsxs("tbody",{children:[n.map((o,c)=>t.jsxs("tr",{children:[t.jsx("td",{className:"border px-4 py-2 font-semibold",children:o.company}),t.jsx("td",{className:"border px-4 py-2 text-center",children:o.totalReservations}),t.jsxs("td",{className:"border px-4 py-2",children:[o.totalAmount.toLocaleString()," FCFA"]}),t.jsx("td",{className:"border px-4 py-2",children:Object.entries(o.byStatus).map(([r,a])=>t.jsxs("p",{children:[r," : ",a]},r))})]},c)),n.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucune donnée disponible."})})]})]})})]})};export{N as default};

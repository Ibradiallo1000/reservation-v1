import{r as o,j as e,z as B,e as A,m as E,ai as $,P as M,Z as V,q as w,aj as z,s as O,k as K,S as P,ak as T,al as _}from"./react-PtMwKKf1.js";import{d as N,f as I,u as U,l as L,k as q,q as G,A as H,C as W}from"./firebase-eGIzIftJ.js";import{u as k,m as v,A as R,I as Z,d as f,a as F,b as J}from"../index-B745l0NT.js";import"./vendor-B5FTF_2c.js";const Q=()=>{const{user:s}=k(),[t,l]=o.useState({accroche:"",instructionRecherche:"",nom:"",telephone:"",description:"",logoUrl:"",faviconUrl:"",banniereUrl:"",imagesSlider:[],couleurPrimaire:"#3B82F6",couleurSecondaire:"#10B981",couleurAccent:"#FBBF24",couleurTertiaire:"#F472B6",themeStyle:"moderne",police:"sans-serif",socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0,showTestimonials:!0,showLegalLinks:!0,showContactForm:!0,customLinks:[]}}),[i,u]=o.useState({text:"",type:""}),[x,r]=o.useState(null),[m,c]=o.useState(null),h=[{name:"moderne",value:"moderne",description:"Style contemporain avec couleurs vives",icon:e.jsx(M,{size:16})},{name:"classique",value:"classique",description:"Style traditionnel épuré",icon:e.jsx(T,{size:16})},{name:"sombre",value:"sombre",description:"Mode nuit élégant",icon:e.jsx(z,{size:16})},{name:"contraste",value:"contraste",description:"Fort impact visuel",icon:e.jsx(_,{size:16})},{name:"minimaliste",value:"minimaliste",description:"Design ultra épuré",icon:e.jsx(T,{size:16})},{name:"glassmorphism",value:"glassmorphism",description:"Effets de transparence moderne",icon:e.jsx(M,{size:16})}];o.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const d=N(f,"companies",s.companyId),g=await I(d);g.exists()&&l(n=>({...n,...g.data()}))})()},[s]);const p=async()=>{if(s!=null&&s.companyId){u({text:"Enregistrement en cours...",type:"info"});try{const a=N(f,"companies",s.companyId);await U(a,t),u({text:"Modifications enregistrées avec succès",type:"success"})}catch(a){console.error("Erreur d'enregistrement:",a),u({text:"Échec de l'enregistrement. Veuillez réessayer.",type:"error"})}}},b=a=>{const{name:d,value:g}=a.target;l(n=>({...n,[d]:g}))},j=a=>{x&&(l(d=>({...d,...x==="logo"&&{logoUrl:a},...x==="favicon"&&{faviconUrl:a},...x==="banniereStatique"&&{banniereUrl:a},...x==="banniere"&&{imagesSlider:[...d.imagesSlider,a]}})),r(null))},y=a=>{l(d=>({...d,imagesSlider:d.imagesSlider.filter((g,n)=>n!==a)}))};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 flex items-center gap-4 border-l-4",style:{borderLeftColor:t.couleurPrimaire},children:[e.jsx(B,{className:"h-8 w-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Personnalisation de la vitrine"}),e.jsx("p",{className:"text-gray-500",children:"Configurez l'apparence de votre page publique"})]})]}),e.jsx(R,{children:i.text&&e.jsx(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 ${i.type==="success"?"bg-green-100 text-green-800 border-l-4 border-green-500":i.type==="error"?"bg-red-100 text-red-800 border-l-4 border-red-500":"bg-blue-100 text-blue-800 border-l-4 border-blue-500"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[i.type==="success"?e.jsx(A,{className:"h-6 w-6 mr-2"}):i.type==="error"?e.jsx(E,{className:"h-6 w-6 mr-2"}):e.jsx("div",{className:"h-6 w-6 mr-2 animate-spin rounded-full border-t-2 border-b-2 border-blue-500"}),e.jsx("span",{children:i.text})]}),i.type==="success"&&e.jsx("button",{onClick:()=>u({text:"",type:""}),className:"text-sm underline text-green-800 hover:text-green-900",type:"button",children:"OK"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx($,{className:"text-blue-500"}),"Textes personnalisés"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phrase d'accroche (titre principal)"}),e.jsx("input",{type:"text",name:"accroche",value:t.accroche,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Réservez votre billet en un clic"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Sera affiché en grand sur votre bannière"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instruction de recherche"}),e.jsx("input",{type:"text",name:"instructionRecherche",value:t.instructionRecherche,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Remplissez les champs ci-dessous pour trouver votre trajet"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"S'affiche au-dessus du formulaire de recherche"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(M,{className:"text-purple-500"}),"Couleurs"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{name:"Primaire",key:"couleurPrimaire",value:t.couleurPrimaire},{name:"Secondaire",key:"couleurSecondaire",value:t.couleurSecondaire},{name:"Accent",key:"couleurAccent",value:t.couleurAccent},{name:"Tertiaire",key:"couleurTertiaire",value:t.couleurTertiaire}].map(a=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg cursor-pointer border-2 border-gray-200 shadow-sm",style:{backgroundColor:a.value},onClick:()=>c(a.key)}),e.jsx("span",{className:"text-sm font-mono",children:a.value})]}),m===a.key&&e.jsxs("div",{className:"absolute z-10 mt-2 bg-white p-3 rounded-xl shadow-xl border border-gray-200",children:[e.jsx(V,{color:a.value,onChange:d=>l({...t,[a.key]:d})}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsx("input",{type:"text",value:a.value,onChange:d=>l({...t,[a.key]:d.target.value}),className:"text-sm border rounded-lg px-3 py-1.5 w-24"}),e.jsx("button",{onClick:()=>c(null),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Valider"})]})]})]},a.key))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(w,{className:"text-pink-500"}),"Images"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),t.logoUrl?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e.jsx("img",{src:t.logoUrl,alt:"Logo",className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("logo"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e.jsx("button",{onClick:()=>l({...t,logoUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>r("logo"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(w,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter un logo"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 300x300px"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favicon"}),t.faviconUrl?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e.jsx("img",{src:t.faviconUrl,alt:"Favicon",className:"h-8 w-8 object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("favicon"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e.jsx("button",{onClick:()=>l({...t,faviconUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>r("favicon"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(w,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter un favicon"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 32x32px"})]})]})]})]})]}),e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(z,{className:"text-indigo-500"}),"Thème graphique"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map(a=>e.jsxs(v.div,{whileHover:{y:-2},onClick:()=>l({...t,themeStyle:a.value}),className:`p-4 border rounded-xl cursor-pointer transition-all ${t.themeStyle===a.value?"ring-2 ring-blue-500 border-transparent bg-blue-50":"hover:shadow-md border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.icon,e.jsx("span",{className:"capitalize font-medium text-gray-700",children:a.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]},a.value))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(w,{className:"text-amber-500"}),"Bannière"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture statique"}),t.banniereUrl?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:t.banniereUrl,alt:"Bannière",className:"h-40 w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end p-4",children:e.jsx("h3",{className:"text-white font-bold text-lg",children:t.accroche||"Votre phrase d'accroche"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("banniereStatique"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer l'image"}),e.jsx("button",{onClick:()=>l({...t,banniereUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>r("banniereStatique"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(w,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter une bannière"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 1200x400px"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Images du slider (",t.imagesSlider.length,")"]}),t.imagesSlider.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.imagesSlider.map((a,d)=>e.jsxs(v.div,{className:"relative group",whileHover:{scale:1.02},children:[e.jsx("img",{src:a,alt:`Slide ${d}`,className:"h-24 w-full object-cover rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>y(d),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md hover:bg-red-600",children:e.jsx(O,{size:14})})]},d))}),e.jsxs("button",{onClick:()=>r("banniere"),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1.5 mt-2",children:[e.jsx(K,{size:14})," Ajouter des images"]})]}):e.jsxs("button",{onClick:()=>r("banniere"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsx(w,{className:"mb-2 h-8 w-8"}),e.jsx("span",{className:"font-medium",children:"Ajouter des images au slider"}),e.jsx("span",{className:"text-xs mt-1",children:"Recommandé : 3-5 images"})]})]})]})]})]})]}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:p,className:`px-6 py-3 text-white font-medium rounded-lg shadow-md transition flex items-center justify-center gap-2 ${i.type==="success"?"bg-green-500 hover:bg-green-600":i.type==="error"?"bg-red-500 hover:bg-red-600":"bg-blue-600 hover:bg-blue-700"}`,style:{backgroundColor:i.type?void 0:t.couleurPrimaire,minWidth:"200px"},children:i.type==="success"?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{children:"Enregistré !"})]}):i.type==="error"?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Réessayer"})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{children:"Enregistrer"})]})})}),x&&(s==null?void 0:s.companyId)&&e.jsx(Z,{companyId:s.companyId,onSelect:j,onClose:()=>r(null)})]})})},X=()=>{const[s,t]=o.useState([]),[l,i]=o.useState([]),[u,x]=o.useState(""),[r,m]=o.useState(""),[c,h]=o.useState(""),[p,b]=o.useState("guichetier"),[j,y]=o.useState(""),a=async()=>{const n=G(q(f,"users")),S=(await L(n)).docs.map(D=>({id:D.id,...D.data()}));t(S)},d=async()=>{const C=(await L(q(f,"agences"))).docs.map(S=>({id:S.id,nomAgence:S.data().nomAgence}));i(C)},g=async n=>{if(n.preventDefault(),!u||!r||!c||!j||!p){alert("Tous les champs sont obligatoires.");return}try{await H(q(f,"users"),{nom:u,email:r,motDePasse:c,role:p,agencyId:j,createdAt:new Date}),alert("Utilisateur ajouté avec succès."),x(""),m(""),h(""),b("guichetier"),y(""),a()}catch(C){console.error("Erreur ajout utilisateur :",C),alert("Erreur lors de l'ajout.")}};return o.useEffect(()=>{d(),a()},[]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gestion du personnel"}),e.jsxs("form",{onSubmit:g,className:"bg-gray-100 p-4 rounded mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:u,onChange:n=>x(n.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r,onChange:n=>m(n.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Mot de passe temporaire"}),e.jsx("input",{type:"text",value:c,onChange:n=>h(n.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Rôle"}),e.jsxs("select",{value:p,onChange:n=>b(n.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"guichetier",children:"Guichetier"}),e.jsx("option",{value:"agent_courrier",children:"Agent de courrier"}),e.jsx("option",{value:"chef_agence",children:"Chef d’agence"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"Agence"}),e.jsxs("select",{value:j,onChange:n=>y(n.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"",children:"-- Sélectionner une agence --"}),l.map(n=>e.jsx("option",{value:n.id,children:n.nomAgence},n.id))]})]}),e.jsx("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded md:col-span-2",children:"Ajouter l'utilisateur"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Liste du personnel"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 border",children:"Nom"}),e.jsx("th",{className:"px-4 py-2 border",children:"Email"}),e.jsx("th",{className:"px-4 py-2 border",children:"Rôle"}),e.jsx("th",{className:"px-4 py-2 border",children:"Agence"})]})}),e.jsxs("tbody",{children:[s.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border",children:n.nom}),e.jsx("td",{className:"px-4 py-2 border",children:n.email}),e.jsx("td",{className:"px-4 py-2 border",children:n.role}),e.jsx("td",{className:"px-4 py-2 border",children:n.agencyId})]},n.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucun personnel enregistré."})})]})]})})]})},Y=()=>{const{user:s}=k(),[t,l]=o.useState(""),[i,u]=o.useState(""),[x,r]=o.useState(""),m=async()=>{if(t!==i){r("Les mots de passe ne correspondent pas.");return}try{F.currentUser&&(await W(F.currentUser,t),r("Mot de passe mis à jour avec succès !"))}catch{r("Erreur lors de la mise à jour du mot de passe.")}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sécurité"}),e.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:t,onChange:c=>l(c.target.value),className:"block mb-2 border px-2 py-1"}),e.jsx("input",{type:"password",placeholder:"Confirmer le mot de passe",value:i,onChange:c=>u(c.target.value),className:"block mb-2 border px-2 py-1"}),e.jsx("button",{onClick:m,className:"bg-orange-600 text-white px-4 py-1 rounded",children:"Modifier le mot de passe"}),x&&e.jsx("p",{className:"mt-2 text-green-600",children:x})]})},ee=()=>{var r;const{user:s}=k(),[t,l]=o.useState({socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0}}),[i,u]=o.useState({text:"",type:""});o.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const c=N(f,"companies",s.companyId),h=await I(c);if(h.exists()){const p=h.data();l(b=>({...b,socialMedia:p.socialMedia||b.socialMedia,footerConfig:p.footerConfig||b.footerConfig}))}})()},[s]);const x=async()=>{if(s!=null&&s.companyId){u({text:"Enregistrement...",type:"info"});try{const m=N(f,"companies",s.companyId);await U(m,{socialMedia:t.socialMedia,footerConfig:t.footerConfig}),u({text:"Modifications enregistrées",type:"success"})}catch(m){console.error(m),u({text:"Erreur lors de l'enregistrement",type:"error"})}}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Réseaux sociaux & affichage"}),e.jsx(R,{children:i.text&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${i.type==="success"?"bg-green-100 text-green-800":i.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:i.text}),i.type==="success"&&e.jsx("button",{onClick:()=>u({text:"",type:""}),className:"text-sm underline",children:"OK"})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Liens des réseaux sociaux"}),e.jsx("div",{className:"space-y-3",children:["facebook","instagram","whatsapp","tiktok","linkedin","youtube"].map(m=>{var c;return e.jsx("input",{type:"url",placeholder:`Lien ${m}`,value:((c=t.socialMedia)==null?void 0:c[m])||"",onChange:h=>{const p=h.target.value;l(b=>({...b,socialMedia:{...b.socialMedia,[m]:p}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md"},m)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Affichage dans le pied de page"}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:((r=t.footerConfig)==null?void 0:r.showSocialMedia)??!0,onChange:m=>l(c=>({...c,footerConfig:{...c.footerConfig,showSocialMedia:m.target.checked}})),className:"mr-2"})," Afficher les icônes de réseaux sociaux"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:x,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e.jsx(P,{size:18})," Enregistrer"]})})]})]})},se=()=>{const{user:s}=k(),[t,l]=o.useState({fr:"",en:""}),[i,u]=o.useState({fr:"",en:""}),[x,r]=o.useState({fr:"",en:""}),[m,c]=o.useState({fr:"",en:""}),[h,p]=o.useState({text:"",type:"info"});o.useEffect(()=>{s!=null&&s.companyId&&(async()=>{const a=N(f,"companies",s.companyId),d=await I(a);if(d.exists()){const g=d.data();l(g.mentionsLegales||{fr:"",en:""}),u(g.politiqueConfidentialite||{fr:"",en:""}),r(g.conditionsUtilisation||{fr:"",en:""}),c(g.politiqueCookies||{fr:"",en:""})}})()},[s]);const b=async()=>{if(s!=null&&s.companyId){p({text:"Enregistrement en cours...",type:"info"});try{const y=N(f,"companies",s.companyId);await U(y,{mentionsLegales:t,politiqueConfidentialite:i,conditionsUtilisation:x,politiqueCookies:m}),p({text:"Mentions mises à jour avec succès.",type:"success"})}catch(y){console.error(y),p({text:"Erreur lors de l'enregistrement.",type:"error"})}}},j=(y,a,d)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:y}),e.jsx("label",{className:"text-sm font-medium",children:"🇫🇷 Français"}),e.jsx("textarea",{rows:4,className:"w-full mb-4 p-2 border rounded",value:a.fr,onChange:g=>d({...a,fr:g.target.value})}),e.jsx("label",{className:"text-sm font-medium",children:"🇬🇧 English"}),e.jsx("textarea",{rows:4,className:"w-full p-2 border rounded",value:a.en,onChange:g=>d({...a,en:g.target.value})})]});return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Mentions légales & politiques multilingues"}),e.jsx(R,{children:h.text&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${h.type==="success"?"bg-green-100 text-green-800":h.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="success"?e.jsx(A,{}):h.type==="error"?e.jsx(E,{}):e.jsx(P,{}),e.jsx("span",{children:h.text})]}),h.type==="success"&&e.jsx("button",{onClick:()=>p({text:"",type:"info"}),className:"text-sm underline",children:"OK"})]})})}),e.jsxs("div",{className:"space-y-8",children:[j("Mentions légales",t,l),j("Politique de confidentialité",i,u),j("Conditions d'utilisation",x,r),j("Politique de cookies",m,c),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:b,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e.jsx(P,{size:18})," Enregistrer"]})})]})]})},le=()=>{const[s,t]=o.useState("vitrine"),{user:l}=k(),[i,u]=o.useState(null);o.useEffect(()=>{(async()=>{if(!(l!=null&&l.companyId))return;const m=N(f,"companies",l.companyId),c=await I(m);c.exists()&&u({id:c.id,...c.data()})})()},[l==null?void 0:l.companyId]);const{colors:x}=J(i);return e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",style:{color:x.primary},children:"Paramètres de la compagnie"}),e.jsx("div",{className:"flex gap-4 mb-4",children:[{key:"vitrine",label:"Vitrine publique"},{key:"personnel",label:"Personnel"},{key:"securite",label:"Sécurité"},{key:"reseaux",label:"Réseaux sociaux"},{key:"legaux",label:"Mentions & politique"}].map(r=>e.jsx("button",{onClick:()=>t(r.key),className:"px-4 py-2 rounded transition-all",style:{backgroundColor:s===r.key?x.primary:"#e5e7eb",color:s===r.key?x.text:"#1f2937"},children:r.label},r.key))}),s==="vitrine"&&e.jsx(Q,{}),s==="personnel"&&e.jsx(X,{}),s==="securite"&&e.jsx(Y,{}),s==="reseaux"&&e.jsx(ee,{}),s==="legaux"&&e.jsx(se,{})]})};export{le as default};

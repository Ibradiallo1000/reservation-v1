import{a as g,j as n}from"./react-DgrrIcw2.js";import{au as h}from"./vendor-BHjJ2Hjk.js";import{A as b,k as y}from"./firebase-eGIzIftJ.js";import{u as j,d as v}from"../index-p6Te0bSg.js";import{v as x}from"./v4-C6aID195.js";const A=({label:i,onUpload:o,dossier:c,className:m,collectionName:p="imagesBibliotheque"})=>{const{user:e}=j(),d=async u=>{var r;const t=(r=u.target.files)==null?void 0:r[0];if(!t)return;const a=new FormData;a.append("file",t),a.append("upload_preset","ml_default"),a.append("public_id",`${c}/${x()}`);try{const l=(await h.post("https://api.cloudinary.com/v1_1/dj697honl/image/upload",a)).data.secure_url,f=prompt("Nom de l'image (ex: logo, bannière, etc.)")||"image";await b(y(v,p),{companyId:(e==null?void 0:e.companyId)||null,url:l,type:"autre",nom:f,createdAt:new Date}),o&&o(l),alert("✅ Image ajoutée avec succès !")}catch(s){console.error("Erreur Cloudinary:",s),alert("❌ Upload échoué.")}};return g("div",{className:`mb-4 ${m||""}`,children:[n("label",{className:"font-semibold block mb-1",children:i}),n("input",{type:"file",accept:"image/*",onChange:d})]})};export{A as U};

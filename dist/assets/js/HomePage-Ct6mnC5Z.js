import{u as h,r as l,j as e,W as v,Y as N,M as C,_ as k}from"./react-PtMwKKf1.js";import{d as j,f as y,l as p,k as f,q as S,w as E}from"./firebase-eGIzIftJ.js";import{d as g,m as L}from"../index-B745l0NT.js";import"./vendor-B5FTF_2c.js";const U=()=>{const a=h(),[o,i]=l.useState(!1),[c,x]=l.useState(null);return l.useEffect(()=>{(async()=>{try{const t=j(g,"platform","settings"),m=await y(t);if(m.exists()){const d=m.data();d.logoUrl&&x(d.logoUrl)}}catch(t){console.error("Erreur chargement logo:",t)}})()},[]),e.jsxs("header",{className:"bg-white/90 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-gray-200",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>a("/"),children:[c?e.jsx("img",{src:c,alt:"Logo Teliya",className:"h-8 w-auto mr-2"}):e.jsx("img",{src:"/images/logo.png",alt:"Logo Teliya",className:"h-8 w-auto mr-2"}),e.jsx("span",{className:"text-3xl font-extrabold text-orange-600 tracking-wide",children:"Teliya"})]}),e.jsxs("nav",{className:"space-x-6 hidden md:flex",children:[e.jsx("button",{onClick:()=>a("/resultats"),className:"text-gray-700 hover:text-orange-600",children:"Trajets"}),e.jsx("button",{onClick:()=>a("/destinations"),className:"text-gray-700 hover:text-orange-600",children:"Destinations"}),e.jsx("button",{onClick:()=>a("/login"),className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"Connexion"})]}),e.jsx("button",{className:"md:hidden text-gray-700 focus:outline-none",onClick:()=>i(!o),children:o?e.jsx(v,{className:"h-6 w-6"}):e.jsx(N,{className:"h-6 w-6"})})]}),o&&e.jsxs("div",{className:"md:hidden bg-white border-t border-gray-200 px-4 py-3 space-y-3",children:[e.jsx("button",{onClick:()=>{a("/resultats"),i(!1)},className:"block w-full text-left hover:text-orange-600",children:"Trajets"}),e.jsx("button",{onClick:()=>{a("/destinations"),i(!1)},className:"block w-full text-left hover:text-orange-600",children:"Destinations"}),e.jsx("button",{onClick:()=>{a("/login"),i(!1)},className:"block w-full text-left bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"Connexion"})]})]})},b=({label:a,value:o,onChange:i})=>{const[c,x]=l.useState([]),[s,t]=l.useState([]),[m,d]=l.useState(!1);l.useEffect(()=>{(async()=>{const u=await p(f(g,"villes"));x(u.docs.map(w=>w.data().nom))})()},[]);const n=r=>{i(r),r?(t(c.filter(u=>u.toLowerCase().startsWith(r.toLowerCase()))),d(!0)):(t([]),d(!1))};return e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[e.jsx(C,{className:"h-5 w-5 text-orange-500 mr-2"}),e.jsx("input",{type:"text",value:o,onChange:r=>n(r.target.value),placeholder:a,className:"flex-1 outline-none",required:!0})]}),m&&s.length>0&&e.jsx("ul",{className:"absolute z-10 bg-white border mt-1 rounded shadow w-full max-h-40 overflow-y-auto",children:s.map((r,u)=>e.jsx("li",{onClick:()=>{i(r),d(!1)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:r},u))})]})},D=()=>{const a=h(),[o,i]=l.useState(""),[c,x]=l.useState(""),[s,t]=l.useState(null);l.useEffect(()=>{(async()=>{try{const n=j(g,"platform","settings"),r=await y(n);if(r.exists()){const u=r.data();u.banniereUrl&&t(u.banniereUrl)}}catch(n){console.error("Erreur lors du chargement de la bannière:",n)}})()},[]);const m=d=>{d.preventDefault(),!(!o||!c)&&a("/resultats",{state:{departure:o,arrival:c}})};return e.jsx("section",{className:"relative bg-cover bg-center text-white py-32",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url('${s||"/images/hero-travel.jpg"}')`},children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Voyagez avec ",e.jsx("span",{className:"text-orange-400",children:"Teliya"})]}),e.jsx("p",{className:"text-lg mb-8",children:"Réservez vos billets en ligne, trouvez les meilleurs trajets en Afrique."}),e.jsxs("form",{onSubmit:m,className:"bg-white text-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row p-4 gap-4 max-w-3xl mx-auto",children:[e.jsx(b,{label:"Ville de départ",value:o,onChange:i}),e.jsx(b,{label:"Ville d’arrivée",value:c,onChange:x}),e.jsxs("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded flex items-center justify-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2"})," Rechercher"]})]})]})})},T=()=>{const[a,o]=l.useState([]),[i,c]=l.useState(!0),x="Mali";return l.useEffect(()=>{(async()=>{try{const t=f(g,"villes");let m=t;x&&(m=S(t,E("country","==",x)));let n=(await p(m)).docs.map(r=>({id:r.id,...r.data()}));n=n.sort((r,u)=>(u.popularity||0)-(r.popularity||0)),o(n.slice(0,6))}catch(t){console.error("Erreur lors du chargement des villes:",t)}finally{c(!1)}})()},[x]),i?e.jsx("p",{className:"text-center py-10",children:"Chargement des villes populaires..."}):a.length===0?e.jsx("p",{className:"text-center py-10 text-gray-500",children:"Aucune ville disponible pour ce pays."}):e.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Destinations populaires"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:a.map(s=>e.jsxs("span",{className:"px-4 py-2 border rounded-full bg-gray-100 hover:bg-orange-100 text-gray-700 font-medium cursor-pointer",children:[s.flag||"🏙️"," ",s.name]},s.id))})]})},q=()=>{const[a,o]=l.useState([]),[i,c]=l.useState(!0),x=h();return l.useEffect(()=>{(async()=>{try{const d=(await p(f(g,"companies"))).docs.map(n=>({id:n.id,...n.data()})).filter(n=>n.status==="actif"&&n.publicVisible!==!1);o(d)}catch(t){console.error("Erreur chargement compagnies:",t)}finally{c(!1)}})()},[]),i?e.jsx("p",{className:"text-center py-10",children:"Chargement des compagnies..."}):a.length===0?e.jsx("p",{className:"text-center py-10 text-gray-500",children:"Aucune compagnie partenaire visible."}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-orange-600",children:"Nos compagnies partenaires"}),e.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-thin scrollbar-thumb-orange-500 scrollbar-track-gray-200 py-3",children:a.map(s=>e.jsxs(L.div,{whileHover:{scale:1.05},onClick:()=>x(`/${s.slug}`),className:"min-w-[120px] max-w-[120px] bg-white rounded-lg shadow-md border-t-4 border-orange-500 p-3 cursor-pointer hover:shadow-lg transition-all",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full overflow-hidden border-2 border-orange-500 shadow-sm mb-2",children:e.jsx("img",{src:s.logoUrl||"/default-logo.png",alt:s.nom,className:"w-full h-full object-cover",onError:t=>t.target.src="/default-logo.png"})}),e.jsx("p",{className:"text-xs font-semibold text-gray-800 truncate",children:s.nom}),e.jsx("p",{className:"text-[11px] text-gray-500",children:s.pays})]},s.id))})]})},z=()=>e.jsx("footer",{className:"bg-gray-900 text-gray-400 py-6 text-center",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Teliya – Tous droits réservés."]})}),P=()=>e.jsxs("div",{className:`min-h-screen flex flex-col \r
      bg-white \r
      bg-[url('/images/world-pattern.png')] \r
      bg-repeat`,children:[e.jsx(U,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(D,{}),e.jsx("section",{className:"py-12",children:e.jsx(T,{})}),e.jsx("section",{className:"py-12 bg-gray-50",children:e.jsx(q,{})})]}),e.jsx(z,{})]});export{P as default};

import{u as ke,r as n,a as t,j as r,F as Z}from"./react-DgrrIcw2.js";import{k as T,l as V,d as q,f as ee,T as Ne,A as Ce,u as Le,q as Se,w as De}from"./firebase-eGIzIftJ.js";import{u as je,b as Ie,d as N}from"../index-p6Te0bSg.js";import"./vendor-BHjJ2Hjk.js";const re=30,te=8,ae="compagnie-par-defaut",Te=()=>{const{user:o,company:oe}=je(),E=ke(),e=Ie(oe),[D,le]=n.useState(""),[j,se]=n.useState(""),[ne,H]=n.useState(""),[L,ie]=n.useState([]),[X,z]=n.useState([]),[ce,de]=n.useState([]),[me,pe]=n.useState([]),[l,W]=n.useState(null),[b,he]=n.useState(""),[f,ue]=n.useState(""),[d,_]=n.useState(1),[v,F]=n.useState(0),[u,G]=n.useState("aller_simple"),[R,O]=n.useState(0),[C,U]=n.useState("espèces"),[Y,J]=n.useState(!1),ge=Array.from({length:te},(a,s)=>{const i=new Date;return i.setDate(i.getDate()+s),i.toISOString().split("T")[0]}),I=n.useCallback((a,s)=>{const i=new Date,[m,p]=s.split(":").map(Number),g=new Date(a);return g.setHours(m,p,0,0),g.getTime()<i.getTime()},[]);n.useEffect(()=>{(async()=>{try{if(!(o!=null&&o.companyId)||!(o!=null&&o.agencyId))return;const s=T(N,`companies/${o.companyId}/agences/${o.agencyId}/weeklyTrips`),m=(await V(Se(s,De("active","==",!0)))).docs.map(x=>x.data()),p=Array.from(new Set(m.map(x=>x.departure))),g=Array.from(new Set(m.map(x=>x.arrival)));de(p),pe(g)}catch(s){console.error("Erreur chargement des villes:",s)}})()},[o==null?void 0:o.companyId,o==null?void 0:o.agencyId]),n.useEffect(()=>{if(!l){O(0);return}const a=l.price;let s=d*a;u==="aller_retour"&&(s+=v*a),O(s)},[d,v,u,l]);const ye=n.useCallback(async()=>{var a,s,i,m;if(!D||!j){alert("Veuillez sélectionner une ville de départ et une ville d'arrivée");return}if(!(o!=null&&o.companyId)||!(o!=null&&o.agencyId)){alert("Votre compte n'est pas correctement configuré");return}try{const p=D.trim().toLowerCase(),g=j.trim().toLowerCase(),x=T(N,`companies/${o.companyId}/agences/${o.agencyId}/weeklyTrips`),$=(await V(x)).docs.map(c=>({id:c.id,...c.data()})),S=[],M=new Date;for(let c=0;c<te;c++){const w=new Date(M);w.setDate(M.getDate()+c);const y=w.toLocaleDateString("fr-FR",{weekday:"long"}).toLowerCase();for(const h of $)if(((a=h.departure)==null?void 0:a.toLowerCase())===p&&((s=h.arrival)==null?void 0:s.toLowerCase())===g&&h.active&&((m=(i=h.horaires)==null?void 0:i[y])==null?void 0:m.length)>0)for(const Q of h.horaires[y])S.push({id:`${h.id}_${w.toISOString().split("T")[0]}_${Q}`,date:w.toISOString().split("T")[0],time:Q,departure:h.departure,arrival:h.arrival,price:h.price,places:h.places||re})}const k=T(N,`companies/${o.companyId}/agences/${o.agencyId}/reservations`),fe=(await V(k)).docs.map(c=>c.data()),A=S.map(c=>{const w=fe.filter(y=>y.trajetId===c.id&&y.statut==="payé"&&y.statutEmbarquement!=="absent"&&y.statutEmbarquement!=="reporté").reduce((y,h)=>y+(h.seatsGo||1),0);return{...c,remainingSeats:(c.places||re)-w}}).filter(c=>!I(c.date,c.time));ie(A);const B=A.length>0?A[0].date:"";if(H(B),B){const c=A.filter(w=>w.date===B).sort((w,y)=>w.time.localeCompare(y.time));z(c)}else z([]);W(null)}catch(p){console.error("Erreur lors de la recherche :",p),alert("Une erreur est survenue lors de la recherche des trajets")}},[D,j,o==null?void 0:o.companyId,o==null?void 0:o.agencyId,I]),xe=n.useCallback(a=>{H(a);const s=L.filter(i=>i.date===a&&!I(i.date,i.time)).sort((i,m)=>i.time.localeCompare(m.time));z(s),W(null)},[L,I]),we=n.useCallback(a=>{W(a),_(1),F(0)},[]),ve=n.useCallback(async()=>{if(!l||!b||!f||d<1){alert("Veuillez remplir tous les champs obligatoires");return}if(!(o!=null&&o.companyId)||!(o!=null&&o.agencyId)){alert("Votre compte n'est pas associé à une compagnie valide");return}const a=u==="aller_retour"?d+v:d;if(l.remainingSeats!==void 0&&a>l.remainingSeats){alert(`Désolé, il ne reste que ${l.remainingSeats} places disponibles.`);return}J(!0);try{let s=ae,i="Compagnie";const m=q(N,"companies",o.companyId),p=await ee(m);p.exists()&&(s=p.data().slug||ae,i=p.data().nom||"Compagnie");let g="",x="";const K=q(N,`companies/${o.companyId}/agences/${o.agencyId}`),$=await ee(K);if($.exists()){const P=$.data();g=P.nomAgence||P.nom||"",x=P.telephone||""}const S={trajetId:l.id,nomClient:b,telephone:f,seatsGo:d,seatsReturn:u==="aller_retour"?v:0,date:l.date,heure:l.time,depart:l.departure,arrivee:l.arrival,montant:R,statut:"payé",statutEmbarquement:"en_attente",checkInTime:null,reportInfo:null,compagnieId:o.companyId,compagnieNom:i,agencyId:o.agencyId,agencyNom:g,agencyTelephone:x,createdAt:Ne.now(),canal:"guichet",tripType:u,paiement:C,companySlug:s,qrCode:null},M=T(N,`companies/${o.companyId}/agences/${o.agencyId}/reservations`),k=await Ce(M,S);await Le(q(N,`companies/${o.companyId}/agences/${o.agencyId}/reservations`,k.id),{qrCode:k.id}),E(`/agence/receipt/${k.id}`,{state:{reservation:{...S,id:k.id,qrCode:k.id},companyInfo:{id:o.companyId,slug:s,nom:i,couleurPrimaire:e.primary,couleurSecondaire:e.secondary}}})}catch(s){console.error("Erreur création réservation:",s),alert("Erreur lors de la réservation")}finally{J(!1)}},[l,b,f,o,d,v,u,R,C,E,e]),be=Array.from(new Set(L.map(a=>a.date)));return t("div",{className:"p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[t("div",{className:"lg:col-span-2 space-y-6",children:[r("header",{className:"space-y-4",children:t("div",{className:"flex items-center gap-3",children:[r("div",{className:"p-3 rounded-xl shadow-lg",style:{backgroundColor:e.primary},children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t("div",{children:[r("h1",{className:"text-2xl md:text-3xl font-bold",style:{color:e.textPrimary},children:"Guichet de vente"}),r("p",{className:"text-sm md:text-base",style:{color:e.textSecondary},children:"Recherchez et réservez des billets en quelques clics"})]})]})}),t("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:e.primaryLight},children:[t("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:e.textPrimary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.secondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher un trajet"]}),t("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t("div",{children:[r("label",{htmlFor:"departure",className:"block text-sm font-medium mb-2",style:{color:e.textPrimary},children:"Départ"}),t("div",{className:"relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.textSecondary},children:[r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r("input",{id:"departure",list:"depList",value:D,onChange:a=>le(a.target.value),placeholder:"Ville de départ",className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",style:{borderColor:e.primaryLight,color:e.textPrimary,"--tw-ring-color":e.primary}}),r("datalist",{id:"depList",children:ce.map(a=>r("option",{value:a},`dep-${a}`))})]})]}),t("div",{children:[r("label",{htmlFor:"arrival",className:"block text-sm font-medium mb-2",style:{color:e.textPrimary},children:"Arrivée"}),t("div",{className:"relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.textSecondary},children:[r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r("input",{id:"arrival",list:"arrList",value:j,onChange:a=>se(a.target.value),placeholder:"Ville d'arrivée",className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",style:{borderColor:e.primaryLight,color:e.textPrimary,"--tw-ring-color":e.primary}}),r("datalist",{id:"arrList",children:me.map(a=>r("option",{value:a},`arr-${a}`))})]})]}),r("div",{className:"flex items-end",children:t("button",{onClick:ye,className:"w-full text-white font-medium px-4 py-2 md:py-3 rounded-xl shadow-md transition-all duration-200 flex items-center justify-center gap-2 hover:shadow-lg hover:opacity-90",style:{background:`linear-gradient(to right, ${e.primary}, ${e.secondary})`},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher"]})})]})]}),L.length>0&&t("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:e.primaryLight},children:[t("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:e.textPrimary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.secondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Dates disponibles"]}),r("div",{className:"flex flex-wrap gap-2 md:gap-3",children:ge.map(a=>{const s=be.includes(a),i=ne===a,m=new Date(a),p=m.toLocaleDateString("fr-FR",{weekday:"short"}),g=m.getDate();return t("button",{onClick:()=>s&&xe(a),className:`flex flex-col items-center justify-center w-14 h-14 md:w-16 md:h-16 rounded-xl border-2 transition-all duration-200 ${i?"text-white shadow-md":s?"bg-white hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,style:i?{backgroundColor:e.primary,borderColor:e.primaryDark}:{borderColor:e.primaryLight,color:s?e.textPrimary:"inherit"},disabled:!s,children:[r("span",{className:"text-xs font-medium",children:p}),r("span",{className:"text-lg font-bold",children:g})]},a)})})]}),t("section",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-lg border",style:{borderColor:e.primaryLight},children:[t("h2",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",style:{color:e.textPrimary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.secondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Horaires disponibles"]}),X.length===0?t("div",{className:"text-center py-8",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.textSecondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("p",{className:"mt-3",style:{color:e.textSecondary},children:L.length===0?"Aucun trajet trouvé. Veuillez effectuer une recherche.":"Aucun horaire disponible pour cette date."})]}):r("div",{className:"space-y-3",children:X.map(a=>r("div",{onClick:()=>we(a),className:`p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer ${(l==null?void 0:l.id)===a.id?"border-indigo-500 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:shadow-sm"}`,style:(l==null?void 0:l.id)===a.id?{borderColor:e.primary,backgroundColor:e.primaryLight}:{borderColor:e.primaryLight},children:t("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[t("div",{className:"flex items-center gap-3",children:[r("div",{className:"p-2 sm:p-3 rounded-lg",style:{backgroundColor:e.primaryLight},children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 sm:h-6 w-5 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.primary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),t("div",{children:[t("p",{className:"font-bold",style:{color:e.textPrimary},children:[r("span",{className:"text-lg sm:text-xl",style:{color:e.primary},children:a.time})," — ",a.departure," → ",a.arrival]}),r("p",{className:"text-sm",style:{color:e.textSecondary},children:new Date(a.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]})]}),t("div",{className:"text-right",children:[t("p",{className:"font-bold text-lg",style:{color:e.primary},children:[a.price.toLocaleString("fr-FR")," FCFA"]}),t("div",{className:"flex items-center justify-end gap-1",children:[r("span",{className:`inline-block w-2 h-2 rounded-full ${(a.remainingSeats||0)>10?"bg-green-500":(a.remainingSeats||0)>5?"bg-yellow-500":"bg-red-500"}`}),t("span",{className:"text-xs",style:{color:e.textSecondary},children:[a.remainingSeats??"NC"," places"]})]})]})]})},a.id))})]})]}),t("div",{className:"bg-white p-4 md:p-6 rounded-2xl shadow-xl border",style:{borderColor:e.primaryLight,position:"sticky",top:"1.5rem",alignSelf:"flex-start"},children:[r("h2",{className:"text-xl md:text-2xl font-bold mb-4",style:{background:`linear-gradient(to right, ${e.primary}, ${e.secondary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Détails de la réservation"}),l?t("div",{className:"rounded-xl p-4 border-2 space-y-2",style:{backgroundColor:e.primaryLight,borderColor:e.primary},children:[t("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[t("div",{children:[t("p",{className:"font-bold",style:{color:e.primaryDark},children:[l.departure," → ",l.arrival]}),r("p",{className:"text-sm",style:{color:e.primary},children:new Date(l.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}),r("div",{className:"bg-white rounded-lg px-2 py-1 shadow-sm",children:r("p",{className:"font-medium",style:{color:e.primary},children:l.time})})]}),t("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center pt-2 border-t",style:{borderColor:e.primary},children:[t("p",{className:"text-sm",style:{color:e.primaryDark},children:[r("span",{className:"font-medium",children:"Prix unitaire:"})," ",l.price.toLocaleString("fr-FR")," FCFA"]}),l.remainingSeats!==void 0&&t("div",{className:"flex items-center gap-1",children:[r("span",{className:`inline-block w-2 h-2 rounded-full ${l.remainingSeats>10?"bg-green-500":l.remainingSeats>5?"bg-yellow-500":"bg-red-500"}`}),t("span",{className:"text-xs font-medium",style:{color:e.primaryDark},children:[l.remainingSeats," restantes"]})]})]}),t("div",{className:"mt-2 text-sm font-medium",style:{color:e.textSecondary},children:["Statut d'embarquement prévu : ",r("span",{className:"text-yellow-600",children:"En attente"})]})]}):t("div",{className:"text-center py-6 bg-gray-50 rounded-xl border-2 border-dashed",style:{borderColor:e.primaryLight,color:e.textSecondary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),r("p",{className:"mt-2",children:"Sélectionnez un trajet pour continuer"})]}),t("div",{className:"bg-gray-50 p-1 rounded-xl inline-flex w-full mt-4",children:[r("button",{onClick:()=>G("aller_simple"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 text-sm md:text-base ${u==="aller_simple"?"bg-white shadow-sm border font-medium":"hover:bg-gray-100"}`,style:u==="aller_simple"?{borderColor:e.primary,color:e.primary,backgroundColor:"white"}:{color:e.textSecondary},children:"Aller simple"}),r("button",{onClick:()=>G("aller_retour"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 text-sm md:text-base ${u==="aller_retour"?"bg-white shadow-sm border font-medium":"hover:bg-gray-100"}`,style:u==="aller_retour"?{borderColor:e.primary,color:e.primary,backgroundColor:"white"}:{color:e.textSecondary},children:"Aller-retour"})]}),t("div",{className:"space-y-4 mt-4",children:[t("div",{className:"space-y-2",children:[r("label",{className:"block text-sm font-medium",style:{color:e.textPrimary},children:"Nom complet du passager*"}),t("div",{className:"relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.textSecondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r("input",{type:"text",value:b,onChange:a=>he(a.target.value),className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",required:!0,placeholder:"Jean Dupont",style:{borderColor:e.primaryLight,color:e.textPrimary,"--tw-ring-color":e.primary}})]})]}),t("div",{className:"space-y-2",children:[r("label",{className:"block text-sm font-medium",style:{color:e.textPrimary},children:"Numéro de téléphone*"}),t("div",{className:"relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:e.textSecondary},children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),r("input",{type:"tel",value:f,onChange:a=>ue(a.target.value),className:"w-full pl-10 border-2 px-4 py-2 md:py-3 rounded-xl focus:ring-2 focus:ring-offset-1 transition-all duration-200",required:!0,placeholder:"+225 XX XX XX XX",style:{borderColor:e.primaryLight,color:e.textPrimary,"--tw-ring-color":e.primary}})]})]})]}),t("div",{className:"space-y-4 mt-4",children:[t("div",{className:"space-y-2",children:[r("label",{className:"block text-sm font-medium",style:{color:e.textPrimary},children:"Nombre de places (Aller)*"}),t("div",{className:"flex items-center gap-3",children:[r("button",{onClick:()=>_(a=>Math.max(1,a-1)),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:e.textPrimary},disabled:!l||d<=1,children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),r("span",{className:"flex-1 text-center py-2 font-bold rounded-lg",style:{backgroundColor:e.primaryLight,color:e.primaryDark},children:d}),r("button",{onClick:()=>_(a=>a+1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:e.textPrimary},disabled:!l||l.remainingSeats!==void 0&&d>=l.remainingSeats,children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),u==="aller_retour"&&t("div",{className:"space-y-2",children:[r("label",{className:"block text-sm font-medium",style:{color:e.textPrimary},children:"Nombre de places (Retour)"}),t("div",{className:"flex items-center gap-3",children:[r("button",{onClick:()=>F(a=>Math.max(0,a-1)),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:e.textPrimary},disabled:!l||v<=0,children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),r("span",{className:"flex-1 text-center py-2 font-bold rounded-lg",style:{backgroundColor:e.primaryLight,color:e.primaryDark},children:v}),r("button",{onClick:()=>F(a=>a+1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:e.textPrimary},disabled:!l||l.remainingSeats!==void 0&&d+v>=l.remainingSeats,children:r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]}),t("div",{className:"pt-4 border-t mt-4 space-y-4",style:{borderColor:e.primaryLight},children:[t("div",{className:"space-y-2",children:[r("label",{className:"block text-sm font-medium",style:{color:e.textPrimary},children:"Mode de paiement"}),t("div",{className:"grid grid-cols-2 gap-2",children:[t("button",{onClick:()=>U("espèces"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 text-sm md:text-base ${C==="espèces"?"font-medium":""}`,style:C==="espèces"?{borderColor:e.primary,backgroundColor:e.primaryLight,color:e.primaryDark}:{borderColor:e.primaryLight,color:e.textSecondary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Espèces"]}),t("button",{onClick:()=>U("mobile_money"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 text-sm md:text-base ${C==="mobile_money"?"font-medium":""}`,style:C==="mobile_money"?{borderColor:e.primary,backgroundColor:e.primaryLight,color:e.primaryDark}:{borderColor:e.primaryLight,color:e.textSecondary},children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Mobile Money"]})]})]}),r("div",{className:"p-4 rounded-xl",style:{background:`linear-gradient(to right, ${e.primaryLight}, ${e.secondary}20)`},children:t("div",{className:"flex justify-between items-center",children:[r("span",{className:"text-sm font-medium",style:{color:e.textPrimary},children:"Total à payer"}),t("span",{className:"text-xl md:text-2xl font-bold",style:{color:e.primaryDark},children:[R.toLocaleString("fr-FR")," FCFA"]})]})})]}),r("button",{onClick:ve,disabled:!l||!b||!f||d<1||Y,className:`w-full py-3 md:py-4 px-6 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg mt-6 ${!l||!b||!f||d<1?"bg-gray-300 text-gray-500 cursor-not-allowed":"text-white transform hover:-translate-y-1 hover:shadow-xl"}`,style:!l||!b||!f||d<1?{}:{background:`linear-gradient(to right, ${e.primary}, ${e.secondary})`},children:Y?t(Z,{children:[t("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Traitement en cours..."]}):t(Z,{children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Valider la réservation"]})})]}),r("div",{className:"lg:col-span-3 h-2 mt-6 rounded-full",style:{background:`linear-gradient(to right, ${e.primary}, ${e.secondary})`}})]})};export{Te as default};

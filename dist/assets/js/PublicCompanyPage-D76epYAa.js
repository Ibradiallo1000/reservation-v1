import{d as D,j as e,x as W,k,S as re,A as G,I as Q,r as d,p as ie,v as J,m as le,w as ne,J as oe,n as ce,u as L,K as de,L as me,P as R,z as xe,O as H,Q as he,V as ue,W as pe,Y as fe,$ as je,a0 as K,C as X,G as ge,X as O,a1 as be,a2 as ye,a3 as Z,a4 as ee,M as we,t as Ne}from"./react-A-4nP3fl.js";import{h as ve,f as q,m as ke,q as B,w as U,e as Y}from"./firebase-CbfwkGbo.js";import{d as z}from"../index-ChphXJpr.js";import{m as x,A as $}from"./proxy-B2yho2w5.js";import{h as S,s as y}from"./color-CDd1PckM.js";import{u as Ce}from"./useCompanyTheme-gGJW-mZp.js";import"./vendor-CCJV4Wg0.js";const Se=({company:s,onSearch:a})=>{const[t,i]=D.useState(""),[n,l]=D.useState(""),c=r=>{r.preventDefault(),a(t,n)};return e.jsxs("section",{className:"relative w-full min-h-[700px] md:min-h-[800px] flex items-center justify-center overflow-hidden",children:[s.banniereUrl&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx(W.LazyLoadImage,{src:s.banniereUrl,alt:`BanniÃ¨re ${s.nom}`,className:"w-full h-full object-cover object-[center_60%]",effect:"opacity"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-6xl px-4 text-center",children:[e.jsxs(x.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"mb-10",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight",children:s.accroche||"RÃ©servez vos trajets facilement"}),s.instructionRecherche&&e.jsx("p",{className:"text-lg md:text-xl text-white/90 font-semibold mt-2 max-w-2xl mx-auto",children:s.instructionRecherche})]}),e.jsxs(x.form,{onSubmit:c,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.5},className:"flex flex-col md:flex-row items-center justify-center gap-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl shadow-[inset_0_1px_4px_rgba(255,255,255,0.1)] p-4 md:p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(k,{className:"h-5 w-5 text-white/70"})}),e.jsx("input",{type:"text",placeholder:"Ville de dÃ©part",value:t,onChange:r=>i(r.target.value),required:!0,className:"pl-10 pr-3 py-3 w-full bg-white/10 border border-white/20 text-white rounded-lg placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white"})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(k,{className:"h-5 w-5 text-white/70"})}),e.jsx("input",{type:"text",placeholder:"Ville d'arrivÃ©e",value:n,onChange:r=>l(r.target.value),required:!0,className:"pl-10 pr-3 py-3 w-full bg-white/10 border border-white/20 text-white rounded-lg placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white"})]}),e.jsxs(x.button,{whileHover:{scale:1.03},whileTap:{scale:.97},type:"submit",className:"w-full md:w-auto px-6 py-3 rounded-lg font-bold text-white text-lg flex items-center justify-center gap-2",style:{backgroundColor:s.couleurPrimaire||"#3B82F6"},children:[e.jsx(re,{className:"h-5 w-5"}),"Rechercher",e.jsx(G,{className:"h-5 w-5"})]})]})]}),e.jsx(x.div,{animate:{y:[0,10,0]},transition:{repeat:1/0,duration:2},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"h-8 w-5 border-2 border-white rounded-full flex justify-center",children:e.jsx(x.div,{animate:{y:[0,6]},transition:{repeat:1/0,duration:1.5},className:"h-2 w-1 bg-white rounded-full mt-1"})})}),e.jsx("div",{className:"absolute bottom-0 w-full h-12 bg-gradient-to-t from-[#0f172a] to-transparent z-10 rounded-t-3xl"})]})},$e=({trip:s,index:a,onClick:t,isActive:i=!1})=>{const n=a%2===0?"bg-white/10 hover:bg-white/15":"bg-white/5 hover:bg-white/10";return e.jsxs(x.div,{whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:i?1:.8,y:0,transition:{duration:.3}},className:`w-full p-4 rounded-xl shadow-md cursor-pointer flex items-center gap-4 backdrop-blur-md border border-white/20 transition-all duration-300 ${n}`,onClick:t,"aria-label":`Trajet de ${s.departure} Ã  ${s.arrival} pour ${s.price} FCFA`,children:[e.jsx("div",{className:`p-2 rounded-lg ${a%2===0?"bg-white/20":"bg-white/10"}`,children:e.jsx(Q,{className:"h-5 w-5 text-yellow-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-1 truncate",children:[s.departure," â†’ ",s.arrival]}),e.jsxs("p",{className:"text-sm text-yellow-300",children:["Ã  partir de ",s.price.toLocaleString()," FCFA"]})]}),e.jsx(G,{className:"h-5 w-5 text-white/50"})]})},Ie=({suggestedTrips:s,colors:a})=>{const[t,i]=d.useState(0),[n,l]=d.useState(!1),c=d.useRef(null);d.useEffect(()=>{if(s.length<=1)return;const h=setInterval(()=>{n||i(m=>(m+1)%s.length)},4e3);return()=>clearInterval(h)},[s.length,n]);const r=d.useCallback(h=>{console.log("Trajet sÃ©lectionnÃ©:",h)},[]);return e.jsx("div",{className:"relative h-[220px] overflow-hidden",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),ref:c,children:e.jsx($,{mode:"wait",children:e.jsx(x.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.5},className:"absolute inset-0 flex flex-col gap-4",children:s.slice(t,t+3).map((h,m)=>e.jsx($e,{trip:h,index:t+m,onClick:()=>r(h),isActive:m===0},`${t}-${m}`))},t)})})},F=[{icon:ie,title:"SÃ©curitÃ© maximale",description:"VÃ©hicules contrÃ´lÃ©s rÃ©guliÃ¨rement et conducteurs professionnels pour votre sÃ©curitÃ©."},{icon:J,title:"PonctualitÃ©",description:"DÃ©parts et arrivÃ©es Ã  lâ€™heure grÃ¢ce Ã  notre systÃ¨me de gestion optimisÃ©e."},{icon:le,title:"Support 24/7",description:"Notre Ã©quipe est disponible Ã  tout moment pour rÃ©pondre Ã  vos questions."},{icon:Q,title:"Confort premium",description:"SiÃ¨ges spacieux, climatisation et WiFi Ã  bord pour votre confort."}];function Ae({colors:s}){const[a,t]=d.useState(0),i=c=>{t(r=>c==="prev"?r===0?F.length-1:r-1:r===F.length-1?0:r+1)};d.useEffect(()=>{const c=setInterval(()=>i("next"),5e3);return()=>clearInterval(c)},[]);const n=F[a],l=n.icon;return e.jsx(x.section,{className:"mt-[-220px] px-4 pb-10 bg-gradient-to-b from-black/20 to-black/40",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4 text-white",children:"Nos services exclusifs"}),e.jsx("div",{className:"h-1 w-24 mx-auto rounded-full bg-gradient-to-r from-transparent via-white to-transparent"})]}),e.jsx("div",{className:"relative h-[120px] md:h-[200px] overflow-hidden rounded-xl",children:e.jsx($,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.6},className:"absolute inset-0 p-6 flex flex-col justify-center backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-full",style:{background:S(s.primary,.2)},children:e.jsx(l,{className:"h-6 w-6",style:{color:s.primary}})}),e.jsx("h3",{className:"text-2xl font-semibold text-white",children:n.title})]}),e.jsx("p",{className:"text-gray-300 text-sm md:text-base",children:n.description})]},a)})}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[e.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition",onClick:()=>i("prev"),children:e.jsx(ne,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"flex items-center gap-2",children:F.map((c,r)=>e.jsx("button",{className:`w-3 h-3 rounded-full transition ${a===r?"bg-white w-6":"bg-white/30"}`,onClick:()=>t(r)},r))}),e.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition",onClick:()=>i("next"),children:e.jsx(oe,{className:"h-5 w-5 text-white"})})]})]})})}const Fe=({companyId:s,onSuccess:a,primaryColor:t})=>{const[i,n]=d.useState(""),[l,c]=d.useState(0),[r,h]=d.useState(""),[m,p]=d.useState(null),[j,w]=d.useState(!1),N=async o=>{if(o.preventDefault(),!i.trim()||l<1||!r.trim()){p("Veuillez remplir tous les champs et choisir une note.");return}try{w(!0),await ve(q(z,"avis"),{nom:i,note:l,commentaire:r,visible:!1,companyId:s,createdAt:ke()}),p("Merci pour votre avis ! Il sera publiÃ© aprÃ¨s validation."),n(""),c(0),h(""),a&&a()}catch(v){console.error(v),p("Erreur lors de l'envoi. Veuillez rÃ©essayer.")}finally{w(!1)}};return e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[m&&e.jsx("p",{className:"text-sm text-gray-600 italic",children:m}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Votre nom"}),e.jsx("input",{type:"text",value:i,onChange:o=>n(o.target.value),className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre note"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(o=>e.jsx(ce,{onClick:()=>c(o),className:`h-6 w-6 cursor-pointer ${o<=l?"text-yellow-400":"text-gray-300"}`,fill:o<=l?"#facc15":"none"},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Votre avis"}),e.jsx("textarea",{value:r,onChange:o=>h(o.target.value),className:"w-full border px-3 py-2 rounded",rows:4,required:!0})]}),e.jsx("button",{type:"submit",disabled:j,className:"text-white px-4 py-2 rounded hover:opacity-90 transition",style:{backgroundColor:t},children:j?"Envoi en cours...":"Envoyer mon avis"})]})},Le=({company:s})=>{const[a,t]=d.useState(!1);L();const i=new Date().getFullYear(),{id:n,slug:l,nom:c,couleurPrimaire:r,couleurSecondaire:h,description:m,email:p,telephone:j,adresse:w,horaires:N,socialMedia:o={},footerConfig:v={}}=s,{showAbout:C=!0,showContact:T=!0,showSocial:V=!0,showTestimonials:E=!0,showLegalLinks:I=!0,customLinks:u=[]}=v;return e.jsxs("footer",{className:"w-full",style:{backgroundColor:h||"#f8fafc",color:"#1e293b"},children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[C&&e.jsxs(x.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(de,{className:"h-5 w-5",style:{color:r}}),e.jsx("h3",{className:"text-lg font-semibold",children:"Ã€ propos"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:m||"Votre compagnie de transport prÃ©fÃ©rÃ©e, offrant des services de qualitÃ©."})]}),T&&e.jsxs(x.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(me,{className:"h-5 w-5",style:{color:r}}),e.jsx("h3",{className:"text-lg font-semibold",children:"Contact"})]}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[j&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("a",{href:`tel:${j}`,className:"hover:underline",children:j})]}),p&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("a",{href:`mailto:${p}`,className:"hover:underline",children:p})]}),w&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:w})]}),N&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:N})]})]})]}),V&&Object.values(o).some(Boolean)&&e.jsxs(x.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{className:"h-5 w-5",style:{color:r}}),e.jsx("h3",{className:"text-lg font-semibold",children:"Suivez-nous"})]}),e.jsxs("div",{className:"flex gap-4",children:[o.facebook&&e.jsx("a",{href:o.facebook,target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:e.jsx(he,{className:"h-6 w-6 hover:opacity-80 transition"})}),o.instagram&&e.jsx("a",{href:o.instagram,target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:e.jsx(ue,{className:"h-6 w-6 hover:opacity-80 transition"})}),o.twitter&&e.jsx("a",{href:o.twitter,target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:e.jsx(pe,{className:"h-6 w-6 hover:opacity-80 transition"})}),o.linkedin&&e.jsx("a",{href:o.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",children:e.jsx(fe,{className:"h-6 w-6 hover:opacity-80 transition"})}),o.youtube&&e.jsx("a",{href:o.youtube,target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",children:e.jsx(je,{className:"h-6 w-6 hover:opacity-80 transition"})})]})]}),E&&e.jsx(x.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{className:"h-5 w-5",style:{color:r}}),e.jsx("h3",{className:"text-lg font-semibold",children:"Avis clients"})]}),e.jsxs(x.button,{onClick:()=>t(!a),className:"flex items-center justify-between px-4 py-2 rounded-lg text-sm font-medium transition-all",style:{backgroundColor:r||"#3B82F6",color:"white"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("span",{children:"Donner votre avis"}),a?e.jsx(K,{className:"h-4 w-4 ml-2"}):e.jsx(X,{className:"h-4 w-4 ml-2"})]}),a&&e.jsx(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx("div",{className:"mt-4",children:e.jsx(Fe,{companyId:n,primaryColor:r||"#3B82F6",onSuccess:()=>t(!1)})})})]})})]}),(I||(u==null?void 0:u.length)>0)&&e.jsx("div",{className:"border-t py-6 text-center text-sm",style:{borderColor:r?`${r}20`:"#e2e8f0"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-2",children:[I&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`/compagnie/${l}/mentions-legales`,className:"hover:underline",children:"Mentions lÃ©gales"}),e.jsx("a",{href:`/compagnie/${l}/confidentialite`,className:"hover:underline",children:"Politique de confidentialitÃ©"}),e.jsx("a",{href:`/compagnie/${l}/cgu`,className:"hover:underline",children:"Conditions gÃ©nÃ©rales"}),e.jsx("a",{href:`/compagnie/${l}/cookies`,className:"hover:underline",children:"Politique des cookies"})]}),u==null?void 0:u.map((b,A)=>e.jsx("a",{href:b.url,className:"hover:underline",target:b.external?"_blank":"_self",rel:b.external?"noopener noreferrer":"",children:b.label},A))]}),e.jsxs("p",{children:["Â© ",i," ",c||"Notre Compagnie",". Tous droits rÃ©servÃ©s."]})]})})]})},Te=({agence:s,primaryColor:a,classes:t,t:i})=>e.jsx(x.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:`${t.card} p-4 my-2 rounded-lg cursor-pointer`,whileHover:{backgroundColor:S(a,.3),transition:{duration:.2}},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1 w-3 h-3 rounded-full",style:{backgroundColor:a}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.nomAgence}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 opacity-70"}),e.jsx("span",{children:s.pays})]}),s.quartier&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 opacity-70"}),e.jsx("span",{children:s.quartier})]}),s.adresse&&e.jsxs("div",{className:"col-span-2 flex items-start gap-2",children:[e.jsx(k,{className:"h-4 w-4 opacity-70 mt-0.5"}),e.jsx("span",{children:s.adresse})]}),s.telephone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 opacity-70"}),e.jsx("a",{href:`tel:${s.telephone}`,className:"hover:underline",children:s.telephone})]})]})]})]})}),Ve=({groupedByVille:s,openVilles:a,toggleVille:t,onClose:i,primaryColor:n,classes:l,t:c})=>e.jsx(x.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.6},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:i,children:e.jsxs(x.div,{className:"relative w-full max-w-2xl max-h-[80vh] overflow-y-auto rounded-xl",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:r=>r.stopPropagation(),style:{backgroundColor:n},children:[e.jsxs("div",{className:"sticky top-0 p-4 bg-white/10 backdrop-blur-md flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:c("ourAgencies")}),e.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-white/20 transition","aria-label":c("close"),children:e.jsx(O,{className:"h-5 w-5 text-white"})})]}),e.jsx("div",{className:"p-4",children:Object.entries(s).map(([r,h])=>e.jsxs("div",{className:"mb-4",children:[e.jsxs(x.button,{onClick:()=>t(r),className:`w-full text-left py-3 px-4 font-semibold text-lg rounded-lg flex justify-between items-center ${l.card}`,whileHover:{scale:1.01},style:{backgroundColor:n,color:"#fff"},children:[e.jsx("span",{children:r}),a[r]?e.jsx(K,{className:"h-5 w-5"}):e.jsx(X,{className:"h-5 w-5"})]}),e.jsx($,{children:a[r]&&e.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"pl-4 border-l-2 mt-2 overflow-hidden",children:h.map(m=>e.jsx(Te,{agence:m,primaryColor:n,classes:l,t:c},m.id))})})]},r))})]})}),Ee=({message:s="Chargement...",colors:a})=>e.jsxs("div",{className:"flex items-center justify-center min-h-screen text-lg",style:{backgroundColor:a.background,color:a.text},children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 mr-4",style:{borderColor:a.primary}}),s]}),Pe=({error:s,colors:a,classes:t,t:i})=>{const n=L();return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",style:{background:a.background,color:a.text},children:e.jsxs("div",{className:`p-4 rounded-lg max-w-md ${t.card}`,children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:i("error")}),e.jsx("p",{children:s}),e.jsx("button",{onClick:()=>n("/"),className:`mt-4 px-4 py-2 rounded ${t.button}`,style:{backgroundColor:a.primary,color:a.text},children:i("backToHome")})]})})},qe=({message:s="La page demandÃ©e est introuvable.",primaryColor:a,buttonLabel:t="Retour Ã  l'accueil"})=>{const i=L();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black text-white p-6",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center max-w-md",children:[e.jsx(be,{className:"mx-auto mb-4 h-16 w-16 text-red-500"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Erreur 404"}),e.jsx("p",{className:"mb-6 text-gray-300",children:s}),e.jsx("button",{onClick:()=>i("/"),className:"px-6 py-3 rounded-lg font-semibold text-white transition shadow-lg",style:{backgroundColor:a},children:t})]})})},ze=({onClose:s,navigate:a,onShowAgencies:t,slug:i,colors:n,classes:l,config:c,t:r})=>e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"fixed top-20 right-4 left-4 z-50 bg-white/10 backdrop-blur-xl rounded-lg shadow-lg p-4",children:e.jsxs("nav",{className:"flex flex-col gap-4",children:[e.jsxs("button",{onClick:()=>{t(),s()},className:`flex items-center gap-2 px-4 py-2 rounded-md transition ${l.button}`,children:[e.jsx(k,{className:"h-5 w-5"}),r("ourAgencies")]}),e.jsxs("button",{onClick:()=>{a(`/compagnie/${i}/mes-reservations`),s()},className:`flex items-center gap-2 px-4 py-2 rounded-md transition ${l.button}`,children:[e.jsx(ye,{className:"h-5 w-5"}),r("myBookings")]}),e.jsxs("button",{onClick:()=>{a(`/compagnie/${i}/contact`),s()},className:`flex items-center gap-2 px-4 py-2 rounded-md transition ${l.button}`,children:[e.jsx(R,{className:"h-5 w-5"}),r("contact")]}),e.jsxs("button",{onClick:()=>{a("/login"),s()},className:`flex items-center gap-2 px-4 py-2 rounded-md transition ${l.button}`,children:[e.jsx(Z,{className:"h-5 w-5"}),r("login")]})]})}),Re=()=>{const{i18n:s}=ee(),a=t=>{s.changeLanguage(t)};return e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("button",{onClick:()=>a("fr"),className:"hover:underline",children:"ðŸ‡«ðŸ‡·"}),e.jsx("button",{onClick:()=>a("en"),className:"hover:underline",children:"ðŸ‡¬ðŸ‡§"})]})},Me=({company:s,slug:a,colors:t,classes:i,config:n,menuOpen:l,setMenuOpen:c,setShowAgences:r,navigate:h,t:m})=>{const p="/default-logo.png";return e.jsxs("header",{className:`sticky top-0 z-50 px-4 py-3 ${i.header}`,style:{backgroundColor:S(t.primary,.95),backdropFilter:"blur(10px)"},children:[e.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-white shadow-md border border-gray-200 overflow-hidden",children:e.jsx(W.LazyLoadImage,{src:s.logoUrl||p,alt:`Logo ${s.nom||"Compagnie"}`,effect:"opacity",className:"w-full h-full object-contain",onError:j=>j.target.src=p})}),e.jsx("h1",{className:"text-xl font-bold tracking-tight ml-2",style:{color:y(t.primary),textShadow:"0 1px 3px rgba(0,0,0,0.4)"},children:s.nom||m("ourCompany")}),e.jsx("div",{className:"ml-4 hidden md:block",children:e.jsx(Re,{})})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("button",{onClick:()=>c(!l),className:`p-2 rounded-md transition-all ${l?"bg-white/10":""}`,style:{color:y(t.primary),border:`1px solid ${S(y(t.primary),.2)}`},"aria-label":"Menu",children:l?e.jsx(O,{className:"h-6 w-6",strokeWidth:2.5}):e.jsx(we,{className:"h-6 w-6",strokeWidth:2.5})})}),e.jsxs("nav",{className:"hidden md:flex gap-6 items-center text-sm",children:[e.jsx("button",{onClick:()=>r(!0),className:`font-medium ${n.animations}`,style:{color:y(t.primary)},children:m("ourAgencies")}),e.jsx("button",{onClick:()=>h(`/compagnie/${a}/mes-reservations`),className:`font-medium ${n.animations}`,style:{color:y(t.primary)},children:m("myBookings")}),e.jsx("button",{onClick:()=>h(`/compagnie/${a}/contact`),className:`font-medium ${n.animations}`,style:{color:y(t.primary)},children:m("contact")}),e.jsx("button",{onClick:()=>h("/login"),className:`p-2 rounded-full ${i.button}`,style:{backgroundColor:t.secondary||S(y(t.primary),.2),color:y(t.primary)},"aria-label":m("login"),title:m("login"),children:e.jsx(Z,{className:"h-5 w-5"})})]})]}),e.jsx($,{children:l&&e.jsx(ze,{onClose:()=>c(!1),navigate:j=>{h(j),c(!1)},onShowAgencies:()=>{r(!0),c(!1)},slug:a,colors:t,classes:i,config:n,t:m})})]})},Ge=()=>{const{slug:s}=Ne(),a=L(),{t}=ee(),[i,n]=d.useState(null),[l,c]=d.useState([]),[r,h]=d.useState([]),[m,p]=d.useState(!1),[j,w]=d.useState(!1),[N,o]=d.useState(!0),[v,C]=d.useState(null),[T,V]=d.useState({}),E=f=>{V(g=>({...g,[f]:!g[f]}))},I=d.useMemo(()=>l.reduce((f,g)=>(f[g.ville]||(f[g.ville]=[]),f[g.ville].push(g),f),{}),[l]),{colors:u,classes:b,config:A}=Ce(i),M=d.useCallback(async()=>{if(!s||s.trim()===""){C(t("companyNotFound")),o(!1);return}try{o(!0);const f=B(q(z,"companies"),U("slug","==",s)),g=await Y(f);if(g.empty){C(t("companyNotFound"));return}const P=g.docs[0],se={id:P.id,...P.data()};n(se);const te=B(q(z,"agences"),U("companyId","==",P.id)),ae=await Y(te);c(ae.docs.map(_=>({id:_.id,..._.data()})))}catch(f){console.error("Erreur de chargement:",f),C(t("loadingError"))}finally{o(!1)}},[s,t]);return d.useEffect(()=>{M()},[M]),N?e.jsx(Ee,{message:t("loading"),colors:{primary:"",text:"",background:""}}):v?e.jsx(Pe,{error:v,colors:u,classes:b,t}):!i||!s?e.jsx(qe,{primaryColor:u.primary}):e.jsxs("div",{className:`min-h-screen flex flex-col ${A.typography}`,style:{background:u.background,color:u.text},children:[e.jsx(Me,{company:i,colors:u,classes:b,config:A,menuOpen:j,setMenuOpen:w,setShowAgences:p,slug:s,t,navigate:a}),e.jsx(Se,{company:i,onSearch:(f,g)=>{a(`/compagnie/${s}/resultats?departure=${encodeURIComponent(f.trim())}&arrival=${encodeURIComponent(g.trim())}`)}}),e.jsx(Ie,{suggestedTrips:r,colors:u}),e.jsx(Ae,{colors:u}),e.jsx($,{children:m&&e.jsx(Ve,{groupedByVille:I,openVilles:T,toggleVille:E,onClose:()=>p(!1),primaryColor:u.primary,classes:b,t})}),e.jsx(Le,{company:i})]})};export{Ge as default};

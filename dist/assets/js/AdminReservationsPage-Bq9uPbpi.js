import{r as p,a as s,j as a}from"./react-DB_4kGOy.js";import{z as h,x as u}from"./firebase-lLzYRzUk.js";import{d as b}from"../index-Bkmir__O.js";import"./vendor-C-DAJou6.js";const S=()=>{const[c,m]=p.useState([]);return p.useEffect(()=>{(async()=>{const n=(await h(u(b,"reservations"))).docs.map(o=>{var d,i;const t=o.data();return{companySlug:((d=t.trip)==null?void 0:d.company)||"—",date:((i=t.trip)==null?void 0:i.date)||"",status:t.status||"payée",total:t.total||0}}),e={};n.forEach(o=>{const t=o.companySlug;e[t]||(e[t]={company:t,totalReservations:0,totalAmount:0,byStatus:{}}),e[t].totalReservations++,e[t].totalAmount+=o.total,e[t].byStatus[o.status]=(e[t].byStatus[o.status]||0)+1}),m(Object.values(e))})()},[]),s("div",{className:"p-6",children:[a("h1",{className:"text-2xl font-bold mb-4",children:"Statistiques des Réservations"}),a("div",{className:"overflow-x-auto",children:s("table",{className:"min-w-full table-auto border",children:[a("thead",{className:"bg-gray-100",children:s("tr",{children:[a("th",{className:"border px-4 py-2",children:"Compagnie"}),a("th",{className:"border px-4 py-2",children:"Nombre total"}),a("th",{className:"border px-4 py-2",children:"Montant total"}),a("th",{className:"border px-4 py-2",children:"Statuts"})]})}),s("tbody",{children:[c.map((r,l)=>s("tr",{children:[a("td",{className:"border px-4 py-2 font-semibold",children:r.company}),a("td",{className:"border px-4 py-2 text-center",children:r.totalReservations}),s("td",{className:"border px-4 py-2",children:[r.totalAmount.toLocaleString()," FCFA"]}),a("td",{className:"border px-4 py-2",children:Object.entries(r.byStatus).map(([n,e])=>s("p",{children:[n," : ",e]},n))})]},l)),c.length===0&&a("tr",{children:a("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucune donnée disponible."})})]})]})})]})};export{S as default};

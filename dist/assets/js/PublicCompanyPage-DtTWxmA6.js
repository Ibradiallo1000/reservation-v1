const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CBC3XRHi.js","assets/js/react-KXT1Riez.js","assets/css/react-DOfe2hmq.css","assets/js/firebase-DYTOaTLw.js","assets/js/vendor-B27hBV_J.js","assets/css/index-Bqn1kmil.css"])))=>i.map(i=>d[i]);
import{m as v,A as M,i as te,d as k,c as ge,_ as fe}from"../index-CBC3XRHi.js";import{j as e,a as t,aB as T,r as h,bx as ae,e as q,b as O,a2 as xe,T as be,b1 as pe,aC as ye,aD as ve,b0 as we,at as Ne,aE as ke,aF as Ce,by as Y,S as se,o as re,l as Se,I as $e,P as I,aw as Ae,M as le,ax as K,t as Fe,s as Le,v as Ee,w as Pe,Y as je,a3 as ie,a4 as ne,F as oe,bz as Te,G as _e,av as Re,ar as Ve,A as Ue,d as Be}from"./react-KXT1Riez.js";import{u as $,t as C,F as ze,x as De,r as ce,J as de,E as Ie,w as me}from"./firebase-DYTOaTLw.js";import"./vendor-B27hBV_J.js";const Me=({suggestions:a,company:r,onSelect:o})=>{const l=r.couleurPrimaire||"#2563eb",n=r.couleurSecondaire||"#f3f4f6",s=i=>typeof i=="number"?i.toLocaleString("fr-FR"):void 0,c=i=>!i||i.length===0?"Horaires variables":i.length===7?"Départs quotidiens":`${i.length} départs / semaine`;return e("section",{className:"px-3 pt-4 pb-6",children:t("div",{className:"max-w-5xl mx-auto",children:[t("div",{className:"flex items-center justify-center gap-2 mb-5",children:[e(T,{size:20,style:{color:l}}),e("h2",{className:"text-lg font-bold text-black",children:"Destinations populaires"})]}),e("div",{className:"grid grid-cols-2 gap-4",children:a.slice(0,4).map((i,d)=>t("div",{className:"bg-white rounded-xl p-4 border transition-all duration-300 hover:-translate-y-1",style:{borderColor:`${l}30`,boxShadow:`0 4px 15px ${l}12`},children:[t("div",{className:"font-semibold text-sm leading-snug",children:[i.departure," →"," ",e("span",{style:{color:l},children:i.arrival})]}),i.price!==void 0&&t("div",{className:"mt-3 inline-block text-xs font-bold px-3 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:l},children:[s(i.price)," FCFA"]}),e("div",{className:"text-[11px] text-gray-500 mt-2",children:c(i.days)}),e("button",{onClick:()=>o(i.departure,i.arrival),className:"mt-4 w-full py-2 rounded-lg text-white text-sm font-semibold transition-all duration-300",style:{background:`linear-gradient(90deg, ${l}, ${n})`},children:"Réserver →"})]},d))})]})})},qe=({onSelectLanguage:a,delayMs:r=5e3})=>{const[o,l]=h.useState(!0);h.useEffect(()=>{const s=setTimeout(()=>{l(!1)},r);return()=>clearTimeout(s)},[r]);const n=s=>{te.changeLanguage(s),a(s),l(!1)};return o?e(M,{children:t(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.4},className:"fixed top-5 right-5 z-50 bg-white border border-gray-200 shadow-xl rounded-lg p-4 w-[300px] max-w-full",children:[t("div",{className:"flex items-start justify-between mb-2",children:[e("h3",{className:"text-sm font-bold text-gray-800",children:"Choisissez votre langue"}),e("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:e(ae,{className:"w-4 h-4"})})]}),t("div",{className:"flex justify-end gap-2",children:[e("button",{onClick:()=>n("fr"),className:"px-4 py-1.5 rounded-full text-sm font-medium shadow-sm",style:{backgroundColor:"#facc15",color:"#000"},children:"Français"}),e("button",{onClick:()=>n("en"),className:"px-4 py-1.5 rounded-full text-sm font-medium shadow-sm",style:{backgroundColor:"#1e293b",color:"#fff"},children:"English"})]})]})}):null},X=({value:a,onChange:r,placeholder:o="Choisir une ville",label:l,options:n=[],disabled:s=!1,id:c,className:i})=>{const d=c||"ville-combobox-"+Math.random().toString(36).slice(2,9),u=`${d}-list`,g=x=>{r(x??"")},b=h.useMemo(()=>Array.isArray(n)?n.filter(Boolean).map(x=>String(x)):[],[n]);return t("div",{className:i,children:[l&&e("label",{htmlFor:d,className:"block text-xs font-semibold text-gray-700 mb-1",children:l}),t("div",{children:[e("input",{id:d,list:u,value:a,onChange:x=>g(x.target.value),placeholder:o,disabled:s,className:"w-full px-3 py-2 rounded-lg border bg-white text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-orange-400/60 focus:border-orange-500","aria-label":l||o,autoComplete:"off"}),b.length>0&&e("datalist",{id:u,children:b.map((x,p)=>e("option",{value:x},p))})]})]})},Oe=a=>{const[r,o]=h.useState([]);return h.useEffect(()=>{if(!a)return;(async()=>{try{const n=await $(C(k,`companies/${a}/agences`)),c=(await Promise.all(n.docs.map(async g=>(await $(C(k,`companies/${a}/agences/${g.id}/weeklyTrips`))).docs.map(x=>x.data())))).flat(),i=c.map(g=>{var b,x;return(x=(b=g==null?void 0:g.departure)==null?void 0:b.toLowerCase())==null?void 0:x.trim()}),d=c.map(g=>{var b,x;return(x=(b=g==null?void 0:g.arrival)==null?void 0:b.toLowerCase())==null?void 0:x.trim()}),u=Array.from(new Set([...i,...d])).filter(Boolean);o(u)}catch(n){console.error("useVilleOptions ► lecture weeklyTrips échouée :",n),o([])}})()},[a]),r},Ye="https://images.unsplash.com/photo-1518684079-3c830dcef090?auto=format&fit=crop&w=1920&q=80",He=({company:a,onSearch:r})=>{const[o,l]=h.useState(""),[n,s]=h.useState(""),{t:c}=q(),i=O(),d=Oe(a.id),u=h.useRef(null);h.useEffect(()=>{if(u.current)try{u.current.setAttribute("fetchpriority","high")}catch{}},[a==null?void 0:a.banniereUrl]);const g=a.couleurPrimaire||"#FF6600",b=a.couleurSecondaire||"#FFD700",x=a.accroche||c("defaultSlogan"),p=!o.trim()||!n.trim()||o.trim().toLowerCase()===n.trim().toLowerCase(),N=y=>{y.preventDefault(),!p&&r(o.trim(),n.trim())};return t("section",{className:"relative overflow-hidden text-white pt-28 pb-20",style:{backgroundImage:`
          linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
          url(${a.banniereUrl||""}),
          url(${Ye})
        `,backgroundSize:"cover",backgroundPosition:"center"},children:[a.banniereUrl&&e("img",{ref:u,src:a.banniereUrl,alt:`Bannière ${a.nom}`,className:"absolute inset-0 w-full h-full object-cover opacity-0 pointer-events-none",decoding:"async",loading:"eager"}),t("div",{className:"max-w-5xl mx-auto px-4 text-center",children:[e("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-extrabold leading-tight drop-shadow-lg",children:x}),t("form",{onSubmit:N,className:"mt-12 mx-auto max-w-3xl rounded-2xl border border-white/30 bg-white/15 backdrop-blur-xl shadow-[0_20px_60px_rgba(0,0,0,.45)] p-6 md:p-8",children:[e("p",{className:"text-base md:text-lg font-semibold tracking-wide mb-6",style:{color:b},children:"Trouvez votre trajet"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{className:"text-left",children:[e("p",{className:"text-xs font-semibold uppercase mb-2",style:{color:b},children:c("departureCity")}),e(X,{value:o,onChange:l,options:d,placeholder:"Ex : Bamako"})]}),t("div",{className:"text-left",children:[e("p",{className:"text-xs font-semibold uppercase mb-2",style:{color:b},children:c("arrivalCity")}),e(X,{value:n,onChange:s,options:d,placeholder:"Ex : Dakar"})]}),t("div",{className:"md:col-span-2 mt-2 space-y-4",children:[t("button",{type:"submit",disabled:p,className:"w-full inline-flex items-center justify-center px-6 py-3 rounded-xl font-semibold text-white transition shadow-lg hover:brightness-110 disabled:opacity-60",style:{backgroundColor:g},children:[e(xe,{className:"h-5 w-5 mr-2"}),c("searchTrip")]}),t("button",{type:"button",onClick:()=>i(`/${a.slug}/mes-reservations`),className:"w-full inline-flex items-center justify-center px-6 py-2.5 rounded-xl font-semibold transition shadow-md hover:brightness-110",style:{backgroundColor:b,color:"#000"},children:[e(be,{className:"h-4 w-4 mr-2"}),"Retrouver mon billet"]})]})]})]})]}),e("div",{className:"pointer-events-none absolute bottom-0 inset-x-0 h-24 bg-gradient-to-t from-black/40 to-transparent"})]})},Z={wifi:{label:"Wi-Fi à bord",icon:Ce},climatisation:{label:"Bus climatisé",icon:ke},usb:{label:"Prise USB",icon:Ne},boisson:{label:"Boisson offerte",icon:we},sieges_confort:{label:"Sièges confort",icon:ve},tv:{label:"Écran / TV",icon:ye},eau_fraiche:{label:"Eau fraîche",icon:pe}},We=({services:a,primaryColor:r,secondaryColor:o})=>{if(!(a!=null&&a.length))return null;const l=a.filter(n=>Z[n]);return l.length?e("section",{className:"py-6 px-4",style:{backgroundColor:`${o}08`},children:t("div",{className:"max-w-5xl mx-auto",children:[t("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e(T,{size:18,style:{color:r}}),e("h2",{className:"text-lg font-semibold text-gray-900",children:"Services à bord"})]}),e("div",{className:"rounded-2xl overflow-hidden",style:{border:`1px solid ${r}20`,boxShadow:`0 6px 18px ${r}12`,backgroundColor:"#ffffff"},children:e("div",{className:"grid grid-cols-2 sm:grid-cols-3",style:{borderTop:`1px solid ${r}10`,borderLeft:`1px solid ${r}10`},children:l.map(n=>{const{icon:s,label:c}=Z[n];return t("div",{className:"p-4 flex items-center gap-3",style:{borderRight:`1px solid ${r}10`,borderBottom:`1px solid ${r}10`},children:[e("div",{className:"w-9 h-9 rounded-full flex items-center justify-center",style:{backgroundColor:`${o}15`},children:e(s,{size:16,style:{color:o}})}),e("span",{className:"text-sm font-medium text-gray-800",children:c})]},n)})})})]})}):null},Ge={clock:re,shield:se,bus:T,star:Y},Je=({companyName:a,items:r,primaryColor:o,secondaryColor:l="#0063ff"})=>!r||r.length===0?null:e("section",{className:"py-6 px-4",style:{backgroundColor:`${l}08`},children:t("div",{className:"max-w-5xl mx-auto",children:[t("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e(T,{size:18,style:{color:o}}),t("h2",{className:"text-lg font-semibold text-gray-900 text-center",children:["Pourquoi choisir ",a," ?"]})]}),e("div",{className:"rounded-2xl overflow-hidden",style:{border:`1px solid ${o}20`,boxShadow:`0 6px 18px ${o}12`,backgroundColor:"#ffffff"},children:e("div",{className:"grid grid-cols-2",style:{borderTop:`1px solid ${o}10`,borderLeft:`1px solid ${o}10`},children:r.slice(0,4).map((n,s)=>{const c=Ge[n.icon||""]||se;return t("div",{className:"p-3 flex items-center gap-3",style:{borderRight:`1px solid ${o}10`,borderBottom:`1px solid ${o}10`},children:[e("div",{className:"w-9 h-9 rounded-full flex items-center justify-center",style:{backgroundColor:`${l}15`},children:e(c,{size:16,style:{color:l}})}),t("div",{children:[e("p",{className:"text-sm font-medium text-gray-800 leading-tight",children:n.label}),n.description&&e("p",{className:"text-xs text-gray-500 mt-1 leading-tight",children:n.description})]})]},s)})})})]})}),Ke=({companyId:a,primaryColor:r})=>{const[o,l]=h.useState(""),[n,s]=h.useState(0),[c,i]=h.useState(""),[d,u]=h.useState(!1),[g,b]=h.useState(!1),x=async p=>{if(p.preventDefault(),!(!o.trim()||n<1||!c.trim())&&a)try{u(!0),await ze(C(k,"companies",a,"avis"),{nom:o,note:n,commentaire:c,visible:!1,createdAt:De()}),b(!0)}catch(N){console.error("Erreur envoi avis:",N)}finally{u(!1)}};return g?t("div",{className:"p-6 rounded-2xl text-center space-y-3",style:{background:"rgba(16,185,129,0.12)",border:"1px solid rgba(16,185,129,0.4)"},children:[e(Se,{size:42,style:{color:"#10b981"},className:"mx-auto"}),e("h4",{className:"text-lg font-semibold text-white",children:"Merci pour votre avis !"})]}):t("form",{onSubmit:x,className:"space-y-5",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-white mb-1",children:"Votre nom"}),e("input",{type:"text",value:o,onChange:p=>l(p.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-100 text-gray-900 border border-gray-300",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-white mb-2",children:"Votre note"}),e("div",{className:"flex gap-2",children:[1,2,3,4,5].map(p=>e(Y,{onClick:()=>s(p),className:"h-7 w-7 cursor-pointer",style:{color:p<=n?r:"#64748b",fill:p<=n?r:"none"}},p))})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-white mb-1",children:"Votre avis"}),e("textarea",{value:c,onChange:p=>i(p.target.value),rows:4,className:"w-full px-3 py-2 rounded-lg bg-gray-100 text-gray-900 border border-gray-300",required:!0})]}),e("button",{type:"submit",disabled:d,className:"w-full text-white font-semibold py-2.5 rounded-lg",style:{background:`linear-gradient(135deg, ${r}, ${r}CC)`},children:d?"Envoi en cours...":"Envoyer mon avis"})]})},Xe=({company:a})=>{const[r,o]=h.useState(!1),{t:l}=q(),n=new Date().getFullYear(),{id:s,slug:c,nom:i,couleurPrimaire:d="#3B82F6",couleurSecondaire:u="#22D3EE",description:g,email:b,telephone:x,adresse:p,horaires:N,socialMedia:y={},footerConfig:F={}}=a,{showAbout:_=!0,showContact:R=!0,showSocial:V=!0,showTestimonials:L=!0,showLegalLinks:E=!0,customLinks:P=[]}=F;return t("footer",{className:"relative w-full overflow-hidden text-white",style:{background:"linear-gradient(180deg, #0f172a 0%, #0b1220 100%)"},children:[e("div",{className:"absolute top-0 left-0 right-0 h-1",style:{background:`linear-gradient(90deg, ${d}, ${u})`}}),t("div",{className:"relative z-10 max-w-7xl mx-auto px-6 py-14 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10",children:[_&&t(v.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},children:[t("div",{className:"flex items-center gap-2 mb-4",children:[e($e,{className:"h-5 w-5",style:{color:u}}),e("h3",{className:"text-lg font-semibold tracking-wide",children:l("about")})]}),e("p",{className:"text-sm text-gray-300 leading-relaxed",children:g||l("defaultAbout")})]}),R&&t(v.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[t("div",{className:"flex items-center gap-2 mb-4",children:[e(I,{className:"h-5 w-5",style:{color:u}}),e("h3",{className:"text-lg font-semibold tracking-wide",children:l("contact")})]}),t("ul",{className:"space-y-3 text-sm text-gray-300",children:[x&&t("li",{className:"flex items-center gap-2 hover:text-white transition",children:[e(I,{className:"h-4 w-4 text-gray-400"}),e("a",{href:`tel:${x}`,children:x})]}),b&&t("li",{className:"flex items-center gap-2 hover:text-white transition",children:[e(Ae,{className:"h-4 w-4 text-gray-400"}),e("a",{href:`mailto:${b}`,children:b})]}),p&&t("li",{className:"flex items-center gap-2",children:[e(le,{className:"h-4 w-4 text-gray-400"}),p]}),N&&t("li",{className:"flex items-center gap-2",children:[e(re,{className:"h-4 w-4 text-gray-400"}),N]})]})]}),V&&Object.values(y).some(Boolean)&&t(v.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[t("div",{className:"flex items-center gap-2 mb-4",children:[e(K,{className:"h-5 w-5",style:{color:u}}),e("h3",{className:"text-lg font-semibold tracking-wide",children:l("followUs")})]}),t("div",{className:"flex gap-4",children:[y.facebook&&e("a",{href:y.facebook,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition",children:e(Fe,{className:"h-6 w-6 text-gray-300 hover:text-white"})}),y.instagram&&e("a",{href:y.instagram,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition",children:e(Le,{className:"h-6 w-6 text-gray-300 hover:text-white"})}),y.twitter&&e("a",{href:y.twitter,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition",children:e(Ee,{className:"h-6 w-6 text-gray-300 hover:text-white"})}),y.linkedin&&e("a",{href:y.linkedin,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition",children:e(Pe,{className:"h-6 w-6 text-gray-300 hover:text-white"})}),y.youtube&&e("a",{href:y.youtube,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition",children:e(je,{className:"h-6 w-6 text-gray-300 hover:text-white"})})]})]}),L&&t(v.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[t("div",{className:"flex items-center gap-2 mb-4",children:[e(K,{className:"h-5 w-5",style:{color:u}}),e("h3",{className:"text-lg font-semibold tracking-wide",children:l("customerReviews")})]}),t(v.button,{onClick:()=>o(!r),className:"w-full flex items-center justify-between px-5 py-3 rounded-xl text-sm font-semibold transition-all",style:{background:`linear-gradient(135deg, ${d}, ${u})`,boxShadow:`0 10px 25px ${d}40`},whileHover:{scale:1.03},whileTap:{scale:.97},children:[e("span",{children:l("leaveReview")}),r?e(ie,{size:16}):e(ne,{size:16})]}),r&&e("div",{className:"mt-5",children:e(Ke,{companyId:s,primaryColor:d})})]})]}),(E||P.length>0)&&e("div",{className:"border-t border-white/10 mt-8 pt-6 pb-8 text-center text-sm text-gray-400",children:t("div",{className:"max-w-7xl mx-auto px-6 space-y-4",children:[t("div",{className:"flex flex-wrap justify-center gap-5",children:[E&&t(oe,{children:[e("a",{href:`/${c}/mentions-legales`,className:"hover:text-white transition",children:l("legalNotice")}),e("a",{href:`/${c}/confidentialite`,className:"hover:text-white transition",children:l("privacyPolicy")}),e("a",{href:`/${c}/conditions`,className:"hover:text-white transition",children:l("termsConditions")}),e("a",{href:`/${c}/cookies`,className:"hover:text-white transition",children:l("cookiePolicy")})]}),P.map((S,U)=>e("a",{href:S.url,target:S.external?"_blank":"_self",rel:S.external?"noopener noreferrer":"",className:"hover:text-white transition",children:S.label},U))]}),t("p",{className:"text-gray-500",children:["© ",n," ",i||l("ourCompany")," — ",l("allRightsReserved")]})]})})]})},Ze=({agence:a,primaryColor:r})=>t(v.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},className:"p-5 my-3 rounded-xl shadow-sm hover:shadow-md transition-all",style:{backgroundColor:"#ffffff",borderLeft:`4px solid ${r}`,boxShadow:"0 2px 12px rgba(0,0,0,0.05)"},children:[t("div",{className:"flex justify-between items-start",children:[e("h3",{className:"font-bold text-lg mb-2",style:{color:r},children:a.nomAgence}),a.latitude&&a.longitude&&t("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${a.latitude},${a.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:[e(Te,{className:"h-3 w-3"}),e("span",{children:"Maps"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3 text-sm",children:[t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 rounded-full bg-gray-100",children:e(_e,{className:"h-4 w-4",style:{color:r}})}),e("span",{className:"text-gray-700",children:a.pays})]}),a.quartier&&t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 rounded-full bg-gray-100",children:e(le,{className:"h-4 w-4",style:{color:r}})}),e("span",{className:"text-gray-700",children:a.quartier})]}),a.telephone&&t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 rounded-full bg-gray-100",children:e(I,{className:"h-4 w-4",style:{color:r}})}),e("a",{href:`tel:${a.telephone}`,className:"text-gray-700 hover:underline hover:text-gray-900 transition-colors",children:a.telephone})]})]})]}),Qe=({groupedByVille:a,openVilles:r,toggleVille:o,onClose:l,primaryColor:n,classes:s,t:c})=>e(v.section,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4",onClick:l,children:t(v.div,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl",initial:{scale:.96,y:20},animate:{scale:1,y:0},exit:{scale:.96,y:20},transition:{type:"spring",damping:25},onClick:i=>i.stopPropagation(),style:{backgroundColor:"#ffffff",boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},children:[t("div",{className:"sticky top-0 p-5 flex justify-between items-center z-10 border-b border-gray-100",style:{backdropFilter:"blur(12px)",backgroundColor:"rgba(255,255,255,0.85)"},children:[e("h2",{className:"text-2xl font-bold",style:{color:n},children:c("ourAgencies")}),e("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":c("close"),children:e(ae,{className:"h-6 w-6 text-gray-600"})})]}),e("div",{className:"p-5",children:Object.entries(a).map(([i,d])=>t("div",{className:"mb-5",children:[t(v.button,{onClick:()=>o(i),className:"w-full text-left py-4 px-5 rounded-xl flex justify-between items-center transition-colors",whileHover:{backgroundColor:"rgba(0,0,0,0.03)"},style:{backgroundColor:r[i]?"rgba(0,0,0,0.02)":"transparent",color:"#333"},children:[t("div",{className:"flex items-center gap-3",children:[e("span",{className:"font-semibold text-lg",children:i}),t("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:[d.length," ",d.length>1?c("agencies"):c("agency")]})]}),r[i]?e(ie,{className:"h-5 w-5 text-gray-500"}):e(ne,{className:"h-5 w-5 text-gray-500"})]}),e(M,{children:r[i]&&e(v.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden pl-5 ml-2 border-l-2",style:{borderColor:`${n}40`},children:d.map((u,g)=>e(Ze,{agence:u,primaryColor:n},`${u.id}-${g}`))})})]},i))})]})}),et=({companyId:a,primaryColor:r,secondaryColor:o})=>{const[l,n]=h.useState([]);return h.useEffect(()=>{if(!a)return;(async()=>{const c=ce(C(k,`companies/${a}/avis`),me("visible","==",!0),Ie("createdAt","desc"),de(5)),d=(await $(c)).docs.map(u=>{const g=u.data();return{id:u.id,nom:g.nom,note:g.note,commentaire:g.commentaire}});n(d)})()},[a]),l.length===0?null:e("section",{className:"py-5 px-4",style:{backgroundColor:`${o}08`},children:t("div",{className:"max-w-5xl mx-auto",children:[t("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e(Re,{size:18,style:{color:r}}),e("h2",{className:"text-lg font-semibold text-gray-900 text-center",children:"Avis clients"})]}),e("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:`${r}30`,boxShadow:`0 4px 15px ${r}10`,backgroundColor:"#ffffff"},children:e("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 divide-x divide-y",children:l.map(s=>t("div",{className:"p-4 flex flex-col",children:[e("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((c,i)=>e(Y,{size:14,style:{color:i<s.note?o:"#e5e7eb",fill:i<s.note?o:"none"}},i))}),t("p",{className:"text-sm text-gray-700 italic mb-3 line-clamp-3",children:["“",s.commentaire,"”"]}),e("p",{className:"text-sm font-medium mt-auto",style:{color:r},children:s.nom})]},s.id))})})]})})},Q=()=>{const a=r=>{te.changeLanguage(r)};return t("div",{className:"flex gap-2",children:[e("button",{onClick:()=>a("fr"),className:"text-sm hover:underline",children:"FR"}),e("span",{className:"text-gray-400",children:"|"}),e("button",{onClick:()=>a("en"),className:"text-sm hover:underline",children:"EN"})]})},tt="#FF6600",at=({company:a,slug:r,colors:o,navigate:l,t:n})=>{const s=o.primary||tt,[c,i]=h.useState(!1);h.useEffect(()=>{if(!(a!=null&&a.logoUrl))return;const g=new Image;g.src=a.logoUrl},[a==null?void 0:a.logoUrl]);const d=(a==null?void 0:a.nom)||n("ourCompany",{defaultValue:"Notre compagnie"}),u=({name:g})=>{const b=(g||"C").trim().charAt(0).toUpperCase();return e("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-bold",style:{backgroundColor:s},children:b})};return e("header",{className:"absolute top-4 left-0 w-full z-50 px-4 sm:px-6",children:e("div",{className:"max-w-7xl mx-auto",children:t("div",{className:"flex items-center justify-between px-4 h-16 rounded-2xl backdrop-blur-md shadow-lg border",style:{background:"rgba(255,255,255,0.15)",borderColor:"rgba(255,255,255,0.25)"},children:[t("button",{onClick:()=>l("/"),className:"flex items-center gap-3 min-w-0 select-none","aria-label":d,children:[e("div",{className:"h-10 w-10 rounded-full bg-white overflow-hidden grid place-items-center shadow-sm",style:{border:`2px solid ${s}`},children:a!=null&&a.logoUrl?e("img",{src:a.logoUrl,alt:`Logo ${d}`,className:"w-full h-full object-contain",loading:"eager",decoding:"async",onLoad:()=>i(!0)}):e(u,{name:d})}),e("span",{className:"text-lg md:text-xl font-semibold tracking-tight",style:{color:s},children:d})]}),t("div",{className:"flex items-center gap-3",children:[e("div",{className:"hidden md:block text-white",children:e(Q,{})}),e("button",{onClick:()=>l("/login"),className:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-white/80 backdrop-blur ring-1 ring-white/40 hover:bg-white transition",style:{color:s},"aria-label":n("login",{defaultValue:"Connexion"}),children:e(Ve,{className:"h-5 w-5"})}),e("div",{className:"md:hidden text-white",children:e(Q,{})})]})]})})})},ee=({message:a="La page demandée est introuvable.",primaryColor:r,buttonLabel:o="Retour à l'accueil"})=>{const l=O();return e("div",{className:"min-h-screen flex items-center justify-center bg-black text-white p-6",children:t(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center max-w-md",children:[e(Ue,{className:"mx-auto mb-4 h-16 w-16 text-red-500"}),e("h1",{className:"text-3xl font-bold mb-2",children:"Erreur 404"}),e("p",{className:"mb-6 text-gray-300",children:a}),e("button",{onClick:()=>l("/"),className:"px-6 py-3 rounded-lg font-semibold text-white transition shadow-lg",style:{backgroundColor:r},children:o})]})})},st=new Map;function rt(a){return st.get(a)}const ct=({company:a})=>{var W;const{slug:r=""}=Be(),o=O(),{t:l}=q(),n=rt(r),[s,c]=h.useState(a||n),{colors:i,config:d}=ge(s),[u,g]=h.useState([]),[b,x]=h.useState([]),[p,N]=h.useState(!1),[y,F]=h.useState(null),[_,R]=h.useState({}),[V,L]=h.useState(!1),E=f=>{R(m=>({...m,[f]:!m[f]}))},P=h.useMemo(()=>u.reduce((f,m)=>(f[m.ville]||(f[m.ville]=[]),f[m.ville].push(m),f),{}),[u]);h.useEffect(()=>{s||!r||(async()=>{try{const f=ce(C(k,"companies"),me("slug","==",r),de(1)),m=await $(f);m.empty?F("notFound"):c({id:m.docs[0].id,...m.docs[0].data()})}catch(f){console.warn("PublicCompanyPage ► fetch company",f),F(l("loadingError"))}})()},[r]),h.useEffect(()=>{const f=setTimeout(()=>L(!0),4e3);return()=>clearTimeout(f)},[]),h.useEffect(()=>{(async()=>{if(s!=null&&s.id)try{const m=await $(C(k,"companies",s.id,"agences")),w=new Map;for(const B of m.docs){const G=await $(C(k,"companies",s.id,"agences",B.id,"weeklyTrips"));for(const j of G.docs){const A=j.data(),z=A.depart||A.departure,D=A.arrivee||A.arrival,ue=A.price??A.prix??0;if(!z||!D)continue;const J=`${z}_${D}`;w.has(J)||w.set(J,{departure:z,arrival:D,price:ue})}}x(Array.from(w.values()).slice(0,6))}catch(m){console.warn("Suggestions error:",m)}})()},[s]),h.useEffect(()=>{(async()=>{if(!(s!=null&&s.id))return;const m=await $(C(k,"companies",s.id,"agences"));g(m.docs.map(w=>({id:w.id,...w.data()})))})()},[s]);const S=!!(s!=null&&s.publicPageEnabled),U=S&&!!(s!=null&&s.onlineBookingEnabled);if(y==="notFound")return e(ee,{primaryColor:i.primary||"#FF6600"});if(!s||!S)return e(ee,{primaryColor:i.primary||"#FF6600"});const he=f=>{var w;const m=[];if((w=f.createdAt)!=null&&w.toDate){const B=f.createdAt.toDate().getFullYear(),j=new Date().getFullYear()-B;j>0&&m.push({label:`${j}+ ans d'expérience`,icon:"award"})}return f.onlineBookingEnabled&&m.push({label:"Réservation en ligne rapide",icon:"clock"}),f.services&&f.services.length>0&&m.push({label:"Services à bord modernes",icon:"bus"}),m.push({label:"Voyages sécurisés",icon:"shield"}),m.slice(0,4)},H=(W=s==null?void 0:s.whyChooseUs)!=null&&W.items&&s.whyChooseUs.items.length>0?s.whyChooseUs.items:he(s);return t("div",{className:`min-h-screen flex flex-col ${d.typography}`,style:{backgroundColor:i.background||"#ffffff",color:i.text},children:[e(at,{company:s,colors:i,slug:r,navigate:o,t:l}),t("main",{className:"flex-grow",children:[U&&t(oe,{children:[e(He,{company:s,onSearch:(f,m)=>{o(`/${r}/booking?departure=${encodeURIComponent(f)}&arrival=${encodeURIComponent(m)}`)}}),e(Me,{suggestions:b,company:s,onSelect:(f,m)=>{o(`/${r}/booking?departure=${encodeURIComponent(f)}&arrival=${encodeURIComponent(m)}`)}})]}),H.length>0&&e(Je,{companyName:s.nom,items:H,primaryColor:i.primary}),Array.isArray(s.services)&&s.services.length>0&&e(We,{services:s.services,primaryColor:i.primary,secondaryColor:i.secondary}),e(et,{companyId:s.id,primaryColor:i.primary,secondaryColor:i.secondary}),e(M,{children:p&&e(Qe,{groupedByVille:P,openVilles:_,toggleVille:E,onClose:()=>N(!1),primaryColor:i.primary,t:l,classes:void 0})}),V&&e(qe,{onSelectLanguage:f=>{fe(async()=>{const{default:m}=await import("../index-CBC3XRHi.js").then(w=>w.k);return{default:m}},__vite__mapDeps([0,1,2,3,4,5])).then(({default:m})=>m.changeLanguage(f)),L(!1)},delayMs:8e3})]}),e(Xe,{company:s})]})};export{ct as default};

import{u as be,r as a,j as e}from"./react-BKlva80Y.js";import{q as Y,j as A,w as J,k as I,d as K,e as Q,T as je,y as fe}from"./firebase-1zyXmG6H.js";import{u as ye,d as b}from"../index-DdVw6ij9.js";import"./vendor-CZDa83Cj.js";const Z=30,ee=8,se="compagnie-par-defaut",Ce=()=>{const{user:i}=ye(),V=be(),[y,te]=a.useState(""),[N,re]=a.useState(""),[ae,$]=a.useState(""),[j,oe]=a.useState([]),[H,T]=a.useState([]),[ne,ie]=a.useState([]),[le,de]=a.useState([]),[t,z]=a.useState(null),[w,ce]=a.useState(""),[v,me]=a.useState(""),[d,W]=a.useState(1),[p,F]=a.useState(0),[h,E]=a.useState("aller_simple"),[B,P]=a.useState(0),[k,q]=a.useState("espèces"),[X,G]=a.useState(!1),ge=Array.from({length:ee},(s,r)=>{const o=new Date;return o.setDate(o.getDate()+r),o.toISOString().split("T")[0]}),S=a.useCallback((s,r)=>{const o=new Date,[c,m]=r.split(":").map(Number),l=new Date(s);return l.setHours(c,m,0,0),l.getTime()<o.getTime()},[]);a.useEffect(()=>{(async()=>{try{const o=(await I(Y(A(b,"weeklyTrips"),J("active","==",!0)))).docs.map(l=>l.data()),c=Array.from(new Set(o.map(l=>l.departure))),m=Array.from(new Set(o.map(l=>l.arrival)));ie(c),de(m)}catch(r){console.error("Erreur chargement des villes:",r)}})()},[]),a.useEffect(()=>{if(!t){P(0);return}const s=t.price;let r=d*s;h==="aller_retour"&&(r+=p*s),P(r)},[d,p,h,t]);const xe=a.useCallback(async()=>{var s,r,o,c;if(!y||!N){alert("Veuillez sélectionner une ville de départ et une ville d'arrivée");return}try{const m=y.trim().toLowerCase(),l=N.trim().toLowerCase(),L=Y(A(b,"weeklyTrips"),J("agencyId","==",(i==null?void 0:i.agencyId)||"")),R=(await I(L)).docs.map(n=>({id:n.id,...n.data()})),C=[],f=new Date;for(let n=0;n<ee;n++){const x=new Date(f);x.setDate(f.getDate()+n);const u=x.toLocaleDateString("fr-FR",{weekday:"long"}).toLowerCase();for(const g of R)if(((s=g.departure)==null?void 0:s.toLowerCase())===m&&((r=g.arrival)==null?void 0:r.toLowerCase())===l&&g.active&&((c=(o=g.horaires)==null?void 0:o[u])==null?void 0:c.length)>0)for(const U of g.horaires[u])C.push({id:`${g.id}_${x.toISOString().split("T")[0]}_${U}`,date:x.toISOString().split("T")[0],time:U,departure:g.departure,arrival:g.arrival,price:g.price,places:g.places||Z})}const ve=(await I(A(b,"reservations"))).docs.map(n=>n.data()),M=C.map(n=>{const x=ve.filter(u=>u.trajetId===n.id&&u.statut==="payé").reduce((u,g)=>u+(g.seatsGo||1),0);return{...n,remainingSeats:(n.places||Z)-x}}).filter(n=>!S(n.date,n.time));oe(M);const _=M.length>0?M[0].date:"";if($(_),_){const n=M.filter(x=>x.date===_).sort((x,u)=>x.time.localeCompare(u.time));T(n)}else T([]);z(null)}catch(m){console.error("Erreur lors de la recherche :",m),alert("Une erreur est survenue lors de la recherche des trajets")}},[y,N,i==null?void 0:i.agencyId,S]),he=a.useCallback(s=>{$(s);const r=j.filter(o=>o.date===s&&!S(o.date,o.time)).sort((o,c)=>o.time.localeCompare(c.time));T(r),z(null)},[j,S]),ue=a.useCallback(s=>{z(s),W(1),F(0)},[]),pe=a.useCallback(async()=>{if(!t||!w||!v||d<1){alert("Veuillez remplir tous les champs obligatoires");return}if(!(i!=null&&i.companyId)){alert("Votre compte n'est pas associé à une compagnie valide");return}const s=h==="aller_retour"?d+p:d;if(t.remainingSeats!==void 0&&s>t.remainingSeats){alert(`Désolé, il ne reste que ${t.remainingSeats} places disponibles.`);return}G(!0);try{let r=se,o="Compagnie";const c=K(b,"compagnies",i.companyId),m=await Q(c);m.exists()&&(r=m.data().slug||se,o=m.data().nom||"Compagnie");let l="",L="";if(i.agencyId){const C=K(b,"agences",i.agencyId),f=await Q(C);if(f.exists()){const D=f.data();l=D.nomAgence||D.nom||"",L=D.telephone||""}}const O={trajetId:t.id,nomClient:w,telephone:v,seatsGo:d,seatsReturn:h==="aller_retour"?p:0,date:t.date,heure:t.time,depart:t.departure,arrivee:t.arrival,montant:B,statut:"payé",compagnieId:i.companyId,compagnieNom:o,agencyId:i.agencyId||null,agencyNom:l,agencyTelephone:L,createdAt:je.now(),canal:"guichet",tripType:h,paiement:k,companySlug:r},R=await fe(A(b,"reservations"),O);V(`/agence/receipt/${R.id}`)}catch(r){console.error("Erreur création réservation:",r),alert("Erreur lors de la réservation")}finally{G(!1)}},[t,w,v,i,d,p,h,B,k,V]),we=Array.from(new Set(j.map(s=>s.date)));return e.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 bg-gradient-to-br from-indigo-50 to-blue-50 min-h-screen",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("header",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-indigo-600 rounded-xl shadow-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 bg-clip-text bg-gradient-to-r from-indigo-600 to-blue-500",children:"Guichet de vente"}),e.jsx("p",{className:"text-gray-600",children:"Recherchez et réservez des billets en quelques clics"})]})]})}),e.jsxs("section",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher un trajet"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"departure",className:"block text-sm font-medium text-gray-700 mb-2",children:"Départ"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("input",{id:"departure",list:"depList",value:y,onChange:s=>te(s.target.value),placeholder:"Ville de départ",className:"w-full pl-10 border-2 border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"}),e.jsx("datalist",{id:"depList",children:ne.map(s=>e.jsx("option",{value:s},`dep-${s}`))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"arrival",className:"block text-sm font-medium text-gray-700 mb-2",children:"Arrivée"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("input",{id:"arrival",list:"arrList",value:N,onChange:s=>re(s.target.value),placeholder:"Ville d'arrivée",className:"w-full pl-10 border-2 border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"}),e.jsx("datalist",{id:"arrList",children:le.map(s=>e.jsx("option",{value:s},`arr-${s}`))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:xe,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 text-white font-medium px-4 py-3 rounded-xl shadow-md transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher"]})})]})]}),j.length>0&&e.jsxs("section",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Dates disponibles"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:ge.map(s=>{const r=we.includes(s),o=ae===s,c=new Date(s),m=c.toLocaleDateString("fr-FR",{weekday:"short"}),l=c.getDate();return e.jsxs("button",{onClick:()=>r&&he(s),className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl border-2 transition-all duration-200 ${o?"bg-indigo-600 text-white border-indigo-700 shadow-md":r?"bg-white text-indigo-600 border-indigo-200 hover:bg-indigo-50 hover:border-indigo-300":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,disabled:!r,title:r?`Voir les trajets pour le ${s}`:"Date non disponible",children:[e.jsx("span",{className:"text-xs font-medium",children:m}),e.jsx("span",{className:"text-lg font-bold",children:l})]},s)})})]}),e.jsxs("section",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Horaires disponibles"]}),H.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500 mt-3",children:j.length===0?"Aucun trajet trouvé. Veuillez effectuer une recherche.":"Aucun horaire disponible pour cette date."})]}):e.jsx("div",{className:"space-y-3",children:H.map(s=>e.jsx("div",{onClick:()=>ue(s),className:`p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer ${(t==null?void 0:t.id)===s.id?"border-indigo-500 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:shadow-sm"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-indigo-100 p-3 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-800",children:[e.jsx("span",{className:"text-xl",children:s.time})," — ",s.departure," → ",s.arrival]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-indigo-600 text-lg",children:[s.price.toLocaleString("fr-FR")," FCFA"]}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${(s.remainingSeats||0)>10?"bg-green-500":(s.remainingSeats||0)>5?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.remainingSeats??"NC"," places"]})]})]})]})},s.id))})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100 space-y-6 sticky top-6 h-fit",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 bg-gradient-to-r from-indigo-600 to-blue-500 bg-clip-text text-transparent",children:"Détails de la réservation"}),t?e.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 border-2 border-indigo-100 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-indigo-800",children:[t.departure," → ",t.arrival]}),e.jsx("p",{className:"text-sm text-indigo-600",children:new Date(t.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsx("div",{className:"bg-white rounded-lg px-2 py-1 shadow-sm",children:e.jsx("p",{className:"font-medium text-indigo-600",children:t.time})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-indigo-100",children:[e.jsxs("p",{className:"text-sm text-indigo-700",children:[e.jsx("span",{className:"font-medium",children:"Prix unitaire:"})," ",t.price.toLocaleString("fr-FR")," FCFA"]}),t.remainingSeats!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${t.remainingSeats>10?"bg-green-500":t.remainingSeats>5?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("span",{className:"text-xs font-medium text-indigo-700",children:[t.remainingSeats," restantes"]})]})]})]}):e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 text-gray-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),e.jsx("p",{className:"mt-2",children:"Sélectionnez un trajet pour continuer"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-xl inline-flex w-full",children:[e.jsx("button",{onClick:()=>E("aller_simple"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 ${h==="aller_simple"?"bg-white shadow-sm border border-gray-200 text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:"Aller simple"}),e.jsx("button",{onClick:()=>E("aller_retour"),className:`flex-1 py-2 px-3 rounded-lg transition-all duration-200 ${h==="aller_retour"?"bg-white shadow-sm border border-gray-200 text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:"Aller-retour"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom complet du passager*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{type:"text",value:w,onChange:s=>ce(s.target.value),className:"w-full pl-10 border-2 border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",required:!0,placeholder:"Jean Dupont"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numéro de téléphone*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("input",{type:"tel",value:v,onChange:s=>me(s.target.value),className:"w-full pl-10 border-2 border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",required:!0,placeholder:"+225 XX XX XX XX"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de places (Aller)*"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>W(s=>Math.max(1,s-1)),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t||d<=1,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"flex-1 text-center py-2 bg-indigo-50 text-indigo-600 font-bold rounded-lg",children:d}),e.jsx("button",{onClick:()=>W(s=>s+1),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t||t.remainingSeats!==void 0&&d>=t.remainingSeats,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),h==="aller_retour"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de places (Retour)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>F(s=>Math.max(0,s-1)),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t||p<=0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"flex-1 text-center py-2 bg-indigo-50 text-indigo-600 font-bold rounded-lg",children:p}),e.jsx("button",{onClick:()=>F(s=>s+1),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t||t.remainingSeats!==void 0&&d+p>=t.remainingSeats,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mode de paiement"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>q("espèces"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 ${k==="espèces"?"border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-200 hover:border-indigo-300 text-gray-700"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Espèces"]}),e.jsxs("button",{onClick:()=>q("mobile_money"),className:`py-2 px-3 rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 ${k==="mobile_money"?"border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-200 hover:border-indigo-300 text-gray-700"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Mobile Money"]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-xl",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total à payer"}),e.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[B.toLocaleString("fr-FR")," FCFA"]})]})})]}),e.jsx("button",{onClick:pe,disabled:!t||!w||!v||d<1||X,className:`w-full py-4 px-6 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${!t||!w||!v||d<1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 text-white transform hover:-translate-y-1"}`,children:X?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Traitement en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Valider la réservation"]})})]})]})};export{Ce as default};

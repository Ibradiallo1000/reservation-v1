import{r as f,a as t,j as e,bl as y}from"./react-KXT1Riez.js";import{D as d,h as x}from"./ticketMessages-B5n9y2Of.js";import{f as s,c as a}from"./vendor-B27hBV_J.js";function g(l){return l==null?void 0:l.toLowerCase().split(" ").filter(Boolean).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function u(l){try{return s(new Date(l),"dd/MM/yyyy",{locale:a})}catch{return l}}const w=({open:l,onClose:r,reservation:i,company:n})=>{const o=f.useRef(null);if(!l)return null;const c=i.referenceCode||i.id,p=`${window.location.origin}/r/${c}`,h=s(new Date(i.createdAt||new Date),"dd/MM/yyyy HH:mm",{locale:a}),m=()=>{o.current&&x().set({margin:2,filename:`ticket-${c}.pdf`,html2canvas:{scale:2},jsPDF:{unit:"mm",format:[80,200]}}).from(o.current).save()};return t("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:[e("style",{children:`
        @media print {
          body * { visibility: hidden !important; }
          #thermal-ticket, #thermal-ticket * { visibility: visible !important; }
          #thermal-ticket { position: absolute; left: 0; top: 0; width: 100%; }
          .no-print { display: none !important; }
        }
      `}),t("div",{id:"thermal-ticket",className:"bg-white rounded-2xl shadow-xl overflow-hidden",style:{width:"80mm",fontFamily:"monospace",fontSize:"12px",lineHeight:"1.5"},children:[t("div",{className:"no-print flex justify-between items-center px-4 py-3 border-b",children:[e("div",{className:"font-semibold",children:n.nom}),t("div",{className:"flex gap-2",children:[e("button",{onClick:m,children:"PDF"}),e("button",{onClick:()=>window.print(),children:"Imprimer"}),e("button",{onClick:r,children:"Fermer"})]})]}),t("div",{ref:o,className:"p-4 text-black",children:[t("div",{className:"text-center mb-3",children:[n.logoUrl&&e("img",{src:n.logoUrl,alt:"logo",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"50%",border:"2px solid #000",margin:"0 auto"}}),e("div",{style:{fontWeight:"bold",fontSize:"14px",marginTop:"6px"},children:n.nom.toUpperCase()}),e("div",{style:{fontSize:"11px"},children:i.agencyNom||"Agence"})]}),e("hr",{}),t("div",{style:{textAlign:"center",margin:"6px 0"},children:[t("div",{style:{fontWeight:"bold"},children:["N° ",c]}),t("div",{style:{fontSize:"11px"},children:["Émis le ",h]})]}),e("hr",{}),t("div",{style:{marginTop:"8px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{children:"Passager :"}),e("span",{style:{fontWeight:"bold"},children:g(i.nomClient)})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{children:"Téléphone :"}),e("span",{children:i.telephone})]})]}),e("hr",{}),t("div",{style:{textAlign:"center",margin:"10px 0"},children:[t("div",{style:{fontWeight:"bold",fontSize:"14px",letterSpacing:"1px"},children:[i.depart.toUpperCase()," → ",i.arrivee.toUpperCase()]}),t("div",{style:{marginTop:"4px"},children:[u(i.date)," • ",i.heure]}),t("div",{style:{fontSize:"11px"},children:[i.seatsGo," place(s) • guichet"]})]}),e("hr",{}),t("div",{style:{textAlign:"center",margin:"10px 0"},children:[t("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[i.montant.toLocaleString("fr-FR")," FCFA"]}),t("div",{style:{fontSize:"11px"},children:["Paiement : ",(i.paiement||"espèces").toUpperCase()]})]}),e("hr",{}),e("div",{style:{marginTop:"12px",display:"flex",justifyContent:"center"},children:e(y,{value:p,size:100,level:"H",fgColor:"#000000"})}),e("div",{style:{textAlign:"center",fontSize:"10px",marginTop:"6px"},children:"Validité : 1 mois à compter de la date d’émission."}),e("hr",{}),t("div",{style:{textAlign:"center",fontSize:"10px",marginTop:"8px"},children:[e("div",{style:{fontWeight:"bold"},children:d.control}),e("div",{children:d.validity}),t("div",{children:["Merci d'avoir choisi ",n.nom]}),e("div",{style:{fontStyle:"italic"},children:d.arrival}),e("div",{children:d.keep})]})]})]})]})};export{w as R};

import{r as c,j as e,a,E as V,f as U,o as R,al as O,P as A,Z as K,t as k,am as L,v as _,l as G,F as q,S as M,an as F,ao as H}from"./react-DgrrIcw2.js";import{d as C,f as j,u as D,l as B,k as E,q as W,A as Z,C as J}from"./firebase-eGIzIftJ.js";import{u as S,A as T,m as w,I as Q,d as N,a as $,b as X}from"../index-p6Te0bSg.js";import"./vendor-BHjJ2Hjk.js";const Y=()=>{const{user:t}=S(),[s,i]=c.useState({accroche:"",instructionRecherche:"",nom:"",telephone:"",description:"",logoUrl:"",faviconUrl:"",banniereUrl:"",imagesSlider:[],couleurPrimaire:"#3B82F6",couleurSecondaire:"#10B981",couleurAccent:"#FBBF24",couleurTertiaire:"#F472B6",themeStyle:"moderne",police:"sans-serif",socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0,showTestimonials:!0,showLegalLinks:!0,showContactForm:!0,customLinks:[]}}),[o,g]=c.useState({text:"",type:""}),[h,n]=c.useState(null),[u,d]=c.useState(null),p=[{name:"moderne",value:"moderne",description:"Style contemporain avec couleurs vives",icon:e(A,{size:16})},{name:"classique",value:"classique",description:"Style traditionnel épuré",icon:e(F,{size:16})},{name:"sombre",value:"sombre",description:"Mode nuit élégant",icon:e(L,{size:16})},{name:"contraste",value:"contraste",description:"Fort impact visuel",icon:e(H,{size:16})},{name:"minimaliste",value:"minimaliste",description:"Design ultra épuré",icon:e(F,{size:16})},{name:"glassmorphism",value:"glassmorphism",description:"Effets de transparence moderne",icon:e(A,{size:16})}];c.useEffect(()=>{t!=null&&t.companyId&&(async()=>{const m=C(N,"companies",t.companyId),b=await j(m);b.exists()&&i(l=>({...l,...b.data()}))})()},[t]);const y=async()=>{if(t!=null&&t.companyId){g({text:"Enregistrement en cours...",type:"info"});try{const r=C(N,"companies",t.companyId);await D(r,s),g({text:"Modifications enregistrées avec succès",type:"success"})}catch(r){console.error("Erreur d'enregistrement:",r),g({text:"Échec de l'enregistrement. Veuillez réessayer.",type:"error"})}}},x=r=>{const{name:m,value:b}=r.target;i(l=>({...l,[m]:b}))},v=r=>{h&&(i(m=>({...m,...h==="logo"&&{logoUrl:r},...h==="favicon"&&{faviconUrl:r},...h==="banniereStatique"&&{banniereUrl:r},...h==="banniere"&&{imagesSlider:[...m.imagesSlider,r]}})),n(null))},f=r=>{i(m=>({...m,imagesSlider:m.imagesSlider.filter((b,l)=>l!==r)}))};return e("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:a(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-5xl mx-auto",children:[a("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 flex items-center gap-4 border-l-4",style:{borderLeftColor:s.couleurPrimaire},children:[e(V,{className:"h-8 w-8 text-gray-700"}),a("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-800",children:"Personnalisation de la vitrine"}),e("p",{className:"text-gray-500",children:"Configurez l'apparence de votre page publique"})]})]}),e(T,{children:o.text&&e(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 ${o.type==="success"?"bg-green-100 text-green-800 border-l-4 border-green-500":o.type==="error"?"bg-red-100 text-red-800 border-l-4 border-red-500":"bg-blue-100 text-blue-800 border-l-4 border-blue-500"}`,children:a("div",{className:"flex items-center justify-between gap-4",children:[a("div",{className:"flex items-center",children:[o.type==="success"?e(U,{className:"h-6 w-6 mr-2"}):o.type==="error"?e(R,{className:"h-6 w-6 mr-2"}):e("div",{className:"h-6 w-6 mr-2 animate-spin rounded-full border-t-2 border-b-2 border-blue-500"}),e("span",{children:o.text})]}),o.type==="success"&&e("button",{onClick:()=>g({text:"",type:""}),className:"text-sm underline text-green-800 hover:text-green-900",type:"button",children:"OK"})]})})}),a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"space-y-6",children:[a("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[a("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e(O,{className:"text-blue-500"}),"Textes personnalisés"]}),a("div",{className:"space-y-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phrase d'accroche (titre principal)"}),e("input",{type:"text",name:"accroche",value:s.accroche,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Réservez votre billet en un clic"}),e("p",{className:"mt-1 text-xs text-gray-500",children:"Sera affiché en grand sur votre bannière"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instruction de recherche"}),e("input",{type:"text",name:"instructionRecherche",value:s.instructionRecherche,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Remplissez les champs ci-dessous pour trouver votre trajet"}),e("p",{className:"mt-1 text-xs text-gray-500",children:"S'affiche au-dessus du formulaire de recherche"})]})]})]}),a("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[a("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e(A,{className:"text-purple-500"}),"Couleurs"]}),e("div",{className:"grid grid-cols-2 gap-4",children:[{name:"Primaire",key:"couleurPrimaire",value:s.couleurPrimaire},{name:"Secondaire",key:"couleurSecondaire",value:s.couleurSecondaire},{name:"Accent",key:"couleurAccent",value:s.couleurAccent},{name:"Tertiaire",key:"couleurTertiaire",value:s.couleurTertiaire}].map(r=>a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r.name}),a("div",{className:"flex items-center gap-3",children:[e("div",{className:"h-10 w-10 rounded-lg cursor-pointer border-2 border-gray-200 shadow-sm",style:{backgroundColor:r.value},onClick:()=>d(r.key)}),e("span",{className:"text-sm font-mono",children:r.value})]}),u===r.key&&a("div",{className:"absolute z-10 mt-2 bg-white p-3 rounded-xl shadow-xl border border-gray-200",children:[e(K,{color:r.value,onChange:m=>i({...s,[r.key]:m})}),a("div",{className:"mt-3 flex justify-between items-center",children:[e("input",{type:"text",value:r.value,onChange:m=>i({...s,[r.key]:m.target.value}),className:"text-sm border rounded-lg px-3 py-1.5 w-24"}),e("button",{onClick:()=>d(null),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Valider"})]})]})]},r.key))})]}),a("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[a("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e(k,{className:"text-pink-500"}),"Images"]}),a("div",{className:"space-y-6",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),s.logoUrl?a("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e("img",{src:s.logoUrl,alt:"Logo",className:"h-16 w-16 object-contain"})}),a("div",{className:"flex gap-2",children:[e("button",{onClick:()=>n("logo"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e("button",{onClick:()=>i({...s,logoUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):a("button",{onClick:()=>n("logo"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e(k,{className:"mb-2 h-8 w-8"}),e("span",{className:"font-medium",children:"Ajouter un logo"}),e("span",{className:"text-xs mt-1",children:"Recommandé : 300x300px"})]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favicon"}),s.faviconUrl?a("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-2 border border-gray-200 rounded-lg bg-gray-50",children:e("img",{src:s.faviconUrl,alt:"Favicon",className:"h-8 w-8 object-contain"})}),a("div",{className:"flex gap-2",children:[e("button",{onClick:()=>n("favicon"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer"}),e("button",{onClick:()=>i({...s,faviconUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):a("button",{onClick:()=>n("favicon"),className:"w-full py-6 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e(k,{className:"mb-2 h-8 w-8"}),e("span",{className:"font-medium",children:"Ajouter un favicon"}),e("span",{className:"text-xs mt-1",children:"Recommandé : 32x32px"})]})]})]})]})]}),a(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[a("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[a("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e(L,{className:"text-indigo-500"}),"Thème graphique"]}),e("div",{className:"grid grid-cols-2 gap-3",children:p.map(r=>a(w.div,{whileHover:{y:-2},onClick:()=>i({...s,themeStyle:r.value}),className:`p-4 border rounded-xl cursor-pointer transition-all ${s.themeStyle===r.value?"ring-2 ring-blue-500 border-transparent bg-blue-50":"hover:shadow-md border-gray-200"}`,children:[a("div",{className:"flex items-center gap-3 mb-2",children:[r.icon,e("span",{className:"capitalize font-medium text-gray-700",children:r.name})]}),e("p",{className:"text-xs text-gray-500",children:r.description})]},r.value))})]}),a("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[a("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[e(k,{className:"text-amber-500"}),"Bannière"]}),a("div",{className:"space-y-6",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture statique"}),s.banniereUrl?a("div",{className:"flex flex-col gap-3",children:[a("div",{className:"relative rounded-lg overflow-hidden border border-gray-200",children:[e("img",{src:s.banniereUrl,alt:"Bannière",className:"h-40 w-full object-cover"}),e("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end p-4",children:e("h3",{className:"text-white font-bold text-lg",children:s.accroche||"Votre phrase d'accroche"})})]}),a("div",{className:"flex gap-2",children:[e("button",{onClick:()=>n("banniereStatique"),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg",children:"Changer l'image"}),e("button",{onClick:()=>i({...s,banniereUrl:""}),className:"text-sm bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:"Supprimer"})]})]}):a("button",{onClick:()=>n("banniereStatique"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e(k,{className:"mb-2 h-8 w-8"}),e("span",{className:"font-medium",children:"Ajouter une bannière"}),e("span",{className:"text-xs mt-1",children:"Recommandé : 1200x400px"})]})]}),a("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Images du slider (",s.imagesSlider.length,")"]}),s.imagesSlider.length>0?a("div",{className:"space-y-3",children:[e("div",{className:"grid grid-cols-3 gap-2",children:s.imagesSlider.map((r,m)=>a(w.div,{className:"relative group",whileHover:{scale:1.02},children:[e("img",{src:r,alt:`Slide ${m}`,className:"h-24 w-full object-cover rounded-lg border border-gray-200"}),e("button",{onClick:()=>f(m),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md hover:bg-red-600",children:e(_,{size:14})})]},m))}),a("button",{onClick:()=>n("banniere"),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1.5 mt-2",children:[e(G,{size:14})," Ajouter des images"]})]}):a("button",{onClick:()=>n("banniere"),className:"w-full py-8 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 bg-gray-50 hover:bg-gray-100 transition-all",children:[e(k,{className:"mb-2 h-8 w-8"}),e("span",{className:"font-medium",children:"Ajouter des images au slider"}),e("span",{className:"text-xs mt-1",children:"Recommandé : 3-5 images"})]})]})]})]})]})]}),e(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8 flex justify-end",children:e("button",{onClick:y,className:`px-6 py-3 text-white font-medium rounded-lg shadow-md transition flex items-center justify-center gap-2 ${o.type==="success"?"bg-green-500 hover:bg-green-600":o.type==="error"?"bg-red-500 hover:bg-red-600":"bg-blue-600 hover:bg-blue-700"}`,style:{backgroundColor:o.type?void 0:s.couleurPrimaire,minWidth:"200px"},children:o.type==="success"?a(q,{children:[e(U,{className:"h-5 w-5"}),e("span",{children:"Enregistré !"})]}):o.type==="error"?a(q,{children:[e(R,{className:"h-5 w-5"}),e("span",{children:"Réessayer"})]}):a(q,{children:[e(M,{className:"h-5 w-5"}),e("span",{children:"Enregistrer"})]})})}),h&&(t==null?void 0:t.companyId)&&e(Q,{companyId:t.companyId,onSelect:v,onClose:()=>n(null)})]})})},ee=()=>{const[t,s]=c.useState([]),[i,o]=c.useState([]),[g,h]=c.useState(""),[n,u]=c.useState(""),[d,p]=c.useState(""),[y,x]=c.useState("guichetier"),[v,f]=c.useState(""),r=async()=>{const l=W(E(N,"users")),I=(await B(l)).docs.map(z=>({id:z.id,...z.data()}));s(I)},m=async()=>{const P=(await B(E(N,"agences"))).docs.map(I=>({id:I.id,nomAgence:I.data().nomAgence}));o(P)},b=async l=>{if(l.preventDefault(),!g||!n||!d||!v||!y){alert("Tous les champs sont obligatoires.");return}try{await Z(E(N,"users"),{nom:g,email:n,motDePasse:d,role:y,agencyId:v,createdAt:new Date}),alert("Utilisateur ajouté avec succès."),h(""),u(""),p(""),x("guichetier"),f(""),r()}catch(P){console.error("Erreur ajout utilisateur :",P),alert("Erreur lors de l'ajout.")}};return c.useEffect(()=>{m(),r()},[]),a("div",{className:"p-6",children:[e("h2",{className:"text-xl font-bold mb-4",children:"Gestion du personnel"}),a("form",{onSubmit:b,className:"bg-gray-100 p-4 rounded mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block mb-1",children:"Nom complet"}),e("input",{type:"text",value:g,onChange:l=>h(l.target.value),className:"w-full border p-2 rounded",required:!0})]}),a("div",{children:[e("label",{className:"block mb-1",children:"Email"}),e("input",{type:"email",value:n,onChange:l=>u(l.target.value),className:"w-full border p-2 rounded",required:!0})]}),a("div",{children:[e("label",{className:"block mb-1",children:"Mot de passe temporaire"}),e("input",{type:"text",value:d,onChange:l=>p(l.target.value),className:"w-full border p-2 rounded",required:!0})]}),a("div",{children:[e("label",{className:"block mb-1",children:"Rôle"}),a("select",{value:y,onChange:l=>x(l.target.value),className:"w-full border p-2 rounded",required:!0,children:[e("option",{value:"guichetier",children:"Guichetier"}),e("option",{value:"agent_courrier",children:"Agent de courrier"}),e("option",{value:"chef_agence",children:"Chef d’agence"})]})]}),a("div",{className:"md:col-span-2",children:[e("label",{className:"block mb-1",children:"Agence"}),a("select",{value:v,onChange:l=>f(l.target.value),className:"w-full border p-2 rounded",required:!0,children:[e("option",{value:"",children:"-- Sélectionner une agence --"}),i.map(l=>e("option",{value:l.id,children:l.nomAgence},l.id))]})]}),e("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded md:col-span-2",children:"Ajouter l'utilisateur"})]}),e("h3",{className:"text-lg font-semibold mb-2",children:"Liste du personnel"}),e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full bg-white border border-gray-200 shadow",children:[e("thead",{children:a("tr",{className:"bg-gray-100",children:[e("th",{className:"px-4 py-2 border",children:"Nom"}),e("th",{className:"px-4 py-2 border",children:"Email"}),e("th",{className:"px-4 py-2 border",children:"Rôle"}),e("th",{className:"px-4 py-2 border",children:"Agence"})]})}),a("tbody",{children:[t.map(l=>a("tr",{children:[e("td",{className:"px-4 py-2 border",children:l.nom}),e("td",{className:"px-4 py-2 border",children:l.email}),e("td",{className:"px-4 py-2 border",children:l.role}),e("td",{className:"px-4 py-2 border",children:l.agencyId})]},l.id)),t.length===0&&e("tr",{children:e("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Aucun personnel enregistré."})})]})]})})]})},ae=()=>{const{user:t}=S(),[s,i]=c.useState(""),[o,g]=c.useState(""),[h,n]=c.useState("");return a("div",{children:[e("h2",{className:"text-xl font-bold mb-4",children:"Sécurité"}),e("input",{type:"password",placeholder:"Nouveau mot de passe",value:s,onChange:d=>i(d.target.value),className:"block mb-2 border px-2 py-1"}),e("input",{type:"password",placeholder:"Confirmer le mot de passe",value:o,onChange:d=>g(d.target.value),className:"block mb-2 border px-2 py-1"}),e("button",{onClick:async()=>{if(s!==o){n("Les mots de passe ne correspondent pas.");return}try{$.currentUser&&(await J($.currentUser,s),n("Mot de passe mis à jour avec succès !"))}catch{n("Erreur lors de la mise à jour du mot de passe.")}},className:"bg-orange-600 text-white px-4 py-1 rounded",children:"Modifier le mot de passe"}),h&&e("p",{className:"mt-2 text-green-600",children:h})]})},te=()=>{var n;const{user:t}=S(),[s,i]=c.useState({socialMedia:{facebook:"",instagram:"",whatsapp:"",tiktok:"",linkedin:"",youtube:""},footerConfig:{showSocialMedia:!0}}),[o,g]=c.useState({text:"",type:""});c.useEffect(()=>{t!=null&&t.companyId&&(async()=>{const d=C(N,"companies",t.companyId),p=await j(d);if(p.exists()){const y=p.data();i(x=>({...x,socialMedia:y.socialMedia||x.socialMedia,footerConfig:y.footerConfig||x.footerConfig}))}})()},[t]);const h=async()=>{if(t!=null&&t.companyId){g({text:"Enregistrement...",type:"info"});try{const u=C(N,"companies",t.companyId);await D(u,{socialMedia:s.socialMedia,footerConfig:s.footerConfig}),g({text:"Modifications enregistrées",type:"success"})}catch(u){console.error(u),g({text:"Erreur lors de l'enregistrement",type:"error"})}}};return a("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e("h2",{className:"text-xl font-bold mb-6",children:"Réseaux sociaux & affichage"}),e(T,{children:o.text&&e(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${o.type==="success"?"bg-green-100 text-green-800":o.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:a("div",{className:"flex justify-between items-center",children:[e("span",{children:o.text}),o.type==="success"&&e("button",{onClick:()=>g({text:"",type:""}),className:"text-sm underline",children:"OK"})]})})}),a("div",{className:"space-y-6",children:[a("div",{children:[e("h3",{className:"text-lg font-semibold mb-2",children:"Liens des réseaux sociaux"}),e("div",{className:"space-y-3",children:["facebook","instagram","whatsapp","tiktok","linkedin","youtube"].map(u=>{var d;return e("input",{type:"url",placeholder:`Lien ${u}`,value:((d=s.socialMedia)==null?void 0:d[u])||"",onChange:p=>{const y=p.target.value;i(x=>({...x,socialMedia:{...x.socialMedia,[u]:y}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md"},u)})})]}),a("div",{children:[e("h3",{className:"text-lg font-semibold mb-2",children:"Affichage dans le pied de page"}),a("label",{className:"inline-flex items-center",children:[e("input",{type:"checkbox",checked:((n=s.footerConfig)==null?void 0:n.showSocialMedia)??!0,onChange:u=>i(d=>({...d,footerConfig:{...d.footerConfig,showSocialMedia:u.target.checked}})),className:"mr-2"})," Afficher les icônes de réseaux sociaux"]})]}),e("div",{className:"flex justify-end",children:a("button",{onClick:h,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e(M,{size:18})," Enregistrer"]})})]})]})},re=()=>{const{user:t}=S(),[s,i]=c.useState({fr:"",en:""}),[o,g]=c.useState({fr:"",en:""}),[h,n]=c.useState({fr:"",en:""}),[u,d]=c.useState({fr:"",en:""}),[p,y]=c.useState({text:"",type:"info"});c.useEffect(()=>{t!=null&&t.companyId&&(async()=>{const r=C(N,"companies",t.companyId),m=await j(r);if(m.exists()){const b=m.data();i(b.mentionsLegales||{fr:"",en:""}),g(b.politiqueConfidentialite||{fr:"",en:""}),n(b.conditionsUtilisation||{fr:"",en:""}),d(b.politiqueCookies||{fr:"",en:""})}})()},[t]);const x=async()=>{if(t!=null&&t.companyId){y({text:"Enregistrement en cours...",type:"info"});try{const f=C(N,"companies",t.companyId);await D(f,{mentionsLegales:s,politiqueConfidentialite:o,conditionsUtilisation:h,politiqueCookies:u}),y({text:"Mentions mises à jour avec succès.",type:"success"})}catch(f){console.error(f),y({text:"Erreur lors de l'enregistrement.",type:"error"})}}},v=(f,r,m)=>a("div",{children:[e("h3",{className:"text-lg font-semibold mb-2",children:f}),e("label",{className:"text-sm font-medium",children:"🇫🇷 Français"}),e("textarea",{rows:4,className:"w-full mb-4 p-2 border rounded",value:r.fr,onChange:b=>m({...r,fr:b.target.value})}),e("label",{className:"text-sm font-medium",children:"🇬🇧 English"}),e("textarea",{rows:4,className:"w-full p-2 border rounded",value:r.en,onChange:b=>m({...r,en:b.target.value})})]});return a("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[e("h2",{className:"text-xl font-bold mb-6",children:"Mentions légales & politiques multilingues"}),e(T,{children:p.text&&e(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded mb-4 ${p.type==="success"?"bg-green-100 text-green-800":p.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:a("div",{className:"flex justify-between items-center",children:[a("div",{className:"flex items-center gap-2",children:[p.type==="success"?e(U,{}):p.type==="error"?e(R,{}):e(M,{}),e("span",{children:p.text})]}),p.type==="success"&&e("button",{onClick:()=>y({text:"",type:"info"}),className:"text-sm underline",children:"OK"})]})})}),a("div",{className:"space-y-8",children:[v("Mentions légales",s,i),v("Politique de confidentialité",o,g),v("Conditions d'utilisation",h,n),v("Politique de cookies",u,d),e("div",{className:"flex justify-end",children:a("button",{onClick:x,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded flex items-center gap-2",children:[e(M,{size:18})," Enregistrer"]})})]})]})},oe=()=>{const[t,s]=c.useState("vitrine"),{user:i}=S(),[o,g]=c.useState(null);c.useEffect(()=>{(async()=>{if(!(i!=null&&i.companyId))return;const u=C(N,"companies",i.companyId),d=await j(u);d.exists()&&g({id:d.id,...d.data()})})()},[i==null?void 0:i.companyId]);const{colors:h}=X(o);return a("div",{className:"max-w-5xl mx-auto p-6",children:[e("h1",{className:"text-2xl font-bold mb-6",style:{color:h.primary},children:"Paramètres de la compagnie"}),e("div",{className:"flex gap-4 mb-4",children:[{key:"vitrine",label:"Vitrine publique"},{key:"personnel",label:"Personnel"},{key:"securite",label:"Sécurité"},{key:"reseaux",label:"Réseaux sociaux"},{key:"legaux",label:"Mentions & politique"}].map(n=>e("button",{onClick:()=>s(n.key),className:"px-4 py-2 rounded transition-all",style:{backgroundColor:t===n.key?h.primary:"#e5e7eb",color:t===n.key?h.text:"#1f2937"},children:n.label},n.key))}),t==="vitrine"&&e(Y,{}),t==="personnel"&&e(ee,{}),t==="securite"&&e(ae,{}),t==="reseaux"&&e(te,{}),t==="legaux"&&e(re,{})]})};export{oe as default};

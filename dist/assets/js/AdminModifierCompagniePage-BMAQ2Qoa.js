import{d as S,u as E,r as t,j as a,a as f}from"./react-DgrrIcw2.js";import{f as j,d as b,u as q}from"./firebase-eGIzIftJ.js";import{d as v}from"../index-p6Te0bSg.js";import"./vendor-BHjJ2Hjk.js";const T=()=>{const{id:s}=S(),y=E(),[x,N]=t.useState(!0),[n,i]=t.useState(""),[u,c]=t.useState(""),[l,m]=t.useState(""),[d,p]=t.useState(""),[g,h]=t.useState("");t.useEffect(()=>{(async()=>{try{if(!s)return;const r=await j(b(v,"companies",s));if(r.exists()){const o=r.data();i(o.nom||""),c(o.email||""),m(o.telephone||""),p(o.pays||"")}}catch(r){console.error("Erreur chargement compagnie:",r)}finally{N(!1)}})()},[s]);const C=async e=>{if(e.preventDefault(),!!s)try{await q(b(v,"companies",s),{nom:n,email:u,telephone:l,pays:d}),h("✅ Compagnie mise à jour avec succès !"),setTimeout(()=>y("/compagnies"),1500)}catch(r){console.error("Erreur mise à jour:",r),h("❌ Erreur lors de la mise à jour")}};return x?a("p",{className:"p-6",children:"Chargement..."}):f("div",{className:"p-6 max-w-2xl mx-auto",children:[a("h1",{className:"text-xl font-bold mb-4",children:"Modifier la compagnie"}),g&&a("p",{className:"mb-4 text-blue-600",children:g}),f("form",{onSubmit:C,className:"grid gap-4",children:[a("input",{value:n,onChange:e=>i(e.target.value),placeholder:"Nom de la compagnie",className:"border p-2 rounded",required:!0}),a("input",{value:u,type:"email",onChange:e=>c(e.target.value),placeholder:"Email",className:"border p-2 rounded",required:!0}),a("input",{value:l,onChange:e=>m(e.target.value),placeholder:"Téléphone",className:"border p-2 rounded",required:!0}),a("input",{value:d,onChange:e=>p(e.target.value),placeholder:"Pays",className:"border p-2 rounded",required:!0}),a("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Sauvegarder"})]})]})};export{T as default};

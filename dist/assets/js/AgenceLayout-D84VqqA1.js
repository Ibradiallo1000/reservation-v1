import{s as b,r as x,j as e,aa as j,T as f,ab as N,z as y,af as v,ax as w,ay as _,a6 as A,ad as C,a0 as k,C as L,a8 as c,az as o,a3 as M,aA as D,a7 as P}from"./react-A-4nP3fl.js";import{u as R}from"../index-ChphXJpr.js";import"./vendor-CCJV4Wg0.js";import"./firebase-CbfwkGbo.js";const i=(...a)=>a.filter(Boolean).join(" "),U=()=>{const{user:a,logout:p,hasPermission:t}=R(),r=b(),[m,d]=x.useState({}),g=x.useMemo(()=>[{label:"Dashboard",path:"/agence/dashboard",icon:e.jsx(j,{className:"w-5 h-5"}),permission:"view_dashboard"},{label:"Guichet",path:"/agence/guichet",icon:e.jsx(f,{className:"w-5 h-5"}),permission:"access_ticketing"},{label:"Trajets",path:"/agence/trajets",icon:e.jsx(N,{className:"w-5 h-5"}),permission:"manage_routes"},{label:"Courriers",icon:e.jsx(y,{className:"w-5 h-5"}),permission:"manage_mail",submenu:[{label:"Envoi",path:"/agence/courriers/envoi",permission:"mail_send"},{label:"Réception",path:"/agence/courriers/reception",permission:"mail_receive"}]},{label:"Finances",path:"/agence/finances",icon:e.jsx(v,{className:"w-5 h-5"}),permission:"view_finances"},{label:"Recettes",path:"/agence/recettes",icon:e.jsx(w,{className:"w-5 h-5"}),permission:"manage_income"},{label:"Dépenses",path:"/agence/depenses",icon:e.jsx(_,{className:"w-5 h-5"}),permission:"manage_expenses"},{label:"Personnel",path:"/agence/personnel",icon:e.jsx(A,{className:"w-5 h-5"}),permission:"manage_staff"},{label:"Réservations",path:"/agence/reservations",icon:e.jsx(C,{className:"w-5 h-5"}),permission:"manage_bookings"}],[]),u=s=>{d(l=>({...l,[s]:!l[s]}))},h=(s,l)=>s?o(s,r.pathname):l?l.some(n=>o(n.path,r.pathname)):!1;return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsxs("aside",{className:"w-64 bg-gray-800 text-white flex flex-col fixed h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsx("h1",{className:"text-xl font-bold",children:(a==null?void 0:a.agencyName)||"Tableau de bord"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Version ","1.2.3"]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:e.jsx("div",{className:"space-y-1 px-2",children:g.map(s=>!s.permission||t(s.permission)?s.submenu?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(s.label),className:i("flex items-center w-full px-4 py-3 text-sm font-medium rounded-md transition-colors","hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-600",h(void 0,s.submenu)?"bg-gray-700":""),children:[e.jsx("span",{className:"mr-3",children:s.icon}),s.label,m[s.label]?e.jsx(k,{className:"ml-auto h-4 w-4"}):e.jsx(L,{className:"ml-auto h-4 w-4"})]}),m[s.label]&&e.jsx("div",{className:"mt-1 space-y-1 ml-12",children:s.submenu.map(n=>!n.permission||t(n.permission)?e.jsx(c,{to:n.path,className:i("block px-3 py-2 text-sm rounded-md transition-colors","hover:bg-gray-700",o(n.path,r.pathname)?"bg-gray-700 font-medium":"text-gray-300"),children:n.label},n.path):null)})]},s.label):e.jsxs(c,{to:s.path||"#",className:i("flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors","hover:bg-gray-700",h(s.path)?"bg-gray-700":""),children:[e.jsx("span",{className:"mr-3",children:s.icon}),s.label]},s.path||s.label):null)})}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.email)}),e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:a==null?void 0:a.role})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{to:"/agence/parametres",className:"p-1 rounded-md hover:bg-gray-700 text-gray-300 hover:text-white",title:"Paramètres",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("button",{onClick:p,className:"p-1 rounded-md hover:bg-gray-700 text-gray-300 hover:text-white",title:"Déconnexion",children:e.jsx(D,{className:"h-5 w-5"})})]})]})})]}),e.jsx("main",{className:"flex-1 ml-64 p-6 overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(P,{})})})]})};export{U as default};

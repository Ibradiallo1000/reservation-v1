import{b as Ie,r as x,a as t,j as e,J as W,a0 as _e,ae as ge,b7 as Z,b8 as Ge,V as ue,O,Q as be,b9 as Le,p as Fe,a1 as X,a5 as qe}from"./react-KXT1Riez.js";import{u as D,t as j,r as V,w as A,T as w,E as Ve}from"./firebase-DYTOaTLw.js";import{u as Pe,d as $}from"../index-CBC3XRHi.js";import"./vendor-B27hBV_J.js";const l=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(a||0),K=a=>new Intl.NumberFormat("fr-FR").format(a||0),xe=(a=new Date)=>new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),P=(a=new Date)=>new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999),Be=(a,n)=>{const c=new Date(a);return c.setDate(c.getDate()+n),c},pe=(a=new Date)=>new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0),rt=()=>{const{user:a}=Pe(),n=Ie(),[c,h]=x.useState("dashboard"),[d,o]=x.useState("mois"),[s,i]=x.useState(""),[b,u]=x.useState(""),[M,ee]=x.useState(!1),[Xe,te]=x.useState(null),[v,Ne]=x.useState([]),[f,ve]=x.useState([]),[fe,ye]=x.useState([]),[we,Ce]=x.useState([]),[Qe,We]=x.useState([]),[Ee,ae]=x.useState(null),[se,re]=x.useState(null),[y,I]=x.useState("company_viewer"),{from:C,to:E,label:le}=x.useMemo(()=>{const r=new Date;if(d==="jour")return{from:xe(r),to:P(r),label:"Aujourd'hui"};if(d==="semaine")return{from:xe(Be(r,-6)),to:P(r),label:"7 derniers jours"};if(d==="mois")return{from:pe(r),to:P(r),label:"Mois en cours"};const m=s?new Date(`${s}T00:00:00`):pe(r),g=b?new Date(`${b}T23:59:59`):P(r);return{from:m,to:g,label:"Période personnalisée"}},[d,s,b]);x.useEffect(()=>{if(!a)return;const r=a.roles||[];r.includes("ceo")?I("ceo"):r.includes("financial_director")?I("financial_director"):r.includes("company_accountant")?I("company_accountant"):r.includes("company_viewer")&&I("company_viewer"),["ceo","financial_director","company_accountant","company_viewer"].includes(y)||n("/unauthorized")},[a,y,n]),x.useEffect(()=>{(async()=>{if(a!=null&&a.companyId)try{const m=(await D(j($,"companies",a.companyId,"agences"))).docs.map(g=>{const p=g.data();return{id:g.id,nom:p.nomAgence||p.nom||"Agence",ville:p.ville||p.city||""}});Ne(m)}catch(r){console.error("Erreur chargement agences:",r)}})()},[a==null?void 0:a.companyId]);const z=x.useCallback(async()=>{if(a!=null&&a.companyId){ee(!0);try{const r=[];for(const m of v){const g=j($,"companies",a.companyId,"agences",m.id,"reservations"),p=V(g,A("createdAt",">=",w.fromDate(C)),A("createdAt","<=",w.fromDate(E))),_=j($,"companies",a.companyId,"agences",m.id,"cashReceipts"),ke=V(_,A("createdAt",">=",w.fromDate(C)),A("createdAt","<=",w.fromDate(E))),Re=j($,"companies",a.companyId,"agences",m.id,"cashMovements"),Me=V(Re,A("createdAt",">=",w.fromDate(C)),A("createdAt","<=",w.fromDate(E))),[Te,Se,De]=await Promise.all([D(p),D(ke),D(Me)]);let G=0,L=0,de=0,oe=0;Te.forEach(T=>{const N=T.data(),k=String(N.canal||"").toLowerCase(),S=Number(N.montant||0),$e=(N.seatsGo||0)+(N.seatsReturn||0);de+=1,oe+=$e,k==="guichet"||k===""?G+=S:k==="en_ligne"&&(L+=S)});let F=0,me=0,Ze=0;Se.forEach(T=>{const N=T.data();F+=Number(N.cashReceived||0),me+=Number(N.mmExpected||0)});let J=0,U=0;De.forEach(T=>{const N=T.data(),k=String(N.kind||""),S=Number(N.amount||0);k==="entree_manual"?J+=S:(k==="depense"||k==="transfert_banque")&&(U+=S)});const he=G+L,Y=F+J-U,q=G-F;let H="ok";Math.abs(q)>1e4&&(H="warning"),(Math.abs(q)>5e4||Y<0)&&(H="danger");const je=Math.abs(q)>5e4||Y<0||he===0&&v.length>1;r.push({agenceId:m.id,agenceNom:m.nom,ville:m.ville,ventesGuichet:G,ventesEnLigne:L,ventesTotal:he,especesRecues:F,mobileMoneyRecu:me,onlineRecu:L,entreesManuelles:J,sortiesAgence:U,soldeCaisse:Y,ecartEspeces:q,statutCaisse:H,nbReservations:de,nbBillets:oe,hasAlert:je})}ve(r),Ae(r)}catch(r){console.error("Erreur chargement performance:",r)}finally{ee(!1)}}},[a==null?void 0:a.companyId,v,C,E]),ne=x.useCallback(async()=>{if(a!=null&&a.companyId)try{const r=j($,"companies",a.companyId,"companyMovements"),m=V(r,A("createdAt",">=",w.fromDate(C)),A("createdAt","<=",w.fromDate(E)),Ve("createdAt","desc")),p=(await D(m)).docs.map(_=>({id:_.id,..._.data()}));ye(p)}catch(r){console.error("Erreur chargement mouvements compagnie:",r)}},[a==null?void 0:a.companyId,C,E]),Ae=r=>{const m=[],g=w.now();r.forEach(p=>{Math.abs(p.ecartEspeces)>5e4&&m.push({id:`${p.agenceId}-ecart`,type:"caisse",severity:"high",title:"Écart espèces élevé",message:`Écart de ${l(p.ecartEspeces)} entre ventes et caisse`,agencyId:p.agenceId,agencyName:p.agenceNom,createdAt:g}),p.soldeCaisse<0&&m.push({id:`${p.agenceId}-solde`,type:"caisse",severity:"high",title:"Solde caisse négatif",message:`Caisse en négatif de ${l(Math.abs(p.soldeCaisse))}`,agencyId:p.agenceId,agencyName:p.agenceNom,createdAt:g}),p.ventesTotal===0&&v.length>1&&m.push({id:`${p.agenceId}-ventes`,type:"ventes",severity:"medium",title:"Aucune vente aujourd'hui",message:`L'agence ${p.agenceNom} n'a enregistré aucune vente`,agencyId:p.agenceId,agencyName:p.agenceNom,createdAt:g})}),Ce(m)},ie=x.useCallback(async r=>{if(a!=null&&a.companyId){te(r),ae(r);try{const m=v.find(g=>g.id===r);if(!m)return;re({...m,performance:f.find(g=>g.agenceId===r)})}catch(m){console.error("Erreur chargement détails agence:",m)}finally{te(null)}}},[a==null?void 0:a.companyId,v,f]),ce=x.useMemo(()=>f.length===0?{ventesTotal:0,ventesGuichet:0,ventesEnLigne:0,especesRecues:0,mobileMoneyRecu:0,onlineRecu:0,soldeTotalCaisse:0,ecartTotalEspeces:0,nbReservations:0,nbBillets:0}:f.reduce((r,m)=>({ventesTotal:r.ventesTotal+m.ventesTotal,ventesGuichet:r.ventesGuichet+m.ventesGuichet,ventesEnLigne:r.ventesEnLigne+m.ventesEnLigne,especesRecues:r.especesRecues+m.especesRecues,mobileMoneyRecu:r.mobileMoneyRecu+m.mobileMoneyRecu,onlineRecu:r.onlineRecu+m.onlineRecu,soldeTotalCaisse:r.soldeTotalCaisse+m.soldeCaisse,ecartTotalEspeces:r.ecartTotalEspeces+m.ecartEspeces,nbReservations:r.nbReservations+m.nbReservations,nbBillets:r.nbBillets+m.nbBillets}),{ventesTotal:0,ventesGuichet:0,ventesEnLigne:0,especesRecues:0,mobileMoneyRecu:0,onlineRecu:0,soldeTotalCaisse:0,ecartTotalEspeces:0,nbReservations:0,nbBillets:0}),[f]);return x.useEffect(()=>{a!=null&&a.companyId&&v.length>0&&(z(),ne())},[a==null?void 0:a.companyId,v,C,E,z,ne]),t("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b",children:e("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t("div",{className:"flex items-center gap-3",children:[e("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:e(W,{className:"h-5 w-5 text-white"})}),t("div",{children:[e("h1",{className:"text-xl font-bold text-gray-900",children:"Comptabilité Compagnie"}),e("p",{className:"text-sm text-gray-600",children:le})]}),e("div",{className:"ml-4 px-3 py-1 rounded-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100",children:e("span",{className:"text-xs font-medium text-blue-700 capitalize",children:y.replace("_"," ")})})]}),t("div",{className:"flex items-center gap-3",children:[t("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e("button",{className:`px-3 py-1.5 rounded text-sm font-medium ${d==="jour"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>o("jour"),children:"Jour"}),e("button",{className:`px-3 py-1.5 rounded text-sm font-medium ${d==="semaine"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>o("semaine"),children:"Semaine"}),e("button",{className:`px-3 py-1.5 rounded text-sm font-medium ${d==="mois"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>o("mois"),children:"Mois"}),e("button",{className:`px-3 py-1.5 rounded text-sm font-medium ${d==="custom"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>o("custom"),children:"Perso"})]}),d==="custom"&&t("div",{className:"flex items-center gap-2",children:[e("input",{type:"date",className:"border rounded-lg px-3 py-1.5 text-sm",value:s,onChange:r=>i(r.target.value)}),e("span",{className:"text-gray-400",children:"→"}),e("input",{type:"date",className:"border rounded-lg px-3 py-1.5 text-sm",value:b,onChange:r=>u(r.target.value)})]}),e("button",{onClick:z,disabled:M,className:"p-2 rounded-lg border hover:bg-gray-50",children:e(_e,{className:`h-4 w-4 ${M?"animate-spin":""}`})})]})]})})}),e("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:e("div",{className:"flex overflow-x-auto pb-2",children:t("nav",{className:"flex space-x-1",children:[e(R,{active:c==="dashboard",onClick:()=>h("dashboard"),icon:e(ge,{className:"h-4 w-4"}),label:"Tableau de bord"}),e(R,{active:c==="reconciliation",onClick:()=>h("reconciliation"),icon:e(Z,{className:"h-4 w-4"}),label:"Réconciliation"}),e(R,{active:c==="agencies",onClick:()=>h("agencies"),icon:e(W,{className:"h-4 w-4"}),label:"Agences"}),["ceo","financial_director","company_accountant"].includes(y)&&e(R,{active:c==="movements",onClick:()=>h("movements"),icon:e(Ge,{className:"h-4 w-4"}),label:"Mouvements"}),e(R,{active:c==="reports",onClick:()=>h("reports"),icon:e(ue,{className:"h-4 w-4"}),label:"Rapports"}),["ceo","financial_director"].includes(y)&&e(R,{active:c==="audit",onClick:()=>h("audit"),icon:e(O,{className:"h-4 w-4"}),label:"Audit"})]})})}),t("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 pb-8",children:[c==="dashboard"&&e(Oe,{totals:ce,performanceData:f,alerts:we,loading:M,userRole:y,onSelectAgency:ie}),c==="reconciliation"&&e(Ke,{performanceData:f,loading:M,userRole:y}),c==="agencies"&&e(ze,{agencies:v,performanceData:f,loading:M,onSelectAgency:ie}),c==="movements"&&e(Je,{movements:fe,userRole:y}),c==="reports"&&e(Ue,{performanceData:f,totals:ce,range:d,from:C,to:E,label:le}),c==="audit"&&e(Ye,{userRole:y})]}),Ee&&se&&e(He,{agency:se,onClose:()=>{ae(null),re(null)}})]})},R=({active:a,onClick:n,icon:c,label:h})=>t("button",{className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,onClick:n,children:[c,e("span",{children:h})]}),Oe=({totals:a,performanceData:n,alerts:c,loading:h,userRole:d,onSelectAgency:o})=>t("div",{className:"space-y-6",children:[t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(B,{icon:e(be,{className:"h-5 w-5"}),label:"Chiffre d'affaires",value:l(a.ventesTotal),sublabel:`${l(a.ventesGuichet)} guichet + ${l(a.ventesEnLigne)} ligne`,trend:"up"}),e(B,{icon:e(Le,{className:"h-5 w-5"}),label:"Argent en caisse",value:l(a.especesRecues),sublabel:`Solde total: ${l(a.soldeTotalCaisse)}`,trend:a.soldeTotalCaisse>=0?"up":"down"}),e(B,{icon:e(Fe,{className:"h-5 w-5"}),label:"Argent compagnie",value:l(a.mobileMoneyRecu+a.onlineRecu),sublabel:`${l(a.mobileMoneyRecu)} MM + ${l(a.onlineRecu)} ligne`,trend:"up"}),e(B,{icon:e(X,{className:"h-5 w-5"}),label:"Écart total",value:l(a.ecartTotalEspeces),sublabel:Math.abs(a.ecartTotalEspeces)<1e3?"OK":"À vérifier",trend:Math.abs(a.ecartTotalEspeces)<1e3?"up":"down"})]}),c.length>0&&t("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-100 rounded-xl p-4",children:[t("div",{className:"flex items-center justify-between mb-3",children:[t("div",{className:"flex items-center gap-2",children:[e(X,{className:"h-5 w-5 text-red-600"}),t("h3",{className:"font-semibold text-red-800",children:["Alertes (",c.length,")"]})]}),e("button",{className:"text-sm text-red-600 hover:text-red-800",children:"Tout marquer comme vu"})]}),t("div",{className:"space-y-2",children:[c.slice(0,3).map(s=>t("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[t("div",{children:[e("div",{className:"font-medium text-gray-900",children:s.title}),e("div",{className:"text-sm text-gray-600",children:s.message}),s.agencyName&&t("div",{className:"text-xs text-gray-500 mt-1",children:["Agence: ",s.agencyName]})]}),e("div",{className:`px-2 py-1 rounded text-xs font-medium ${s.severity==="high"?"bg-red-100 text-red-700":s.severity==="medium"?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:s.severity==="high"?"Critique":s.severity==="medium"?"Important":"Info"})]},s.id)),c.length>3&&e("div",{className:"text-center pt-2",children:t("button",{className:"text-sm text-blue-600 hover:text-blue-800",children:["Voir les ",c.length-3," autres alertes"]})})]})]}),t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b",children:t("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance par agence"}),t("span",{className:"text-sm text-gray-600",children:[n.length," agence",n.length>1?"s":""]})]})}),h?t("div",{className:"p-8 text-center",children:[e("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),e("p",{className:"mt-2 text-gray-600",children:"Chargement des données..."})]}):n.length===0?e("div",{className:"p-8 text-center text-gray-500",children:"Aucune donnée disponible pour la période sélectionnée"}):e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agence"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CA Total"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CA Guichet"}),e("th",{className:"px6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CA Ligne"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde Caisse"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Écart"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e("tbody",{className:"divide-y divide-gray-200",children:n.map(s=>t("tr",{className:"hover:bg-gray-50",children:[t("td",{className:"px-6 py-4",children:[e("div",{className:"font-medium text-gray-900",children:s.agenceNom}),s.ville&&e("div",{className:"text-sm text-gray-500",children:s.ville})]}),t("td",{className:"px-6 py-4",children:[e("div",{className:"font-semibold text-gray-900",children:l(s.ventesTotal)}),t("div",{className:"text-sm text-gray-500",children:[s.nbReservations," réservations"]})]}),e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium",children:l(s.ventesGuichet)})}),e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium",children:l(s.ventesEnLigne)})}),e("td",{className:"px-6 py-4",children:e("div",{className:`font-semibold ${s.soldeCaisse>=0?"text-green-700":"text-red-700"}`,children:l(s.soldeCaisse)})}),e("td",{className:"px-6 py-4",children:e("div",{className:`font-medium ${Math.abs(s.ecartEspeces)<1e3?"text-gray-700":s.ecartEspeces>0?"text-orange-700":"text-red-700"}`,children:l(s.ecartEspeces)})}),t("td",{className:"px-6 py-4",children:[e("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.statutCaisse==="ok"?"bg-green-100 text-green-800":s.statutCaisse==="warning"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:s.statutCaisse==="ok"?"OK":s.statutCaisse==="warning"?"Attention":"Problème"}),s.hasAlert&&e(X,{className:"h-4 w-4 text-red-500 ml-1 inline"})]}),e("td",{className:"px-6 py-4",children:t("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>o(s.agenceId),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Détail"}),["ceo","financial_director"].includes(d)&&e("button",{className:"text-gray-600 hover:text-gray-800 text-sm",children:"Exporter"})]})})]},s.agenceId))}),e("tfoot",{className:"bg-gray-50",children:t("tr",{children:[e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:"TOTAL"}),e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:l(a.ventesTotal)}),e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:l(a.ventesGuichet)}),e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:l(a.ventesEnLigne)}),e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:l(a.soldeTotalCaisse)}),e("th",{className:"px-6 py-3 text-left font-semibold text-gray-900",children:l(a.ecartTotalEspeces)}),t("th",{colSpan:2,className:"px-6 py-3 text-left font-semibold text-gray-900",children:[n.filter(s=>s.statutCaisse==="ok").length," / ",n.length," OK"]})]})})]})})]})]}),Ke=({performanceData:a,loading:n,userRole:c})=>{const[h,d]=x.useState(null),o=async s=>{["ceo","financial_director","company_accountant"].includes(c)&&(d(s),await new Promise(i=>setTimeout(i,1e3)),d(null))};return t("div",{className:"space-y-6",children:[t("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e(Z,{className:"h-6 w-6 text-blue-600"}),t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Vérification d'équilibre"}),e("p",{className:"text-sm text-gray-600",children:"Compare les ventes déclarées avec l'argent réellement encaissé"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("div",{className:"bg-white p-4 rounded-lg border",children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Ventes totales agences"}),e("div",{className:"text-2xl font-bold text-gray-900",children:l(a.reduce((s,i)=>s+i.ventesTotal,0))})]}),t("div",{className:"bg-white p-4 rounded-lg border",children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Argent en caisse"}),e("div",{className:"text-2xl font-bold text-gray-900",children:l(a.reduce((s,i)=>s+i.especesRecues,0))})]}),t("div",{className:`p-4 rounded-lg ${Math.abs(a.reduce((s,i)=>s+i.ecartEspeces,0))<1e3?"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-100":"bg-gradient-to-r from-red-50 to-orange-50 border border-red-100"}`,children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Écart global"}),e("div",{className:`text-2xl font-bold ${Math.abs(a.reduce((s,i)=>s+i.ecartEspeces,0))<1e3?"text-green-700":"text-red-700"}`,children:l(a.reduce((s,i)=>s+i.ecartEspeces,0))}),e("div",{className:"text-sm mt-1",children:Math.abs(a.reduce((s,i)=>s+i.ecartEspeces,0))<1e3?"✓ Équilibre respecté":"⚠️ Déséquilibre détecté"})]})]})]}),t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b",children:t("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Réconciliation par agence"}),["ceo","financial_director"].includes(c)&&e("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Valider toute la période"})]})}),n?e("div",{className:"p-8 text-center",children:e("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"})}):e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agence"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ventes Guichet"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Espèces Attendues"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Espèces Reçues"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Écart"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"})]})}),e("tbody",{className:"divide-y divide-gray-200",children:a.map(s=>t("tr",{children:[e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium text-gray-900",children:s.agenceNom})}),e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium",children:l(s.ventesGuichet)})}),e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium",children:l(s.ventesGuichet)})}),e("td",{className:"px-6 py-4",children:e("div",{className:"font-medium",children:l(s.especesRecues)})}),e("td",{className:"px-6 py-4",children:e("div",{className:`font-semibold ${Math.abs(s.ecartEspeces)<1e3?"text-gray-700":s.ecartEspeces>0?"text-orange-700":"text-red-700"}`,children:l(s.ecartEspeces)})}),e("td",{className:"px-6 py-4",children:e("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Math.abs(s.ecartEspeces)<1e3?"bg-green-100 text-green-800":Math.abs(s.ecartEspeces)<1e4?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:Math.abs(s.ecartEspeces)<1e3?"OK":Math.abs(s.ecartEspeces)<1e4?"Attention":"Problème"})}),e("td",{className:"px-6 py-4",children:["ceo","financial_director","company_accountant"].includes(c)?e("button",{onClick:()=>o(s.agenceId),disabled:h===s.agenceId,className:`px-4 py-2 rounded-lg text-sm font-medium ${Math.abs(s.ecartEspeces)<1e3?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:h===s.agenceId?"Validation...":"Valider"}):e("span",{className:"text-gray-500 text-sm",children:"Lecture seule"})})]},s.agenceId))})]})})]})]})},ze=({agencies:a,performanceData:n,loading:c,onSelectAgency:h})=>e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(d=>{const o=n.find(s=>s.agenceId===d.id);return t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[t("div",{className:"p-6",children:[t("div",{className:"flex items-start justify-between mb-4",children:[t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:d.nom}),d.ville&&e("p",{className:"text-sm text-gray-600",children:d.ville})]}),e("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${(o==null?void 0:o.statutCaisse)==="ok"?"bg-green-100":(o==null?void 0:o.statutCaisse)==="warning"?"bg-orange-100":"bg-red-100"}`,children:e(W,{className:`h-5 w-5 ${(o==null?void 0:o.statutCaisse)==="ok"?"text-green-600":(o==null?void 0:o.statutCaisse)==="warning"?"text-orange-600":"text-red-600"}`})})]}),o?t("div",{className:"space-y-4",children:[t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{children:[e("div",{className:"text-sm text-gray-500",children:"Chiffre d'affaires"}),e("div",{className:"font-semibold text-gray-900",children:l(o.ventesTotal)})]}),t("div",{children:[e("div",{className:"text-sm text-gray-500",children:"Solde caisse"}),e("div",{className:`font-semibold ${o.soldeCaisse>=0?"text-green-700":"text-red-700"}`,children:l(o.soldeCaisse)})]})]}),t("div",{children:[e("div",{className:"text-sm text-gray-500",children:"Écart espèces"}),e("div",{className:`font-medium ${Math.abs(o.ecartEspeces)<1e3?"text-gray-700":o.ecartEspeces>0?"text-orange-700":"text-red-700"}`,children:l(o.ecartEspeces)})]}),e("div",{className:"pt-4 border-t",children:t("div",{className:"flex items-center justify-between text-sm",children:[t("span",{className:"text-gray-600",children:[o.nbReservations," réservations"]}),t("span",{className:"text-gray-600",children:[o.nbBillets," billets"]})]})})]}):c?e("div",{className:"py-8 text-center",children:e("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-gray-400 border-r-transparent"})}):e("div",{className:"py-8 text-center text-gray-500",children:"Aucune donnée disponible"})]}),e("div",{className:"px-6 py-4 bg-gray-50 border-t",children:e("button",{onClick:()=>h(d.id),className:"w-full px-4 py-2 bg-white border rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Voir le détail"})})]},d.id)})}),Je=({movements:a,userRole:n})=>{const[c,h]=x.useState(!1),[d,o]=x.useState({type:"depense",category:"",amount:"",label:"",method:"cash",note:""}),s=["ceo","financial_director","company_accountant"].includes(n);return t("div",{className:"space-y-6",children:[s&&t("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Nouveau mouvement"}),e("button",{onClick:()=>h(!c),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:c?"Annuler":"Ajouter un mouvement"})]}),c&&t("div",{className:"space-y-4",children:[t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t("select",{className:"w-full border rounded-lg px-3 py-2",value:d.type,onChange:i=>o({...d,type:i.target.value}),children:[e("option",{value:"depense",children:"Dépense"}),e("option",{value:"entree",children:"Entrée"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moyen de paiement"}),t("select",{className:"w-full border rounded-lg px-3 py-2",value:d.method,onChange:i=>o({...d,method:i.target.value}),children:[e("option",{value:"cash",children:"Espèces"}),e("option",{value:"bank",children:"Virement bancaire"}),e("option",{value:"cheque",children:"Chèque"}),e("option",{value:"mobile_money",children:"Mobile Money"})]})]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Libellé"}),e("input",{type:"text",className:"w-full border rounded-lg px-3 py-2",placeholder:"Ex: Achat fournitures bureau",value:d.label,onChange:i=>o({...d,label:i.target.value})})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant (FCFA)"}),e("input",{type:"number",className:"w-full border rounded-lg px-3 py-2",placeholder:"0",value:d.amount,onChange:i=>o({...d,amount:i.target.value})})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (facultatif)"}),e("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:3,placeholder:"Informations complémentaires...",value:d.note,onChange:i=>o({...d,note:i.target.value})})]}),t("div",{className:"flex justify-end gap-3",children:[e("button",{onClick:()=>h(!1),className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),e("button",{onClick:()=>{h(!1),o({type:"depense",category:"",amount:"",label:"",method:"cash",note:""})},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Enregistrer"})]})]})]}),t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b",children:e("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des mouvements"})}),a.length===0?e("div",{className:"p-8 text-center text-gray-500",children:"Aucun mouvement enregistré"}):e("div",{className:"overflow-x-auto",children:t("table",{className:"w-full",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Libellé"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Moyen"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Créé par"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),e("tbody",{className:"divide-y divide-gray-200",children:a.map(i=>{var b,u;return t("tr",{children:[e("td",{className:"px-6 py-4",children:e("div",{className:"text-sm text-gray-900",children:((u=(b=i.createdAt)==null?void 0:b.toDate)==null?void 0:u.call(b).toLocaleDateString("fr-FR"))||"—"})}),e("td",{className:"px-6 py-4",children:e("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.type==="entree"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.type==="entree"?"Entrée":"Dépense"})}),t("td",{className:"px-6 py-4",children:[e("div",{className:"font-medium text-gray-900",children:i.label}),i.note&&e("div",{className:"text-sm text-gray-500",children:i.note})]}),e("td",{className:"px-6 py-4",children:e("div",{className:"text-sm text-gray-900",children:i.method==="cash"?"Espèces":i.method==="bank"?"Banque":i.method==="cheque"?"Chèque":"Mobile Money"})}),e("td",{className:"px-6 py-4",children:e("div",{className:`font-semibold ${i.type==="entree"?"text-green-700":"text-red-700"}`,children:l(i.amount)})}),e("td",{className:"px-6 py-4",children:e("div",{className:"text-sm text-gray-900",children:i.createdByName})}),e("td",{className:"px-6 py-4",children:i.validated?e("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Validé"}):e("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})})]},i.id)})})]})})]})]})},Ue=({performanceData:a,totals:n,range:c,from:h,to:d,label:o})=>t("div",{className:"space-y-6",children:[t("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[t("div",{className:"flex items-center justify-between mb-6",children:[t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Rapports financiers"}),e("p",{className:"text-sm text-gray-600",children:"Générez des rapports détaillés pour la période"})]}),t("div",{className:"flex items-center gap-3",children:[t("button",{onClick:()=>{const b=a.map(u=>({Agence:u.agenceNom,"CA Total":u.ventesTotal,"CA Guichet":u.ventesGuichet,"CA Ligne":u.ventesEnLigne,"Espèces Reçues":u.especesRecues,"Solde Caisse":u.soldeCaisse,Écart:u.ecartEspeces,Statut:u.statutCaisse==="ok"?"OK":u.statutCaisse==="warning"?"Attention":"Problème"}));console.log("Données à exporter:",b),alert("Export Excel à implémenter")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:[e(qe,{className:"h-4 w-4 inline mr-2"}),"Export Excel"]}),t("button",{onClick:()=>{alert("Export PDF à implémenter")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:[e(ue,{className:"h-4 w-4 inline mr-2"}),"Export PDF"]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e(Q,{title:"Rapport financier complet",description:"Synthèse détaillée de l'ensemble des données financières",icon:e(ge,{className:"h-6 w-6"}),onGenerate:()=>console.log("Générer rapport complet")}),e(Q,{title:"Réconciliation par agence",description:"Vérification détaillée des écarts par agence",icon:e(Z,{className:"h-6 w-6"}),onGenerate:()=>console.log("Générer rapport réconciliation")}),e(Q,{title:"Analyse des performances",description:"Tendances et comparaisons périodiques",icon:e(be,{className:"h-6 w-6"}),onGenerate:()=>console.log("Générer analyse performances")})]})]}),t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b",children:e("h3",{className:"text-lg font-semibold text-gray-900",children:"Aperçu des données"})}),e("div",{className:"p-6",children:t("div",{className:"space-y-4",children:[t("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Période"}),e("div",{className:"font-medium text-gray-900",children:o})]}),t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Nombre d'agences"}),e("div",{className:"font-medium text-gray-900",children:a.length})]}),t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Réservations totales"}),e("div",{className:"font-medium text-gray-900",children:K(n.nbReservations)})]}),t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Billets vendus"}),e("div",{className:"font-medium text-gray-900",children:K(n.nbBillets)})]})]}),t("div",{className:"pt-4 border-t",children:[e("h4",{className:"font-medium text-gray-900 mb-3",children:"Résumé financier"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{className:"space-y-2",children:[t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Chiffre d'affaires total:"}),e("span",{className:"font-medium",children:l(n.ventesTotal)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Argent en caisse agences:"}),e("span",{className:"font-medium",children:l(n.especesRecues)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Argent compagnie (MM + ligne):"}),e("span",{className:"font-medium",children:l(n.mobileMoneyRecu+n.onlineRecu)})]})]}),t("div",{className:"space-y-2",children:[t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Solde total des caisses:"}),e("span",{className:`font-medium ${n.soldeTotalCaisse>=0?"text-green-700":"text-red-700"}`,children:l(n.soldeTotalCaisse)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Écart total espèces:"}),e("span",{className:`font-medium ${Math.abs(n.ecartTotalEspeces)<1e3?"text-gray-700":"text-orange-700"}`,children:l(n.ecartTotalEspeces)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Agences avec alertes:"}),t("span",{className:"font-medium",children:[a.filter(b=>b.hasAlert).length," / ",a.length]})]})]})]})]})]})})]})]}),Ye=({userRole:a})=>["ceo","financial_director"].includes(a)?t("div",{className:"space-y-6",children:[t("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e(O,{className:"h-6 w-6 text-blue-600"}),t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:"Audit et traçabilité"}),e("p",{className:"text-sm text-gray-600",children:"Historique complet des actions et modifications"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("div",{className:"bg-white p-4 rounded-lg border",children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Validations récentes"}),e("div",{className:"text-2xl font-bold text-gray-900",children:"12"}),e("div",{className:"text-sm text-gray-600 mt-1",children:"7 derniers jours"})]}),t("div",{className:"bg-white p-4 rounded-lg border",children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Modifications"}),e("div",{className:"text-2xl font-bold text-gray-900",children:"47"}),e("div",{className:"text-sm text-gray-600 mt-1",children:"Ce mois"})]}),t("div",{className:"bg-white p-4 rounded-lg border",children:[e("div",{className:"text-sm text-gray-500 mb-1",children:"Connexions suspectes"}),e("div",{className:"text-2xl font-bold text-gray-900",children:"0"}),e("div",{className:"text-sm text-green-600 mt-1",children:"✓ Aucune alerte"})]})]})]}),t("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b",children:e("h3",{className:"text-lg font-semibold text-gray-900",children:"Journal d'audit"})}),e("div",{className:"p-6",children:e("div",{className:"space-y-4",children:[1,2,3,4,5].map(n=>t("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50",children:[e("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e(O,{className:"h-5 w-5 text-blue-600"})}),t("div",{className:"flex-1",children:[t("div",{className:"flex items-center justify-between mb-1",children:[e("div",{className:"font-medium text-gray-900",children:"Validation de réconciliation"}),t("div",{className:"text-sm text-gray-500",children:["Il y a ",n," heures"]})]}),e("p",{className:"text-sm text-gray-600 mb-2",children:`La réconciliation de l'agence "Dakar Plateau" a été validée par Jean Dupont.`}),t("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e("span",{children:"Utilisateur: Jean Dupont"}),t("span",{children:["IP: 192.168.1.",n]}),e("span",{children:"Navigateur: Chrome"})]})]})]},n))})})]})]}):t("div",{className:"bg-white rounded-xl border shadow-sm p-8 text-center",children:[e(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Accès restreint"}),e("p",{className:"text-gray-600",children:"Cette section est réservée aux directeurs financiers et CEO."})]}),B=({icon:a,label:n,value:c,sublabel:h,trend:d="neutral"})=>t("div",{className:"bg-white rounded-xl border shadow-sm p-6 hover:shadow-md transition-shadow",children:[t("div",{className:"flex items-start justify-between mb-4",children:[e("div",{className:"text-sm font-medium text-gray-500",children:n}),e("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${d==="up"?"bg-green-100":d==="down"?"bg-red-100":"bg-gray-100"}`,children:e("span",{className:d==="up"?"text-green-600":d==="down"?"text-red-600":"text-gray-600",children:a})})]}),t("div",{className:"space-y-1",children:[e("div",{className:"text-2xl font-bold text-gray-900",children:c}),h&&e("div",{className:"text-sm text-gray-600",children:h})]})]}),Q=({title:a,description:n,icon:c,onGenerate:h})=>t("div",{className:"bg-gray-50 rounded-lg border p-6 hover:bg-gray-100 transition-colors",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"h-10 w-10 rounded-lg bg-white border flex items-center justify-center",children:c}),t("div",{children:[e("h4",{className:"font-semibold text-gray-900",children:a}),e("p",{className:"text-sm text-gray-600",children:n})]})]}),e("button",{onClick:h,className:"w-full px-4 py-2 bg-white border rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Générer le rapport"})]}),He=({agency:a,onClose:n})=>t("div",{className:"fixed inset-0 z-50",children:[e("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e("div",{className:"absolute right-0 top-0 h-full w-full max-w-2xl bg-white shadow-xl",children:t("div",{className:"h-full flex flex-col",children:[t("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[t("div",{children:[e("h3",{className:"text-lg font-semibold text-gray-900",children:a.nom}),a.ville&&e("p",{className:"text-sm text-gray-600",children:a.ville})]}),e("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg",children:"×"})]}),e("div",{className:"flex-1 overflow-auto p-6",children:a.performance?t("div",{className:"space-y-6",children:[t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Chiffre d'affaires"}),e("div",{className:"text-2xl font-bold text-gray-900",children:l(a.performance.ventesTotal)})]}),t("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e("div",{className:"text-sm text-gray-500",children:"Solde caisse"}),e("div",{className:`text-2xl font-bold ${a.performance.soldeCaisse>=0?"text-green-700":"text-red-700"}`,children:l(a.performance.soldeCaisse)})]})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-medium text-gray-900",children:"Détails financiers"}),t("div",{className:"space-y-2",children:[t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Ventes guichet:"}),e("span",{className:"font-medium",children:l(a.performance.ventesGuichet)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Ventes en ligne:"}),e("span",{className:"font-medium",children:l(a.performance.ventesEnLigne)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Espèces reçues:"}),e("span",{className:"font-medium",children:l(a.performance.especesRecues)})]}),t("div",{className:"flex justify-between",children:[e("span",{className:"text-gray-600",children:"Écart espèces:"}),e("span",{className:`font-medium ${Math.abs(a.performance.ecartEspeces)<1e3?"text-gray-700":"text-orange-700"}`,children:l(a.performance.ecartEspeces)})]})]})]}),t("div",{className:"space-y-4",children:[e("h4",{className:"font-medium text-gray-900",children:"Statistiques"}),t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{className:"bg-white border rounded-lg p-4",children:[e("div",{className:"text-sm text-gray-500",children:"Réservations"}),e("div",{className:"text-xl font-bold text-gray-900",children:K(a.performance.nbReservations)})]}),t("div",{className:"bg-white border rounded-lg p-4",children:[e("div",{className:"text-sm text-gray-500",children:"Billets vendus"}),e("div",{className:"text-xl font-bold text-gray-900",children:K(a.performance.nbBillets)})]})]})]})]}):e("div",{className:"text-center py-12 text-gray-500",children:"Aucune donnée disponible"})}),e("div",{className:"px-6 py-4 border-t bg-gray-50",children:t("div",{className:"flex items-center justify-end gap-3",children:[e("button",{onClick:n,className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Fermer"}),e("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Exporter rapport"})]})})]})})]});export{rt as default};

import{r as n,b as u,j as a,a as t}from"./react-KXT1Riez.js";import{u as h,r as b,E as x,t as f,y as v,x as y,o as N}from"./firebase-DYTOaTLw.js";import{d}from"../index-b0dmvJTQ.js";import"./vendor-B27hBV_J.js";const A=()=>{const[c,o]=n.useState([]),[l,g]=n.useState(!0),i=u();n.useEffect(()=>{(async()=>{const e=await h(b(f(d,"companies"),x("nom","asc")));o(e.docs.map(s=>({id:s.id,...s.data()}))),g(!1)})()},[]);async function m(e){const s=e.status==="inactif"?"actif":"inactif";await v(N(d,"companies",e.id),{status:s,updatedAt:y()}),o(p=>p.map(r=>r.id===e.id?{...r,status:s}:r))}return l?a("div",{className:"p-6",children:"Chargement…"}):t("div",{className:"p-6 space-y-6",children:[t("div",{className:"flex justify-between items-center",children:[a("h1",{className:"text-2xl font-bold text-orange-700",children:"Compagnies"}),a("button",{onClick:()=>i("/admin/compagnies/ajouter"),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg",children:"+ Ajouter une compagnie"})]}),a("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(e=>t("div",{className:"bg-white border rounded-xl p-5 space-y-4",children:[t("div",{children:[a("div",{className:"font-semibold text-lg",children:e.nom}),t("div",{className:"text-sm text-gray-600",children:[e.email||"—"," • ",e.telephone||"—"]})]}),a("span",{className:`inline-block px-2 py-1 text-xs rounded ${e.status==="actif"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status==="actif"?"Active":"Inactive"}),t("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a("button",{onClick:()=>i(`/admin/compagnies/${e.id}/configurer`),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded",children:"Configurer"}),a("button",{onClick:()=>i(`/admin/compagnies/${e.id}/modifier`),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded",children:"Modifier"}),e.slug&&a("a",{href:`/${e.slug}`,target:"_blank",rel:"noreferrer",className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded text-center",children:"Voir site"}),a("button",{onClick:()=>m(e),className:"bg-amber-500 hover:bg-amber-600 text-white px-3 py-2 rounded",children:e.status==="actif"?"Désactiver":"Activer"})]})]},e.id))})]})};export{A as default};

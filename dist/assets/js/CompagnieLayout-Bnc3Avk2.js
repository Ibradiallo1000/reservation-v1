import{a as _,n as r,j as e,F as b,J as I,K as M,Q as P,V as j,W as w,Y as g,_ as R,$ as S,a0 as E,t as G,O as J,s as K,E as W,a1 as Q}from"./react-BKlva80Y.js";import{u as U,d as L}from"../index-BrxuZDy-.js";import{q as O,w as u,j as z,n as F}from"./firebase-1zyXmG6H.js";import"./vendor-CZDa83Cj.js";const Z=()=>{var $,C,q,A,k;const o=_(),{user:s,logout:l}=U(),[m,v]=r.useState(!1),x=(($=o.state)==null?void 0:$.companyInfo)||null,a=c=>o.pathname.startsWith(c),t={primary:x!=null&&x.couleurPrimaire?`bg-[${x.couleurPrimaire}]`:"bg-indigo-600",badge:"bg-amber-500",darker:"bg-slate-900",light:"bg-slate-50",card:"bg-white"},[h,B]=r.useState(0),y=r.useRef(0),[p,D]=r.useState(0);r.useEffect(()=>{if(!(s!=null&&s.companyId))return;const c=O(z(L,"reservations"),u("companyId","==",s.companyId),u("statut","==","preuve_recue")),d=F(c,N=>{const f=N.size;f>y.current&&T(),y.current=f,B(f)});return()=>d()},[s==null?void 0:s.companyId]),r.useEffect(()=>{if(!(s!=null&&s.companyId))return;const c=O(z(L,"avis"),u("companyId","==",s.companyId),u("visible","==",!1)),d=F(c,N=>{D(N.size)});return()=>d()},[s==null?void 0:s.companyId]);const T=()=>{try{const c=new Audio("/son.mp3");c.volume=.5,c.play().catch(d=>console.warn("Lecture bloquée",d))}catch(c){console.error("Erreur audio",c)}};return e.jsxs("div",{className:`flex min-h-screen ${t.light}`,children:[e.jsxs("aside",{className:`hidden md:flex md:w-64 flex-col justify-between ${t.darker} text-white shadow-xl border-r border-slate-700`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[e.jsx("span",{className:`${t.primary} text-white rounded-lg p-2 mr-3 shadow-md`,children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-teal-400 bg-clip-text text-transparent",children:"Espace Pro"})]})}),e.jsxs("nav",{className:"flex flex-col p-4 space-y-2",children:[e.jsx(i,{to:"/compagnie/dashboard",icon:e.jsx(I,{className:"w-5 h-5"}),active:a("/compagnie/dashboard"),children:"Tableau de bord"}),e.jsx(i,{to:"/compagnie/agences",icon:e.jsx(b,{className:"w-5 h-5"}),active:a("/compagnie/agences"),children:"Agences"}),e.jsxs(i,{to:"/compagnie/avis-clients",icon:e.jsx(M,{className:"w-5 h-5"}),active:a("/compagnie/avis-clients"),children:["Avis Clients",p>0&&e.jsx("span",{className:`ml-auto ${t.badge} text-xs text-white px-2 py-1 rounded-full`,children:p})]}),e.jsx(i,{to:"/compagnie/personnel",icon:e.jsx(P,{className:"w-5 h-5"}),active:a("/compagnie/personnel"),children:"Personnel"}),e.jsx(i,{to:"/compagnie/reservations",icon:e.jsx(j,{className:"w-5 h-5"}),active:a("/compagnie/reservations"),children:"Réservations"}),e.jsxs(i,{to:"/compagnie/reservations-en-ligne",icon:e.jsx(j,{className:"w-5 h-5"}),active:a("/compagnie/reservations-en-ligne"),children:["Réservations en ligne",h>0&&e.jsx("span",{className:`ml-auto ${t.badge} text-xs text-white px-2 py-1 rounded-full`,children:h})]}),e.jsx(i,{to:"/compagnie/guichet",icon:e.jsx(w,{className:"w-5 h-5"}),active:a("/compagnie/guichet"),children:"Guichet"}),e.jsx(i,{to:"/compagnie/payment-settings",icon:e.jsx(g,{className:"w-5 h-5"}),active:a("/compagnie/payment-settings"),children:"Moyens de paiement"}),e.jsx(i,{to:"/compagnie/parametres",icon:e.jsx(g,{className:"w-5 h-5"}),active:a("/compagnie/parametres"),children:"Paramètres"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("p",{className:"text-xs uppercase text-slate-400 px-4 mb-2",children:"Analytique"}),e.jsx(i,{to:"/compagnie/images",icon:e.jsx(R,{className:"w-5 h-5"}),active:a("/compagnie/images"),children:"Médias"}),e.jsx(i,{to:"/compagnie/finances",icon:e.jsx(w,{className:"w-5 h-5"}),active:a("/compagnie/finances"),children:"Finances"}),e.jsx(i,{to:"/compagnie/statistiques",icon:e.jsx(S,{className:"w-5 h-5"}),active:a("/compagnie/statistiques"),children:"Statistiques"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${t.primary} flex items-center justify-center text-white font-medium`,children:((C=s==null?void 0:s.displayName)==null?void 0:C.charAt(0))||((q=s==null?void 0:s.email)==null?void 0:q.charAt(0))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.email)}),e.jsx("p",{className:"text-xs text-slate-400",children:s==null?void 0:s.role})]})]}),e.jsx("button",{onClick:l,title:"Déconnexion",className:"p-2 rounded-md hover:bg-slate-700 text-slate-300 hover:text-white transition-colors",children:e.jsx(E,{className:"h-4 w-4"})})]})})]}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("header",{className:`${t.card} shadow-sm p-4 md:hidden flex items-center justify-between`,children:[e.jsx("button",{onClick:()=>v(!0),className:"p-2 rounded-md text-slate-500 hover:bg-slate-100",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Espace Pro"}),e.jsx("div",{className:"w-5 h-5"})]}),e.jsx("div",{className:`flex-1 overflow-y-auto p-4 md:p-8 ${t.card} md:rounded-tl-3xl shadow-inner`,children:e.jsx(J,{})})]})}),m&&e.jsxs("div",{className:"md:hidden fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>v(!1)}),e.jsxs("div",{className:`absolute left-0 top-0 bottom-0 w-72 ${t.darker} shadow-xl`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Menu"}),e.jsx("button",{onClick:()=>v(!1),className:"p-1 rounded-md text-slate-300 hover:text-white",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex flex-col p-2 space-y-1 overflow-y-auto h-[calc(100%-120px)]",children:[e.jsx(n,{to:"/compagnie/dashboard",icon:e.jsx(I,{className:"w-5 h-5"}),active:a("/compagnie/dashboard"),children:"Tableau de bord"}),e.jsxs(n,{to:"/compagnie/reservations-en-ligne",icon:e.jsx(j,{className:"w-5 h-5"}),active:a("/compagnie/reservations-en-ligne"),children:["Réservations en ligne",h>0&&e.jsx("span",{className:`${t.badge} text-xs text-white px-2 py-0.5 rounded-full`,children:h})]}),e.jsxs(n,{to:"/compagnie/avis-clients",icon:e.jsx(M,{className:"w-5 h-5"}),active:a("/compagnie/avis-clients"),children:["Avis clients",p>0&&e.jsx("span",{className:`${t.badge} text-xs text-white px-2 py-0.5 rounded-full`,children:p})]}),e.jsx(n,{to:"/compagnie/reservations",icon:e.jsx(j,{className:"w-5 h-5"}),active:a("/compagnie/reservations"),children:"liste des Réservations"}),e.jsx(n,{to:"/compagnie/payment-settings",icon:e.jsx(g,{className:"w-5 h-5"}),active:a("/compagnie/payment-settings"),children:"Moyens de paiement"}),e.jsx(n,{to:"/compagnie/agences",icon:e.jsx(b,{className:"w-5 h-5"}),active:a("/compagnie/agences"),children:"Agences"}),e.jsx(n,{to:"/compagnie/personnel",icon:e.jsx(P,{className:"w-5 h-5"}),active:a("/compagnie/personnel"),children:"Personnel"}),e.jsx(n,{to:"/compagnie/parametres",icon:e.jsx(g,{className:"w-5 h-5"}),active:a("/compagnie/parametres"),children:"Paramètres"}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700",children:[e.jsx("p",{className:"text-xs uppercase text-slate-400 px-3 mb-1",children:"Analytique"}),e.jsx(n,{to:"/compagnie/images",icon:e.jsx(R,{className:"w-5 h-5"}),active:a("/compagnie/images"),children:"Médias"}),e.jsx(n,{to:"/compagnie/finances",icon:e.jsx(w,{className:"w-5 h-5"}),active:a("/compagnie/finances"),children:"Finances"}),e.jsx(n,{to:"/compagnie/statistiques",icon:e.jsx(S,{className:"w-5 h-5"}),active:a("/compagnie/statistiques"),children:"Statistiques"})]})]}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700 ${t.darker}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${t.primary} flex items-center justify-center text-white font-medium`,children:((A=s==null?void 0:s.displayName)==null?void 0:A.charAt(0))||((k=s==null?void 0:s.email)==null?void 0:k.charAt(0))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white truncate max-w-[120px]",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.email)}),e.jsx("p",{className:"text-xs text-slate-400",children:s==null?void 0:s.role})]})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white",children:e.jsx(E,{className:"w-4 h-4"})})]})})]})]})]})},i=({to:o,icon:s,active:l=!1,children:m})=>e.jsxs(W,{to:o,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 ${l?"bg-slate-700 text-white font-medium shadow-sm":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}`,children:[e.jsx("span",{className:`${l?"text-teal-400":"text-slate-400"}`,children:s}),e.jsx("span",{className:"flex-1 text-sm",children:m}),e.jsx(Q,{className:`w-4 h-4 transition-transform ${l?"opacity-100 text-teal-400":"opacity-0"}`})]}),n=({to:o,icon:s,active:l=!1,children:m})=>e.jsxs(W,{to:o,className:`flex items-center gap-3 px-3 py-3 rounded-lg mx-1 transition-colors ${l?"bg-slate-700 text-white font-medium":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsx("span",{className:`${l?"text-teal-400":"text-slate-400"}`,children:s}),e.jsx("span",{className:"flex-1 text-sm",children:m})]});export{Z as default};

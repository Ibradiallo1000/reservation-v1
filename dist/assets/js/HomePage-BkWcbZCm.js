import{u as x,r as n,a as s,j as e,$ as C,a0 as k,M as S,a1 as j}from"./react-DgrrIcw2.js";import{d as w,f as v,l as f,k as b,q as E,w as L}from"./firebase-eGIzIftJ.js";import{d as p,m as U}from"../index-p6Te0bSg.js";import"./vendor-BHjJ2Hjk.js";const D=()=>{const r=x(),[i,c]=n.useState(!1),[d,u]=n.useState(null);return n.useEffect(()=>{(async()=>{try{const a=w(p,"platform","settings"),g=await v(a);if(g.exists()){const m=g.data();m.logoUrl&&u(m.logoUrl)}}catch(a){console.error("Erreur chargement logo:",a)}})()},[]),s("header",{className:"bg-white/90 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-gray-200",children:[s("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[s("div",{className:"flex items-center cursor-pointer",onClick:()=>r("/"),children:[d?e("img",{src:d,alt:"Logo Teliya",className:"h-8 w-auto mr-2"}):e("img",{src:"/images/logo.png",alt:"Logo Teliya",className:"h-8 w-auto mr-2"}),e("span",{className:"text-3xl font-extrabold text-orange-600 tracking-wide",children:"Teliya"})]}),s("nav",{className:"space-x-6 hidden md:flex",children:[e("button",{onClick:()=>r("/resultats"),className:"text-gray-700 hover:text-orange-600",children:"Trajets"}),e("button",{onClick:()=>r("/destinations"),className:"text-gray-700 hover:text-orange-600",children:"Destinations"}),e("button",{onClick:()=>r("/login"),className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"Connexion"})]}),e("button",{className:"md:hidden text-gray-700 focus:outline-none",onClick:()=>c(!i),children:i?e(C,{className:"h-6 w-6"}):e(k,{className:"h-6 w-6"})})]}),i&&s("div",{className:"md:hidden bg-white border-t border-gray-200 px-4 py-3 space-y-3",children:[e("button",{onClick:()=>{r("/resultats"),c(!1)},className:"block w-full text-left hover:text-orange-600",children:"Trajets"}),e("button",{onClick:()=>{r("/destinations"),c(!1)},className:"block w-full text-left hover:text-orange-600",children:"Destinations"}),e("button",{onClick:()=>{r("/login"),c(!1)},className:"block w-full text-left bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"Connexion"})]})]})},y=({label:r,value:i,onChange:c})=>{const[d,u]=n.useState([]),[t,a]=n.useState([]),[g,m]=n.useState(!1);n.useEffect(()=>{(async()=>{const h=await f(b(p,"villes"));u(h.docs.map(N=>N.data().nom))})()},[]);const o=l=>{c(l),l?(a(d.filter(h=>h.toLowerCase().startsWith(l.toLowerCase()))),m(!0)):(a([]),m(!1))};return s("div",{className:"flex-1 relative",children:[s("div",{className:"flex items-center border rounded px-3 py-2",children:[e(S,{className:"h-5 w-5 text-orange-500 mr-2"}),e("input",{type:"text",value:i,onChange:l=>o(l.target.value),placeholder:r,className:"flex-1 outline-none",required:!0})]}),g&&t.length>0&&e("ul",{className:"absolute z-10 bg-white border mt-1 rounded shadow w-full max-h-40 overflow-y-auto",children:t.map((l,h)=>e("li",{onClick:()=>{c(l),m(!1)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:l},h))})]})},T=()=>{const r=x(),[i,c]=n.useState(""),[d,u]=n.useState(""),[t,a]=n.useState(null);n.useEffect(()=>{(async()=>{try{const o=w(p,"platform","settings"),l=await v(o);if(l.exists()){const h=l.data();h.banniereUrl&&a(h.banniereUrl)}}catch(o){console.error("Erreur lors du chargement de la bannière:",o)}})()},[]);const g=m=>{m.preventDefault(),!(!i||!d)&&r("/resultats",{state:{departure:i,arrival:d}})};return e("section",{className:"relative bg-cover bg-center text-white py-32",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url('${t||"/images/hero-travel.jpg"}')`},children:s("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[s("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Voyagez avec ",e("span",{className:"text-orange-400",children:"Teliya"})]}),e("p",{className:"text-lg mb-8",children:"Réservez vos billets en ligne, trouvez les meilleurs trajets en Afrique."}),s("form",{onSubmit:g,className:"bg-white text-gray-800 rounded-lg shadow-lg flex flex-col md:flex-row p-4 gap-4 max-w-3xl mx-auto",children:[e(y,{label:"Ville de départ",value:i,onChange:c}),e(y,{label:"Ville d’arrivée",value:d,onChange:u}),s("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded flex items-center justify-center",children:[e(j,{className:"h-5 w-5 mr-2"})," Rechercher"]})]})]})})},q=()=>{const[r,i]=n.useState([]),[c,d]=n.useState(!0),u="Mali";return n.useEffect(()=>{(async()=>{try{const a=b(p,"villes");let g=a;u&&(g=E(a,L("country","==",u)));let o=(await f(g)).docs.map(l=>({id:l.id,...l.data()}));o=o.sort((l,h)=>(h.popularity||0)-(l.popularity||0)),i(o.slice(0,6))}catch(a){console.error("Erreur lors du chargement des villes:",a)}finally{d(!1)}})()},[u]),c?e("p",{className:"text-center py-10",children:"Chargement des villes populaires..."}):r.length===0?e("p",{className:"text-center py-10 text-gray-500",children:"Aucune ville disponible pour ce pays."}):s("div",{className:"max-w-5xl mx-auto text-center",children:[e("h2",{className:"text-lg font-semibold mb-4",children:"Destinations populaires"}),e("div",{className:"flex flex-wrap justify-center gap-3",children:r.map(t=>s("span",{className:"px-4 py-2 border rounded-full bg-gray-100 hover:bg-orange-100 text-gray-700 font-medium cursor-pointer",children:[t.flag||"🏙️"," ",t.name]},t.id))})]})},z=()=>{const[r,i]=n.useState([]),[c,d]=n.useState(!0),u=x();return n.useEffect(()=>{(async()=>{try{const m=(await f(b(p,"companies"))).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.status==="actif"&&o.publicVisible!==!1);i(m)}catch(a){console.error("Erreur chargement compagnies:",a)}finally{d(!1)}})()},[]),c?e("p",{className:"text-center py-10",children:"Chargement des compagnies..."}):r.length===0?e("p",{className:"text-center py-10 text-gray-500",children:"Aucune compagnie partenaire visible."}):s("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[e("h2",{className:"text-2xl font-bold mb-6 text-orange-600",children:"Nos compagnies partenaires"}),e("div",{className:"flex gap-4 overflow-x-auto scrollbar-thin scrollbar-thumb-orange-500 scrollbar-track-gray-200 py-3",children:r.map(t=>s(U.div,{whileHover:{scale:1.05},onClick:()=>u(`/${t.slug}`),className:"min-w-[120px] max-w-[120px] bg-white rounded-lg shadow-md border-t-4 border-orange-500 p-3 cursor-pointer hover:shadow-lg transition-all",children:[e("div",{className:"w-16 h-16 mx-auto rounded-full overflow-hidden border-2 border-orange-500 shadow-sm mb-2",children:e("img",{src:t.logoUrl||"/default-logo.png",alt:t.nom,className:"w-full h-full object-cover",onError:a=>a.target.src="/default-logo.png"})}),e("p",{className:"text-xs font-semibold text-gray-800 truncate",children:t.nom}),e("p",{className:"text-[11px] text-gray-500",children:t.pays})]},t.id))})]})},M=()=>e("footer",{className:"bg-gray-900 text-gray-400 py-6 text-center",children:s("p",{children:["© ",new Date().getFullYear()," Teliya – Tous droits réservés."]})}),B=()=>s("div",{className:`min-h-screen flex flex-col \r
      bg-white \r
      bg-[url('/images/world-pattern.png')] \r
      bg-repeat`,children:[e(D,{}),s("main",{className:"flex-grow",children:[e(T,{}),e("section",{className:"py-12",children:e(q,{})}),e("section",{className:"py-12 bg-gray-50",children:e(z,{})})]}),e(M,{})]});export{B as default};

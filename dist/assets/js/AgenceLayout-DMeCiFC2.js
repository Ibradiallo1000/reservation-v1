import{a as f,r as h,j as e,J as j,T as N,V as v,az as y,aA as w,Q as A,aB as L,q as k,E as c,aC as o,Y as C,a0 as _,O as M}from"./react-BKlva80Y.js";import{u as P}from"../index-BlZmgUmn.js";import"./vendor-CZDa83Cj.js";import"./firebase-1zyXmG6H.js";const r=(...a)=>a.filter(Boolean).join(" "),U=()=>{var x;const{user:a,logout:p,hasPermission:i}=P(),t=f(),[m,u]=h.useState({}),b=h.useMemo(()=>[{label:"Dashboard",path:"/agence/dashboard",icon:e.jsx(j,{className:"w-5 h-5"}),permission:"view_dashboard"},{label:"Guichet",path:"/agence/guichet",icon:e.jsx(N,{className:"w-5 h-5"}),permission:"access_ticketing"},{label:"Réservations",path:"/agence/reservations",icon:e.jsx(v,{className:"w-5 h-5"}),permission:"manage_bookings"},{label:"Trajets",path:"/agence/trajets",icon:e.jsx(y,{className:"w-5 h-5"}),permission:"manage_routes"},{label:"Recettes",path:"/agence/recettes",icon:e.jsx(w,{className:"w-5 h-5"}),permission:"manage_income"},{label:"Personnel",path:"/agence/personnel",icon:e.jsx(A,{className:"w-5 h-5"}),permission:"manage_staff"}],[]),g=s=>{u(l=>({...l,[s]:!l[s]}))},d=(s,l)=>s?o(s,t.pathname):l?l.some(n=>o(n.path,t.pathname)):!1;return e.jsxs("div",{className:"flex min-h-screen bg-[#f4f6fc]",children:[e.jsxs("aside",{className:"w-64 bg-white shadow-md text-gray-900 flex flex-col fixed h-full",children:[e.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[a!=null&&a.agencyLogoUrl?e.jsx("img",{src:a.agencyLogoUrl,alt:a.agencyName,className:"h-10 w-10 rounded-full object-cover border border-gray-200",onError:s=>{s.target.src="/default-company.png"}}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold",children:((x=a==null?void 0:a.agencyName)==null?void 0:x.charAt(0))||"A"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-blue-800",children:(a==null?void 0:a.agencyName)||"Tableau de bord"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Version ","1.2.3"]})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:e.jsx("div",{className:"space-y-1 px-2",children:b.map(s=>!s.permission||i(s.permission)?s.submenu?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>g(s.label),className:r("flex items-center w-full px-4 py-3 text-sm font-medium rounded-md transition-colors","hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-200",d(void 0,s.submenu)?"bg-blue-100 text-blue-700":""),children:[e.jsx("span",{className:"mr-3",children:s.icon}),s.label,m[s.label]?e.jsx(L,{className:"ml-auto h-4 w-4"}):e.jsx(k,{className:"ml-auto h-4 w-4"})]}),m[s.label]&&e.jsx("div",{className:"mt-1 space-y-1 ml-12",children:s.submenu.map(n=>!n.permission||i(n.permission)?e.jsx(c,{to:n.path,className:r("block px-3 py-2 text-sm rounded-md transition-colors","hover:bg-blue-50",o(n.path,t.pathname)?"bg-blue-100 text-blue-700 font-medium":"text-gray-600"),children:n.label},n.path):null)})]},s.label):e.jsxs(c,{to:s.path||"#",className:r("flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors","hover:bg-blue-100",d(s.path)?"bg-blue-100 text-blue-700":"text-gray-800"),children:[e.jsx("span",{className:"mr-3",children:s.icon}),s.label]},s.path||s.label):null)})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.email)}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:a==null?void 0:a.role})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{to:"/agence/parametres",className:"p-1 rounded-md hover:bg-blue-100 text-gray-600 hover:text-blue-800",title:"Paramètres",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:p,className:"p-1 rounded-md hover:bg-red-100 text-gray-600 hover:text-red-800",title:"Déconnexion",children:e.jsx(_,{className:"h-5 w-5"})})]})]})})]}),e.jsx("main",{className:"flex-1 ml-64 p-6 overflow-auto bg-[#f4f6fc]",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(M,{})})})]})};export{U as default};

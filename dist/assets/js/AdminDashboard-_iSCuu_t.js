import{d as ce,_ as De}from"../index-Bkmir__O.js";import{R as w,al as Ee,am as be,r as R,b as ke,ad as Re,ae as Le,aa as Te,an as $e,B as Me,V as Ve,a as y,j as o,ao as ue,ap as Ie}from"./react-DB_4kGOy.js";import{z as me,x as Be,L as Fe}from"./firebase-lLzYRzUk.js";import{f as K,L as J,i as X,C as re,a as W,h as Ge,b as ze,u as Ke,G as We,g as de,c as pe,D as Xe,d as Ye,X as xe,Y as Ae,e as Ue,R as He,T as qe,j as Je}from"./generateCategoricalChart-B2qQXPfN.js";import{m as ee,d as he,e as Qe,g as fe,h as ie}from"./vendor-C-DAJou6.js";import{C as Ze}from"./CartesianGrid-D4v3AkFP.js";var et=["layout","type","stroke","connectNulls","isRange","ref"],tt=["key"],we;function Y(e){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(e)}function Ne(e,t){if(e==null)return{};var n=at(e,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function at(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},G.apply(this,arguments)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ve(Object(n),!0).forEach(function(a){L(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pe(a.key),a)}}function rt(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function it(e,t,n){return t=ae(t),st(e,_e()?Reflect.construct(t,n||[],ae(e).constructor):t.apply(e,n))}function st(e,t){if(t&&(Y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_e=function(){return!!e})()}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ae(e)}function lt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},se(e,t)}function L(e,t,n){return t=Pe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e){var t=ct(e,"string");return Y(t)=="symbol"?t:t+""}function ct(e,t){if(Y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Y(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $=function(e){function t(){var n;nt(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=it(this,t,[].concat(i)),L(n,"state",{isAnimationFinished:!0}),L(n,"id",Ke("recharts-area-")),L(n,"handleAnimationEnd",function(){var c=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ie(c)&&c()}),L(n,"handleAnimationStart",function(){var c=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ie(c)&&c()}),n}return lt(t,e),rt(t,[{key:"renderDots",value:function(a,i,l){var c=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(c&&!s)return null;var m=this.props,u=m.dot,f=m.points,p=m.dataKey,b=K(this.props,!1),_=K(u,!0),O=f.map(function(P,S){var r=B(B(B({key:"dot-".concat(S),r:3},b),_),{},{index:S,cx:P.x,cy:P.y,dataKey:p,value:P.value,payload:P.payload,points:f});return t.renderDotItem(u,r)}),C={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return w.createElement(J,G({className:"recharts-area-dots"},C),O)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,l=i.baseLine,c=i.points,s=i.strokeWidth,m=c[0].x,u=c[c.length-1].x,f=a*Math.abs(m-u),p=ee(c.map(function(b){return b.y||0}));return X(l)&&typeof l=="number"?p=Math.max(l,p):l&&Array.isArray(l)&&l.length&&(p=Math.max(ee(l.map(function(b){return b.y||0})),p)),X(p)?w.createElement("rect",{x:m<u?m:m-f,y:0,width:f,height:Math.floor(p+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,l=i.baseLine,c=i.points,s=i.strokeWidth,m=c[0].y,u=c[c.length-1].y,f=a*Math.abs(m-u),p=ee(c.map(function(b){return b.x||0}));return X(l)&&typeof l=="number"?p=Math.max(l,p):l&&Array.isArray(l)&&l.length&&(p=Math.max(ee(l.map(function(b){return b.x||0})),p)),X(p)?w.createElement("rect",{x:0,y:m<u?m:m-f,width:p+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,l,c){var s=this.props,m=s.layout,u=s.type,f=s.stroke,p=s.connectNulls,b=s.isRange;s.ref;var _=Ne(s,et);return w.createElement(J,{clipPath:l?"url(#clipPath-".concat(c,")"):null},w.createElement(re,G({},K(_,!0),{points:a,connectNulls:p,type:u,baseLine:i,layout:m,stroke:"none",className:"recharts-area-area"})),f!=="none"&&w.createElement(re,G({},K(this.props,!1),{className:"recharts-area-curve",layout:m,type:u,connectNulls:p,fill:"none",points:a})),f!=="none"&&b&&w.createElement(re,G({},K(this.props,!1),{className:"recharts-area-curve",layout:m,type:u,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var l=this,c=this.props,s=c.points,m=c.baseLine,u=c.isAnimationActive,f=c.animationBegin,p=c.animationDuration,b=c.animationEasing,_=c.animationId,O=this.state,C=O.prevPoints,P=O.prevBaseLine;return w.createElement(Ee,{begin:f,duration:p,isActive:u,easing:b,from:{t:0},to:{t:1},key:"area-".concat(_),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var r=S.t;if(C){var j=C.length/s.length,h=s.map(function(g,D){var k=Math.floor(D*j);if(C[k]){var E=C[k],M=W(E.x,g.x),V=W(E.y,g.y);return B(B({},g),{},{x:M(r),y:V(r)})}return g}),v;if(X(m)&&typeof m=="number"){var d=W(P,m);v=d(r)}else if(he(m)||Qe(m)){var x=W(P,0);v=x(r)}else v=m.map(function(g,D){var k=Math.floor(D*j);if(P[k]){var E=P[k],M=W(E.x,g.x),V=W(E.y,g.y);return B(B({},g),{},{x:M(r),y:V(r)})}return g});return l.renderAreaStatically(h,v,a,i)}return w.createElement(J,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(i)},l.renderClipRect(r))),w.createElement(J,{clipPath:"url(#animationClipPath-".concat(i,")")},l.renderAreaStatically(s,m,a,i)))})}},{key:"renderArea",value:function(a,i){var l=this.props,c=l.points,s=l.baseLine,m=l.isAnimationActive,u=this.state,f=u.prevPoints,p=u.prevBaseLine,b=u.totalLength;return m&&c&&c.length&&(!f&&b>0||!fe(f,c)||!fe(p,s))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(c,s,a,i)}},{key:"render",value:function(){var a,i=this.props,l=i.hide,c=i.dot,s=i.points,m=i.className,u=i.top,f=i.left,p=i.xAxis,b=i.yAxis,_=i.width,O=i.height,C=i.isAnimationActive,P=i.id;if(l||!s||!s.length)return null;var S=this.state.isAnimationFinished,r=s.length===1,j=be("recharts-area",m),h=p&&p.allowDataOverflow,v=b&&b.allowDataOverflow,d=h||v,x=he(P)?this.id:P,g=(a=K(c,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},D=g.r,k=D===void 0?3:D,E=g.strokeWidth,M=E===void 0?2:E,V=Ge(c)?c:{},T=V.clipDot,I=T===void 0?!0:T,z=k*2+M;return w.createElement(J,{className:j},h||v?w.createElement("defs",null,w.createElement("clipPath",{id:"clipPath-".concat(x)},w.createElement("rect",{x:h?f:f-_/2,y:v?u:u-O/2,width:h?_:_*2,height:v?O:O*2})),!I&&w.createElement("clipPath",{id:"clipPath-dots-".concat(x)},w.createElement("rect",{x:f-z/2,y:u-z/2,width:_+z,height:O+z}))):null,r?null:this.renderArea(d,x),(c||r)&&this.renderDots(d,I,x),(!C||S)&&ze.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(R.PureComponent);we=$;L($,"displayName","Area");L($,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!We.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});L($,"getBaseValue",function(e,t,n,a){var i=e.layout,l=e.baseValue,c=t.props.baseValue,s=c??l;if(X(s)&&typeof s=="number")return s;var m=i==="horizontal"?a:n,u=m.scale.domain();if(m.type==="number"){var f=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return s==="dataMin"?p:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});L($,"getComposedData",function(e){var t=e.props,n=e.item,a=e.xAxis,i=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,s=e.bandSize,m=e.dataKey,u=e.stackedData,f=e.dataStartIndex,p=e.displayedData,b=e.offset,_=t.layout,O=u&&u.length,C=we.getBaseValue(t,n,a,i),P=_==="horizontal",S=!1,r=p.map(function(h,v){var d;O?d=u[f+v]:(d=de(h,m),Array.isArray(d)?S=!0:d=[C,d]);var x=d[1]==null||O&&de(h,m)==null;return P?{x:pe({axis:a,ticks:l,bandSize:s,entry:h,index:v}),y:x?null:i.scale(d[1]),value:d,payload:h}:{x:x?null:a.scale(d[1]),y:pe({axis:i,ticks:c,bandSize:s,entry:h,index:v}),value:d,payload:h}}),j;return O||S?j=r.map(function(h){var v=Array.isArray(h.value)?h.value[0]:null;return P?{x:h.x,y:v!=null&&h.y!=null?i.scale(v):null}:{x:v!=null?a.scale(v):null,y:h.y}}):j=P?i.scale(C):a.scale(C),B({points:r,baseLine:j,layout:_,isRange:S},b)});L($,"renderDotItem",function(e,t){var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(ie(e))n=e(t);else{var a=be("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,l=Ne(t,tt);n=w.createElement(Xe,G({},l,{key:i,className:a}))}return n});var ut=Ye({chartName:"AreaChart",GraphicalChild:$,axisComponents:[{axisType:"xAxis",AxisComp:xe},{axisType:"yAxis",AxisComp:Ae}],formatAxisMap:Ue});const F=new Intl.NumberFormat("fr-FR"),te=e=>`${F.format(e||0)} FCFA`,ye=e=>Number.isFinite(Number(e))?Number(e):0,Oe=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,oe=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},mt=(e,t)=>{const n=[];let a=new Date(e);for(;a<=t;)n.push({date:Oe(a),gmv:0,reservations:0}),a=oe(a,1);return n},dt=e=>{const t=e.depart||e.from||e.origin||"",n=e.arrivee||e.to||e.destination||"";return t&&n?`${t} → ${n}`:e.routeName?e.routeName:"Trajet inconnu"},bt=()=>{const e=ke(),[t,n]=R.useState("30j"),[a,i]=R.useState([]),[l,c]=R.useState("__all__"),[s,m]=R.useState({total:0,commission:0,reservations:0,annulations:0,compagnies:0,nouvellesCompagnies:0}),[u,f]=R.useState([]),[p,b]=R.useState([]),[_,O]=R.useState([]);R.useEffect(()=>{(async()=>{var le;const h=(await me(Be(ce,"companies"))).docs.map(A=>({id:A.id,nom:A.data().nom||"Compagnie",slug:A.data().slug||"—",plan:A.data().plan||"free",status:A.data().status||"actif",createdAt:A.data().createdAt}));i(h);const v=await me(Fe(ce,"reservations")),d=new Date;let x=null;t==="7j"?x=oe(new Date(d),-6):t==="30j"&&(x=oe(new Date(d),-29));const g=x?mt(x,d):[],D=new Map;g.forEach(A=>D.set(A.date,{gmv:0,reservations:0}));let k=0,E=0,M=0,V=0;const T={},I={};for(const A of v.docs){const N=A.data(),Q=ye(N.total??N.montant),Se=ye(N.commission),Z=(le=N.createdAt)!=null&&le.seconds?N.createdAt.seconds*1e3:null;if(x&&Z){const q=new Date(Z);if(q<x||q>d)continue}if(l!=="__all__"&&(N.companyId??"")!==l)continue;if(M++,k+=Q,E+=Se,N.statut==="annulé"&&V++,Z){const q=Oe(new Date(Z)),ne=D.get(q)??{gmv:0,reservations:0};ne.gmv+=Q,ne.reservations+=1,D.set(q,ne)}const U=N.companyId||"inconnu";T[U]||(T[U]={id:U,name:N.companyName||"Compagnie",gmv:0,reservations:0}),T[U].gmv+=Q,T[U].reservations+=1;const H=dt(N);I[H]||(I[H]={route:H,gmv:0,reservations:0}),I[H].gmv+=Q,I[H].reservations+=1}const z=Array.from(D.entries()).sort((A,N)=>A[0]<N[0]?-1:1).map(([A,N])=>({date:A,...N})),je=l!=="__all__"?Object.values(T).filter(A=>A.id===l).slice(0,1):Object.values(T).sort((A,N)=>N.gmv-A.gmv).slice(0,5),Ce=Object.values(I).sort((A,N)=>N.gmv-A.gmv||N.reservations-A.reservations).slice(0,5);f(z),b(je),O(Ce),m({total:k,commission:E,reservations:M,annulations:V,compagnies:l==="__all__"?h.length:1,nouvellesCompagnies:0})})()},[t,l]);const C=R.useMemo(()=>[{label:"Montant encaissé",value:te(s.total),icon:Re,color:"text-green-600",to:"/admin/finances"},{label:"Commission générée",value:te(s.commission),icon:Le,color:"text-orange-600",to:"/admin/finances"},{label:"Réservations",value:F.format(s.reservations),icon:Te,color:"text-blue-600",to:"/admin/reservations"},{label:"Annulations",value:F.format(s.annulations),icon:$e,color:"text-red-600",to:"/admin/reservations"},{label:"Compagnies actives",value:F.format(s.compagnies),icon:Me,color:"text-purple-600",to:"/admin/compagnies"},{label:"Nouvelles compagnies",value:F.format(s.nouvellesCompagnies),icon:Ve,color:"text-emerald-600",to:"/admin/compagnies"}],[s,e]),P=()=>{const r=[];r.push("=== KPIs ==="),r.push(`Total;${s.total}`),r.push(`Commission;${s.commission}`),r.push(`Réservations;${s.reservations}`),r.push(`Annulations;${s.annulations}`),r.push(`Compagnies;${s.compagnies}`),r.push(""),r.push("=== Séries ==="),r.push("Date;GMV;Réservations"),u.forEach(d=>r.push(`${d.date};${d.gmv};${d.reservations}`)),r.push(""),r.push("=== Top compagnies ==="),r.push("Compagnie;GMV;Réservations"),p.forEach(d=>r.push(`${d.name};${d.gmv};${d.reservations}`)),r.push(""),r.push("=== Top destinations ==="),r.push("Trajet;GMV;Réservations"),_.forEach(d=>r.push(`${d.route};${d.gmv};${d.reservations}`));const j=new Blob([r.join(`
`)],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(j),v=document.createElement("a");v.href=h,v.download="dashboard_export.csv",v.click(),URL.revokeObjectURL(h)},S=async()=>{const r=await De(()=>import("./xlsx-D_0l8YDs.js"),[]),j=[["Période",t==="tout"?"Tout":t==="7j"?"7 jours":"30 jours"],[],["Indicateur","Valeur brute"],["Total (GMV)",s.total],["Commission",s.commission],["Réservations",s.reservations],["Annulations",s.annulations],["Compagnies",s.compagnies]],h=[["Date","GMV","Réservations"],...u.map(g=>[g.date,g.gmv,g.reservations])],v=[["Compagnie","GMV","Réservations"],...p.map(g=>[g.name,g.gmv,g.reservations])],d=[["Trajet","GMV","Réservations"],..._.map(g=>[g.route,g.gmv,g.reservations])],x=r.utils.book_new();r.utils.book_append_sheet(x,r.utils.aoa_to_sheet(j),"KPIs"),r.utils.book_append_sheet(x,r.utils.aoa_to_sheet(h),"Series"),r.utils.book_append_sheet(x,r.utils.aoa_to_sheet(v),"Top_Companies"),r.utils.book_append_sheet(x,r.utils.aoa_to_sheet(d),"Top_Destinations"),r.writeFile(x,"dashboard_export.xlsx")};return y("div",{className:"space-y-8",children:[y("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[y("div",{children:[o("h2",{className:"text-xl font-semibold",children:"Vue d’ensemble"}),o("p",{className:"text-gray-600",children:"Performance globale de la plateforme."})]}),y("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[y("div",{className:"flex items-center gap-2",children:[o("label",{className:"text-sm text-gray-600",children:"Compagnie :"}),y("select",{className:"rounded-lg border border-gray-300 bg-white px-3 py-1 text-sm",value:l,onChange:r=>c(r.target.value),children:[o("option",{value:"__all__",children:"Toutes"}),a.map(r=>o("option",{value:r.id,children:r.nom},r.id))]})]}),o("div",{className:"flex gap-2",children:["7j","30j","tout"].map(r=>o("button",{onClick:()=>n(r),className:`px-3 py-1 rounded-full text-sm font-medium transition ${t===r?"bg-orange-600 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r==="7j"?"7 jours":r==="30j"?"30 jours":"Tout"},r))}),y("div",{className:"flex gap-2",children:[y("button",{onClick:P,className:"flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium bg-green-600 text-white hover:bg-green-700",children:[o(ue,{className:"h-4 w-4"})," Export CSV"]}),y("button",{onClick:S,className:"flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700",children:[o(ue,{className:"h-4 w-4"})," Export Excel"]})]})]})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:C.map(({label:r,value:j,icon:h,color:v,to:d})=>y("button",{onClick:()=>e(d),className:"text-left bg-white p-4 rounded-xl border shadow-sm hover:shadow-md hover:translate-y-[-1px] transition focus:outline-none focus:ring-2 focus:ring-orange-200",children:[o(h,{className:`h-6 w-6 mb-2 ${v}`}),o("p",{className:"text-sm text-gray-500",children:r}),o("p",{className:"text-lg font-bold",children:j})]},r))}),y("section",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[o("h3",{className:"text-lg font-semibold mb-4",children:"Tendances"}),u.length===0?o("p",{className:"text-gray-500 text-sm",children:"Pas assez de données temporelles."}):o("div",{className:"h-72 w-full",children:o(He,{width:"100%",height:"100%",children:y(ut,{data:u,children:[y("defs",{children:[y("linearGradient",{id:"gmv",x1:"0",y1:"0",x2:"0",y2:"1",children:[o("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.25}),o("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:0})]}),y("linearGradient",{id:"bookings",x1:"0",y1:"0",x2:"0",y2:"1",children:[o("stop",{offset:"5%",stopColor:"#2563eb",stopOpacity:.25}),o("stop",{offset:"95%",stopColor:"#2563eb",stopOpacity:0})]})]}),o(Ze,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),o(xe,{dataKey:"date",tick:{fontSize:12,fill:"#64748b"}}),o(Ae,{}),o(qe,{}),o(Je,{}),o($,{type:"monotone",dataKey:"gmv",name:"GMV (FCFA)",stroke:"#16a34a",fill:"url(#gmv)"}),o($,{type:"monotone",dataKey:"reservations",name:"Réservations",stroke:"#2563eb",fill:"url(#bookings)"})]})})})]}),y("section",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[o("h3",{className:"text-lg font-semibold mb-4",children:"Top compagnies"}),p.length===0?o("p",{className:"text-gray-500 text-sm",children:"Pas de données."}):o("div",{className:"overflow-x-auto",children:y("table",{className:"w-full text-sm text-left border",children:[o("thead",{className:"bg-gray-50",children:y("tr",{children:[o("th",{className:"px-4 py-2",children:"Compagnie"}),o("th",{className:"px-4 py-2",children:"Réservations"}),o("th",{className:"px-4 py-2",children:"GMV"})]})}),o("tbody",{children:p.map(r=>y("tr",{className:"border-t",children:[o("td",{className:"px-4 py-2 font-medium",children:r.name}),o("td",{className:"px-4 py-2",children:F.format(r.reservations)}),o("td",{className:"px-4 py-2",children:te(r.gmv)})]},r.id))})]})})]}),y("section",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[o("h3",{className:"text-lg font-semibold mb-4",children:"Top destinations"}),_.length===0?o("p",{className:"text-gray-500 text-sm",children:"Pas de données."}):o("div",{className:"overflow-x-auto",children:y("table",{className:"w-full text-sm text-left border",children:[o("thead",{className:"bg-gray-50",children:y("tr",{children:[o("th",{className:"px-4 py-2",children:"Trajet"}),o("th",{className:"px-4 py-2",children:"Réservations"}),o("th",{className:"px-4 py-2",children:"GMV"})]})}),o("tbody",{children:_.map(r=>y("tr",{className:"border-t",children:[o("td",{className:"px-4 py-2 font-medium",children:r.route}),o("td",{className:"px-4 py-2",children:F.format(r.reservations)}),o("td",{className:"px-4 py-2",children:te(r.gmv)})]},r.route))})]})})]}),y("section",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[y("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o(Ie,{className:"h-5 w-5 text-red-500"})," Alertes"]}),y("ul",{className:"text-sm text-gray-700 list-disc pl-5 space-y-1",children:[o("li",{children:"Compagnies sans réservation depuis 30 jours"}),o("li",{children:"Factures impayées détectées"}),o("li",{children:"Taux d’annulation supérieur à 20%"})]})]})]})};export{bt as default};

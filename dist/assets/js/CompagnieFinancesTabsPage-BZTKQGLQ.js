import{r as n,j as e}from"./react-Bg_vEni-.js";import{q as b,w as h,f as j,h as u}from"./firebase-C3aZpI0W.js";import{u as y,d as g}from"../index-Dgt8Lr4V.js";import S from"./CompagnieStatistiquesMensuellesPage-CZKxeiLZ.js";import"./vendor-D_4iK-Jm.js";import"./BarChart-C-khxpHp.js";import"./CartesianGrid-DsUeTV-4.js";const D=()=>{const{user:s}=y(),[a,i]=n.useState([]),[r,o]=n.useState(0);return n.useEffect(()=>{(async()=>{if(!(s!=null&&s.companyId))return;const c=b(j(g,"reservations"),h("compagnieId","==",s.companyId),h("statut","==","payÃ©")),m=(await u(c)).docs.map(d=>d.data());i(m);const p=m.reduce((d,x)=>d+(x.montant||0),0);o(p)})()},[s]),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"ðŸ“¥ Recettes"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Total encaissÃ© : ",e.jsxs("span",{className:"font-bold text-green-600",children:[r.toLocaleString()," FCFA"]})]}),e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"Date"}),e.jsx("th",{className:"border p-2",children:"Nom"}),e.jsx("th",{className:"border p-2",children:"Montant"}),e.jsx("th",{className:"border p-2",children:"Canal"})]})}),e.jsx("tbody",{children:a.map((t,c)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:t.date}),e.jsx("td",{className:"border p-2",children:t.nomClient}),e.jsxs("td",{className:"border p-2",children:[(l=t.montant)==null?void 0:l.toLocaleString()," FCFA"]}),e.jsx("td",{className:"border p-2",children:t.canal})]},c)})})]})]})},F=()=>{const{user:s}=y(),[a,i]=n.useState([]),[r,o]=n.useState(0);return n.useEffect(()=>{(async()=>{if(!(s!=null&&s.companyId))return;const c=b(j(g,"depenses"),h("companyId","==",s.companyId)),m=(await u(c)).docs.map(d=>d.data());i(m);const p=m.reduce((d,x)=>d+(x.montant||0),0);o(p)})()},[s]),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"ðŸ“¤ DÃ©penses"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Total des dÃ©penses : ",e.jsxs("span",{className:"font-bold text-red-600",children:[r.toLocaleString()," FCFA"]})]}),e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"Date"}),e.jsx("th",{className:"border p-2",children:"Description"}),e.jsx("th",{className:"border p-2",children:"Montant"})]})}),e.jsx("tbody",{children:a.map((t,c)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:t.date}),e.jsx("td",{className:"border p-2",children:t.description}),e.jsxs("td",{className:"border p-2",children:[(l=t.montant)==null?void 0:l.toLocaleString()," FCFA"]})]},c)})})]})]})},w=()=>{const{user:s}=y(),[a,i]=n.useState(0),[r,o]=n.useState(0),[t,c]=n.useState(0);return n.useEffect(()=>{(async()=>{if(!(s!=null&&s.companyId))return;const p=(await u(b(j(g,"reservations"),h("compagnieId","==",s.companyId),h("statut","==","payÃ©")))).docs.reduce((N,f)=>N+(f.data().montant||0),0);i(p);const x=(await u(b(j(g,"depenses"),h("companyId","==",s.companyId)))).docs.reduce((N,f)=>N+(f.data().montant||0),0);o(x),c(p-x)})()},[s]),e.jsxs("div",{className:"p-4 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"ðŸ“Š Ã‰quilibre financier"}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Cette section affiche le rÃ©sultat net de la compagnie : recettes totales - dÃ©penses totales."}),e.jsxs("ul",{className:"text-sm space-y-2",children:[e.jsxs("li",{children:["ðŸ’° Recettes totales : ",e.jsxs("span",{className:"font-semibold text-green-600",children:[a.toLocaleString()," FCFA"]})]}),e.jsxs("li",{children:["ðŸ“¤ DÃ©penses totales : ",e.jsxs("span",{className:"font-semibold text-red-500",children:[r.toLocaleString()," FCFA"]})]}),e.jsxs("li",{children:["ðŸ§¾ RÃ©sultat net : ",e.jsxs("span",{className:`font-bold ${t>=0?"text-green-700":"text-red-700"}`,children:[t.toLocaleString()," FCFA"]})]})]})]})},T=()=>{const s=["Recettes","DÃ©penses","Ã‰quilibre","Statistiques"],[a,i]=n.useState(0);return e.jsxs("div",{className:"p-6 bg-white min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"ðŸ’° Finances de la compagnie"}),e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsx("nav",{className:"-mb-px flex space-x-6",children:s.map((r,o)=>e.jsx("button",{onClick:()=>i(o),className:`px-3 py-2 font-medium text-sm border-b-2 ${a===o?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:r},r))})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded shadow",children:[a===0&&e.jsx(D,{}),a===1&&e.jsx(F,{}),a===2&&e.jsx(w,{}),a===3&&e.jsx(S,{})]})]})};export{T as default};

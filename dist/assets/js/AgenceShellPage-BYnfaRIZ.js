import{u as x,j as e,N as c,a as t,ai as h,ak as w,au as u,ar as N,as as f,ba as y,bb as v,bc as k,bd as C,be as j,b9 as A,T as $,aa as S}from"./react-DB_4kGOy.js";import{u as L,b as T}from"../index-Bkmir__O.js";import"./firebase-lLzYRzUk.js";import"./vendor-C-DAJou6.js";const P=()=>{var p;const{user:a,company:r,logout:g}=L(),l=T(r)||{colors:{primary:"#EA580C",secondary:"#F97316",background:"#f8fafc"}},i=x(),d=Array.isArray(a==null?void 0:a.role)?a.role:a!=null&&a.role?[a.role]:[],b=new Set(d),o=s=>b.has(s);if(!(o("chefAgence")||o("superviseur")||o("admin_compagnie")))return o("guichetier")?e(c,{to:"/agence/guichet",replace:!0}):o("comptable")?e(c,{to:"/agence/comptabilite",replace:!0}):e(c,{to:"/login",replace:!0});const m=[{label:"Dashboard",to:"/agence/dashboard",icon:e(N,{className:"w-4 h-4"})},{label:"R√©servations",to:"/agence/reservations",icon:e(f,{className:"w-4 h-4"})},{label:"Embarquement",to:"/agence/embarquement",icon:e(y,{className:"w-4 h-4"})},{label:"Trajets",to:"/agence/trajets",icon:e(v,{className:"w-4 h-4"})},{label:"Garage",to:"/agence/garage",icon:e(k,{className:"w-4 h-4"})},{label:"Recettes",to:"/agence/recettes",icon:e(C,{className:"w-4 h-4"})},{label:"Rapports",to:"/agence/rapports",icon:e(j,{className:"w-4 h-4"})},{label:"Finances",to:"/agence/finances",icon:e(A,{className:"w-4 h-4"})},{label:"Comptabilit√©",to:"/agence/comptabilite",icon:e($,{className:"w-4 h-4"})},{label:"Personnel",to:"/agence/personnel",icon:e(S,{className:"w-4 h-4"})}];return t("div",{className:"min-h-screen",style:{background:((p=l.colors)==null?void 0:p.background)||"#f7fafc"},children:[t("header",{className:"sticky top-0 z-40 border-b bg-white/85 backdrop-blur supports-[backdrop-filter]:bg-white/65",children:[e("div",{className:"max-w-7xl mx-auto px-3 md:px-4 py-2.5 md:py-3 flex items-center justify-between gap-3",children:t("div",{className:"flex items-center gap-3 min-w-0 w-full",children:[r!=null&&r.logoUrl?e("img",{src:r.logoUrl,alt:"Logo compagnie",className:"rounded-xl object-contain border bg-white p-1 shrink-0",style:{width:"clamp(32px, 6vw, 40px)",height:"clamp(32px, 6vw, 40px)"},onError:s=>{s.currentTarget.style.display="none"}}):e("div",{className:"grid place-items-center rounded-xl bg-gray-200 shrink-0",style:{width:"clamp(32px, 6vw, 40px)",height:"clamp(32px, 6vw, 40px)"},"aria-hidden":!0,children:"üöå"}),t("div",{className:"min-w-0 flex-1",children:[e("div",{className:"font-extrabold tracking-tight leading-tight break-words whitespace-normal",style:{fontSize:"clamp(16px, 2.6vw, 20px)",background:`linear-gradient(90deg, ${l.colors.primary}, ${l.colors.secondary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:(r==null?void 0:r.nom)||"Compagnie"}),e("div",{className:"text-[11px] md:text-xs text-gray-600 leading-snug break-words",children:(a==null?void 0:a.agencyName)||"Agence"})]})]})}),e("div",{className:"hidden md:block border-t bg-white",children:e("nav",{className:"max-w-7xl mx-auto px-3 md:px-4 py-2",children:e("div",{className:"flex flex-wrap gap-2",children:m.map(s=>{const n=i.pathname.startsWith(s.to);return e(h,{to:s.to,className:`px-3 py-2 rounded-xl text-sm font-medium whitespace-nowrap ${n?"text-white shadow":"bg-white hover:bg-slate-50 border"}`,style:n?{background:`linear-gradient(90deg, ${l.colors.primary}, ${l.colors.secondary})`}:{},children:t("span",{className:"inline-flex items-center gap-1.5",children:[s.icon,s.label]})},s.to)})})})}),e("div",{className:"md:hidden overflow-x-auto border-t bg-white",children:e("div",{className:"flex gap-2 p-2 w-max",children:m.map(s=>{const n=i.pathname.startsWith(s.to);return e(h,{to:s.to,className:`px-3 py-2 rounded-lg text-xs font-medium border shadow-sm whitespace-nowrap ${n?"text-white":"bg-white"}`,style:n?{background:`linear-gradient(90deg, ${l.colors.primary}, ${l.colors.secondary})`}:{},children:t("span",{className:"inline-flex items-center gap-1.5",children:[s.icon,s.label]})},s.to)})})})]}),e("main",{className:"max-w-7xl mx-auto px-3 md:px-4 py-5 md:py-6",children:e(w,{})}),e("footer",{className:"max-w-7xl mx-auto px-3 md:px-4 pb-6",children:t("div",{className:"rounded-2xl border bg-white p-3 md:p-4 shadow-sm flex items-center justify-between gap-3 text-sm",children:[t("div",{className:"min-w-0",children:[e("div",{className:"font-semibold break-words",children:a?a.displayName||a.email:"Utilisateur non connect√©"}),e("div",{className:"text-gray-500 text-xs",children:d.join(", ")||"‚Äî"})]}),a?e("button",{onClick:g,className:"px-3 py-2 rounded-lg border bg-white hover:bg-slate-50 shadow-sm",children:"Se d√©connecter"}):e(u,{to:"/login",className:"px-3 py-2 rounded-lg border bg-white hover:bg-slate-50 shadow-sm",children:"Se connecter"})]})})]})};export{P as default};
